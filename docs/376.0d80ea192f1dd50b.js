"use strict";(self.webpackChunkx4_new=self.webpackChunkx4_new||[]).push([[376],{6376:(et,p,r)=>{r.r(p),r.d(p,{WareModule:()=>tt});var l=r(9453),x=r(433),T=r(5398),s=r(2655),u=r(6895),A=r(6157),h=r(475),q=r(1814),m=r(617),t=r(1571),g=r(2459),v=r(1481),f=r(8782),c=r(4943);let U=(()=>{class i extends A.${constructor(e,n,o,d){super(e,n,o),this.titleService=d}ngOnInit(){this.titleService.setTitle(`${m.q} - Wares`),this.transportTypes=q.w.values(h.F),super.ngOnInit()}calculatePriceDiffPerVolume(e){return(e.price.max-e.price.min)/e.volume}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.l),t.Y36(s.F0),t.Y36(s.gz),t.Y36(v.Dx))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t.qOj],decls:22,vars:15,consts:function(){let e;return e=$localize`:@@wares: Wares `,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],e,[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","transport","caption","Transport"],[3,"dataSource"],["dataField","price.min","caption","Min Price","dataType","number","format","fixedPoint"],["dataField","price.avg","caption","Avg Price","dataType","number","format","fixedPoint"],["dataField","price.max","caption","Max Price","dataType","number","format","fixedPoint"],["dataField","volume","caption","Volume","dataType","number","format","fixedPoint"],["caption","Price Diff / Volume","dataType","number","name","priceDiffPerVolume",3,"allowSorting","allowFiltering","calculateCellValue"],["type","fixedPoint",3,"precision"],["column","name","summaryType","count"]]},template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.SDv(4,4),t.qZA(),t.TgZ(5,"div",5)(6,"dx-data-grid",6),t.NdJ("onCellClick",function(_){return o.onRowSelect(_)}),t._UZ(7,"dxo-pager",7)(8,"dxo-sorting",8)(9,"dxo-filter-row",9)(10,"dxo-filter-panel",10)(11,"dxi-column",11),t.TgZ(12,"dxi-column",12),t._UZ(13,"dxo-lookup",13),t.qZA(),t._UZ(14,"dxi-column",14)(15,"dxi-column",15)(16,"dxi-column",16)(17,"dxi-column",17),t.TgZ(18,"dxi-column",18),t._UZ(19,"dxo-format",19),t.qZA(),t.TgZ(20,"dxo-summary"),t._UZ(21,"dxi-total-item",20),t.qZA()()()()()()),2&n&&(t.xp6(6),t.Q6J("dataSource",o.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),t.xp6(1),t.Q6J("showPageSizeSelector",!0)("showNavigationButtons",!0),t.xp6(2),t.Q6J("applyFilter",o.currentFilter)("visible",!0),t.xp6(1),t.Q6J("visible",!0),t.xp6(3),t.Q6J("dataSource",o.transportTypes),t.xp6(5),t.Q6J("allowSorting",!0)("allowFiltering",!0)("calculateCellValue",o.calculatePriceDiffPerVolume),t.xp6(1),t.Q6J("precision",2))},dependencies:[f.e,c.qvW,c.w3U,c.NAX,c.ecQ,c.I62,c.ilc,c.SWO,c.owF,c.DTS],encapsulation:2})}return i})();var y=r(9407),w=r(5730),O=r(9746),C=r(7583);function N(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1," | "),t.qZA())}const W=function(i){return["/factions",i]};function I(i,a){if(1&i&&(t.TgZ(0,"span")(1,"a",24),t._uU(2),t.qZA(),t.YNc(3,N,2,0,"span",25),t.qZA()),2&i){const e=a.$implicit,n=a.last;t.xp6(1),t.Q6J("routerLink",t.VKq(3,W,e.id)),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",!n)}}function S(i,a){if(1&i&&(t.ynx(0),t.YNc(1,I,4,5,"span",23),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.entity.illegal)}}function b(i,a){1&i&&t._uU(0," - ")}const Z=function(i){return["/wares/",i]};function P(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.TgZ(3,"a",24),t._uU(4),t.qZA()(),t.TgZ(5,"td",36),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",36),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",36),t._uU(12),t.ALo(13,"number"),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.amount," x "),t.xp6(1),t.Q6J("routerLink",t.VKq(12,Z,e.ware.id)),t.xp6(1),t.Oqu(e.ware.name),t.xp6(2),t.Oqu(t.lcZ(7,6,e.amount*e.ware.price.min)),t.xp6(3),t.Oqu(t.lcZ(10,8,e.amount*e.ware.price.max)),t.xp6(3),t.Oqu(t.lcZ(13,10,e.amount*e.ware.price.avg))}}function J(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"div",34)(2,"h6"),t._uU(3,"Requirements"),t.qZA(),t.TgZ(4,"table",35)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Resource"),t.qZA(),t.TgZ(9,"th",36),t._uU(10,"Min"),t.qZA(),t.TgZ(11,"th",36),t._uU(12,"Max"),t.qZA(),t.TgZ(13,"th",36),t._uU(14,"Avg"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,P,14,14,"tr",23),t.qZA(),t.TgZ(17,"tfoot")(18,"tr")(19,"th",36),t._uU(20,"Total"),t.qZA(),t.TgZ(21,"th",36),t._uU(22),t.ALo(23,"number"),t.qZA(),t.TgZ(24,"th",36),t._uU(25),t.ALo(26,"number"),t.qZA(),t.TgZ(27,"th",36),t._uU(28),t.ALo(29,"number"),t.qZA()()()()()()),2&i){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(16),t.Q6J("ngForOf",e.wares),t.xp6(6),t.Oqu(t.lcZ(23,4,n.getTotalMin(e))),t.xp6(3),t.Oqu(t.lcZ(26,6,n.getTotalMax(e))),t.xp6(3),t.Oqu(t.lcZ(29,8,n.getTotalAvg(e)))}}function F(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Max Efficiency"),t.qZA(),t.TgZ(3,"td",36),t._uU(4),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij("",100*e.efficiency.product+100,"% ")}}function Q(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",36)(4,"span",37),t._uU(5," Min: "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t._uU(9," / "),t.qZA(),t.TgZ(10,"span",38),t._uU(11," Avg: "),t.TgZ(12,"strong"),t._uU(13),t.ALo(14,"number"),t.qZA(),t._uU(15," / "),t.qZA(),t.TgZ(16,"span",13),t._uU(17," Max: "),t.TgZ(18,"strong"),t._uU(19),t.ALo(20,"number"),t.qZA()()()()),2&i){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(2),t.hij("Profit per Hour (",100*e.efficiency.product+100,"% Efficiency) "),t.xp6(5),t.Oqu(t.xi3(8,4,n.entity.price.min*(3600/e.time)*e.amount*(1+e.efficiency.product),"1.0-0")),t.xp6(6),t.Oqu(t.xi3(14,7,n.entity.price.avg*(3600/e.time)*e.amount*(1+e.efficiency.product),"1.0-0")),t.xp6(6),t.Oqu(t.xi3(20,10,n.entity.price.max*(3600/e.time)*e.amount*(1+e.efficiency.product),"1.0-0"))}}function D(i,a){if(1&i&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",31),t._uU(3),t.qZA(),t.TgZ(4,"div",32),t.YNc(5,J,30,10,"div",33),t.TgZ(6,"div",10)(7,"div",34)(8,"h6"),t._uU(9,"Production"),t.qZA(),t.TgZ(10,"table",35)(11,"tbody")(12,"tr")(13,"td"),t._uU(14,"Cycle Time"),t.qZA(),t.TgZ(15,"td",36),t._uU(16),t.qZA()(),t.TgZ(17,"tr")(18,"td"),t._uU(19,"Batch Size"),t.qZA(),t.TgZ(20,"td",36),t._uU(21),t.qZA()(),t.TgZ(22,"tr")(23,"td"),t._uU(24,"Products per Hour"),t.qZA(),t.TgZ(25,"td",36),t._uU(26),t.ALo(27,"number"),t.qZA()(),t.YNc(28,F,5,1,"tr",25),t.TgZ(29,"tr")(30,"td"),t._uU(31,"Profit per Hour (100% Efficiency)"),t.qZA(),t.TgZ(32,"td",36)(33,"span",37),t._uU(34," Min: "),t.TgZ(35,"strong"),t._uU(36),t.ALo(37,"number"),t.qZA(),t._uU(38," / "),t.qZA(),t.TgZ(39,"span",38),t._uU(40," Avg: "),t.TgZ(41,"strong"),t._uU(42),t.ALo(43,"number"),t.qZA(),t._uU(44," / "),t.qZA(),t.TgZ(45,"span",13),t._uU(46," Max: "),t.TgZ(47,"strong"),t._uU(48),t.ALo(49,"number"),t.qZA()()()(),t.YNc(50,Q,21,13,"tr",25),t.qZA()()()()()()()),2&i){const e=a.$implicit,n=t.oxw(5);t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngIf",e.wares.length),t.xp6(11),t.Oqu(n.getProductionTime(e.time)),t.xp6(5),t.Oqu(e.amount),t.xp6(5),t.Oqu(t.xi3(27,10,3600/e.time*e.amount,"1.0")),t.xp6(2),t.Q6J("ngIf",e.efficiency),t.xp6(8),t.Oqu(t.xi3(37,13,n.entity.price.min*(3600/e.time)*e.amount,"1.0-0")),t.xp6(6),t.Oqu(t.xi3(43,16,n.entity.price.avg*(3600/e.time)*e.amount,"1.0-0")),t.xp6(6),t.Oqu(t.xi3(49,19,n.entity.price.max*(3600/e.time)*e.amount,"1.0-0")),t.xp6(2),t.Q6J("ngIf",e.efficiency)}}function M(i,a){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,D,51,22,"div",28),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.entityProduction)}}function Y(i,a){if(1&i&&t.YNc(0,M,2,1,"div",26),2&i){const e=t.oxw(3);t.Q6J("ngIf",e.entityProduction&&e.entityProduction.length)}}function E(i,a){1&i&&(t.TgZ(0,"div",45),t._uU(1,"No usage found."),t.qZA())}function L(i,a){if(1&i&&(t.TgZ(0,"div",46)(1,"a",24),t._uU(2),t.qZA()()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,Z,e.id)),t.xp6(1),t.Oqu(e.name)}}function $(i,a){1&i&&(t.TgZ(0,"div",45),t._uU(1,"No usage found."),t.qZA())}const R=function(i){return["/ships/",i]};function z(i,a){if(1&i&&(t.TgZ(0,"div",47)(1,"a",24),t._uU(2),t.qZA()()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,R,e.id)),t.xp6(1),t.Oqu(e.name)}}function V(i,a){1&i&&(t.TgZ(0,"div",45),t._uU(1,"No usage found."),t.qZA())}const B=function(i){return["/modules/",i]};function j(i,a){if(1&i&&(t.TgZ(0,"div",47)(1,"a",24),t._uU(2),t.qZA()()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,B,e.id)),t.xp6(1),t.Oqu(e.name)}}function K(i,a){if(1&i&&(t.TgZ(0,"div",27)(1,"div",39)(2,"div",40)(3,"div",41),t._uU(4," Wares "),t.qZA(),t.TgZ(5,"div",7)(6,"div",10),t.YNc(7,E,2,0,"div",42),t.YNc(8,L,3,4,"div",43),t.qZA()()()(),t.TgZ(9,"div",39)(10,"div",40)(11,"div",41),t._uU(12," Ships "),t.qZA(),t.TgZ(13,"div",7)(14,"div",10),t.YNc(15,$,2,0,"div",42),t.YNc(16,z,3,4,"div",44),t.qZA()()()(),t.TgZ(17,"div",39)(18,"div",40)(19,"div",41),t._uU(20," Station Modules "),t.qZA(),t.TgZ(21,"div",7)(22,"div",10),t.YNc(23,V,2,0,"div",42),t.YNc(24,j,3,4,"div",44),t.qZA()()()()()),2&i){const e=t.oxw(3);t.xp6(7),t.Q6J("ngIf",!e.waresUsedIn.length),t.xp6(1),t.Q6J("ngForOf",e.waresUsedIn),t.xp6(7),t.Q6J("ngIf",!e.shipsUsedIn.length),t.xp6(1),t.Q6J("ngForOf",e.shipsUsedIn),t.xp6(7),t.Q6J("ngIf",!e.modulesUsedIn.length),t.xp6(1),t.Q6J("ngForOf",e.modulesUsedIn)}}function X(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8)(2,"label",9),t._uU(3),t.qZA()(),t.TgZ(4,"dl",10)(5,"dt",11),t._uU(6,"Price"),t.qZA(),t.TgZ(7,"dd",12),t._uU(8),t.ALo(9,"number"),t.ALo(10,"number"),t.TgZ(11,"span",13),t._uU(12),t.ALo(13,"number"),t.qZA()(),t.TgZ(14,"dt",11),t._uU(15,"Volume"),t.qZA(),t.TgZ(16,"dd",12),t._uU(17),t.qZA(),t.TgZ(18,"dt",11),t._uU(19,"Transport"),t.qZA(),t.TgZ(20,"dd",12),t._uU(21),t.qZA(),t.TgZ(22,"dt",11),t._uU(23,"Type"),t.qZA(),t.TgZ(24,"dd",12),t._uU(25),t.qZA(),t.TgZ(26,"dt",11),t._uU(27,"Illegal"),t.qZA(),t.TgZ(28,"dd",12),t.YNc(29,S,2,1,"ng-container",14),t.YNc(30,b,1,0,"ng-template",null,15,t.W1O),t.qZA()(),t.TgZ(32,"ul",16,17)(34,"li",18)(35,"a",19),t._uU(36,"Construction"),t.qZA(),t.YNc(37,Y,1,1,"ng-template",20),t.qZA(),t.TgZ(38,"li",21)(39,"a",19),t._uU(40,"Required For"),t.qZA(),t.YNc(41,K,25,6,"ng-template",20),t.qZA()(),t._UZ(42,"div",22),t.qZA()),2&i){const e=t.MAs(31),n=t.MAs(33),o=t.oxw(2);t.xp6(3),t.Oqu(o.entity.description),t.xp6(5),t.AsE(" ",t.lcZ(9,10,o.entity.price.min)," - ",t.lcZ(10,12,o.entity.price.max)," "),t.xp6(4),t.hij("(difference: ",t.lcZ(13,14,o.entity.price.max-o.entity.price.min)," )"),t.xp6(5),t.Oqu(o.entity.volume),t.xp6(4),t.Oqu(o.entity.transport),t.xp6(4),t.Oqu(o.entity.group.name),t.xp6(4),t.Q6J("ngIf",o.entity.illegal&&o.entity.illegal.length>0)("ngIfElse",e),t.xp6(13),t.Q6J("ngbNavOutlet",n)}}function H(i,a){if(1&i&&(t.TgZ(0,"div",3)(1,"div",4)(2,"a",5),t._uU(3,"Wares"),t.qZA(),t._uU(4),t.qZA(),t.YNc(5,X,43,16,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" - ",e.entity.name," "),t.xp6(1),t.Q6J("ngIf",e.entity)}}let G=(()=>{class i extends y.x{constructor(e,n,o,d,_){super(e,d),this.wareService=e,this.moduleService=n,this.shipService=o,this.titleService=_,this.waresUsedIn=[],this.modulesUsedIn=[],this.shipsUsedIn=[]}ngOnInit(){this.titleService.setTitle(`${m.q} - Wares`),super.ngOnInit()}onEntityLoaded(e){this.titleService.setTitle(`${m.q} - ${this.entity.name}`),this.entityProduction=this.entity.production.map(n=>({amount:n.amount,effects:n.effects,method:n.method,name:n.name,time:n.time,efficiency:null==n.effects?null:n.effects.find(o=>o.type==w.z.work),wares:n.wares.map(o=>({ware:this.service.getEntity(o.ware),amount:o.amount}))})),this.waresUsedIn=this.wareService.getWaresUsingWare(e.id),this.modulesUsedIn=this.moduleService.getModulesUsingWare(e.id),this.shipsUsedIn=this.shipService.getEntitiesUsingWare(this.entity.id)}getTotalMin(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.min}),n}getTotalMax(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.max}),n}getTotalAvg(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.avg}),n}getProductionTime(e){const n=Math.trunc(e/60),o=e-60*n;let d="";return n>0&&(d+=n+(1===n?" minute":" minutes")),o>0&&(n>0&&(d+=" "),d+=o+(1===o?" second":" seconds")),d}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.l),t.Y36(O.C),t.Y36(C.r),t.Y36(s.gz),t.Y36(v.Dx))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t.qOj],decls:3,vars:1,consts:[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/wares"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"form-group","row"],[1,"col","col-form-label","col-form-label-sm"],[1,"row"],[1,"col-sm-2"],[1,"col-sm-10"],[1,"text-success"],[4,"ngIf","ngIfElse"],["noIllegal",""],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","","title","Required For"],[3,"ngbNavOutlet"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"],["class","row mt-2 mb-2",4,"ngIf"],[1,"row","mt-2","mb-2"],["class","col-md-6 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-6","col-lg-4"],[1,"card","shadow-sm"],[1,"card-header","small"],[1,"card-body","small"],["class","row",4,"ngIf"],[1,"col"],[1,"table","table-sm"],[1,"text-right"],[1,"text-danger"],[1,"text-primary"],[1,"col-md-4","col-sm-12"],[1,"card","small"],[1,"card-header"],["class","col text-info",4,"ngIf"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],["class","col-md-6 col-sm-12",4,"ngFor","ngForOf"],[1,"col","text-info"],[1,"col-md-4","col-sm-6"],[1,"col-md-6","col-sm-12"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,H,6,2,"div",2),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",o.entity))},dependencies:[l.uN,l.Pz,l.nv,l.Is,l.Vx,l.tO,l.Dy,u.sg,u.O5,s.rH,u.JJ],encapsulation:2})}return i})(),k=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[s.Bz.forChild([{path:"",component:U},{path:":id",component:G}]),s.Bz]})}return i})(),tt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Oz,u.ez,x.u5,T.m,s.Bz,f.x,k]})}return i})()}}]);