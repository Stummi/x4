"use strict";(self.webpackChunkx4_new=self.webpackChunkx4_new||[]).push([[796],{9796:(R,m,a)=>{a.r(m),a.d(m,{ShipsModule:()=>$});var _=a(433),v=a(5398),d=a(2655),S=a(6157),x=a(5797),f=a(3040),A=a(9105),p=a(1814),g=a(617),t=a(1571),Z=a(7583),q=a(7179),h=a(1481),T=a(8782),s=a(4943);let y=(()=>{class i extends S.${constructor(e,n,o,l,u){super(e,o,l),this.raceService=n,this.titleService=u}ngOnInit(){this.titleService.setTitle(`${g.q} - Ships`),this.sizes=p.w.values(x.$),this.shipTypes=p.w.values(f.g),this.purposes=p.w.values(A.o),this.races=this.raceService.getEntities(),super.ngOnInit()}calculateWeapons(e){return e.weapons?e.weapons.length:0}calculateTurrets(e){return e.turrets?e.turrets.length:0}calculateShields(e){return e.shields?e.shields.filter(n=>!n.group).length:0}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(Z.r),t.Y36(q.G),t.Y36(d.F0),t.Y36(d.gz),t.Y36(h.Dx))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t.qOj],decls:26,vars:23,consts:function(){let e;return e=$localize`:@@stationModules: Ships `,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],e,[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","race.id","caption","Race"],["valueExpr","id","displayExpr","name",3,"dataSource"],["dataField","type","caption","Type"],[3,"dataSource"],["dataField","size","caption","Size"],["dataField","purpose","caption","Purpose"],["name","weapons","caption","Weapons","dataType","number",3,"allowSorting","allowFiltering","calculateCellValue"],["name","turrets","caption","Turrets","dataType","number",3,"allowSorting","allowFiltering","calculateCellValue"],["name","shields","caption","Shields","dataType","number",3,"allowSorting","allowFiltering","calculateCellValue"],["dataField","people","caption","People","dataType","number"],["column","name","summaryType","count"]]},template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.SDv(4,4),t.qZA(),t.TgZ(5,"div",5)(6,"dx-data-grid",6),t.NdJ("onCellClick",function(u){return o.onRowSelect(u)}),t._UZ(7,"dxo-pager",7)(8,"dxo-sorting",8)(9,"dxo-filter-row",9)(10,"dxo-filter-panel",10)(11,"dxi-column",11),t.TgZ(12,"dxi-column",12),t._UZ(13,"dxo-lookup",13),t.qZA(),t.TgZ(14,"dxi-column",14),t._UZ(15,"dxo-lookup",15),t.qZA(),t.TgZ(16,"dxi-column",16),t._UZ(17,"dxo-lookup",15),t.qZA(),t.TgZ(18,"dxi-column",17),t._UZ(19,"dxo-lookup",15),t.qZA(),t._UZ(20,"dxi-column",18)(21,"dxi-column",19)(22,"dxi-column",20)(23,"dxi-column",21),t.TgZ(24,"dxo-summary"),t._UZ(25,"dxi-total-item",22),t.qZA()()()()()()),2&n&&(t.xp6(6),t.Q6J("dataSource",o.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),t.xp6(1),t.Q6J("showPageSizeSelector",!0)("showNavigationButtons",!0),t.xp6(2),t.Q6J("applyFilter",o.currentFilter)("visible",!0),t.xp6(1),t.Q6J("visible",!0),t.xp6(3),t.Q6J("dataSource",o.races),t.xp6(2),t.Q6J("dataSource",o.shipTypes),t.xp6(2),t.Q6J("dataSource",o.sizes),t.xp6(2),t.Q6J("dataSource",o.purposes),t.xp6(1),t.Q6J("allowSorting",!0)("allowFiltering",!0)("calculateCellValue",o.calculateWeapons),t.xp6(1),t.Q6J("allowSorting",!0)("allowFiltering",!0)("calculateCellValue",o.calculateTurrets),t.xp6(1),t.Q6J("allowSorting",!0)("allowFiltering",!0)("calculateCellValue",o.calculateShields))},dependencies:[T.e,s.qvW,s.w3U,s.ecQ,s.I62,s.ilc,s.SWO,s.owF,s.DTS],encapsulation:2})}return i})();var w=a(9407),U=a(2459),c=a(6895);function O(i,r){if(1&i&&(t.TgZ(0,"div",17)(1,"label",18),t._uU(2),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(2),t.Oqu(e.entity.description)}}const C=function(i){return["/races",i]};function J(i,r){if(1&i&&(t.TgZ(0,"span")(1,"a",19),t._uU(2),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(2,C,e.entity.race.id)),t.xp6(1),t.Oqu(e.entity.race.name)}}function F(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1," - "),t.qZA())}const P=function(i){return["/factions/",i]};function N(i,r){if(1&i&&(t.TgZ(0,"li")(1,"a",19),t._uU(2),t.qZA()()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,P,e.id)),t.xp6(1),t.Oqu(e.name)}}const Q=function(i){return["/wares/",i]};function I(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.TgZ(3,"a",19),t._uU(4),t.qZA()(),t.TgZ(5,"td",29),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",29),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",29),t._uU(12),t.ALo(13,"number"),t.qZA()()),2&i){const e=r.$implicit;t.xp6(2),t.hij(" ",e.amount," x "),t.xp6(1),t.Q6J("routerLink",t.VKq(12,Q,e.ware.id)),t.xp6(1),t.Oqu(e.ware.name),t.xp6(2),t.Oqu(t.lcZ(7,6,e.amount*e.ware.price.min)),t.xp6(3),t.Oqu(t.lcZ(10,8,e.amount*e.ware.price.max)),t.xp6(3),t.Oqu(t.lcZ(13,10,e.amount*e.ware.price.avg))}}function M(i,r){if(1&i&&(t.TgZ(0,"div",9)(1,"div",27)(2,"h6"),t._uU(3,"Requirements"),t.qZA(),t.TgZ(4,"table",28)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Resource"),t.qZA(),t.TgZ(9,"th",29),t._uU(10,"Min"),t.qZA(),t.TgZ(11,"th",29),t._uU(12,"Max"),t.qZA(),t.TgZ(13,"th",29),t._uU(14,"Avg"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,I,14,14,"tr",15),t.qZA(),t.TgZ(17,"tfoot")(18,"tr")(19,"th",29),t._uU(20,"Total"),t.qZA(),t.TgZ(21,"th",29),t._uU(22),t.ALo(23,"number"),t.qZA(),t.TgZ(24,"th",29),t._uU(25),t.ALo(26,"number"),t.qZA(),t.TgZ(27,"th",29),t._uU(28),t.ALo(29,"number"),t.qZA()()()()()()),2&i){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(16),t.Q6J("ngForOf",e.wares),t.xp6(6),t.Oqu(t.lcZ(23,4,n.getTotalMin(e))),t.xp6(3),t.Oqu(t.lcZ(26,6,n.getTotalMax(e))),t.xp6(3),t.Oqu(t.lcZ(29,8,n.getTotalAvg(e)))}}function z(i,r){if(1&i&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",24),t._uU(3," Production: "),t.TgZ(4,"em"),t._uU(5),t.qZA()(),t.TgZ(6,"div",25),t.YNc(7,M,30,10,"div",26),t.TgZ(8,"div",9)(9,"div",27)(10,"h6"),t._uU(11,"Production"),t.qZA(),t.TgZ(12,"table",28)(13,"tbody")(14,"tr")(15,"td"),t._uU(16,"Time"),t.qZA(),t.TgZ(17,"td",29),t._uU(18),t.qZA()()()()()()()()()),2&i){const e=r.$implicit,n=t.oxw(4);t.xp6(5),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.wares.length),t.xp6(11),t.Oqu(n.getProductionTime(e.time))}}function E(i,r){if(1&i&&(t.TgZ(0,"div",20),t.YNc(1,z,19,3,"div",21),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.entityProduction)}}function b(i,r){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,O,3,1,"div",8),t.TgZ(2,"div",9)(3,"div",10)(4,"dl",9)(5,"dt",11),t._uU(6,"Race"),t.qZA(),t.TgZ(7,"dd",12),t.YNc(8,J,3,4,"span",13),t.YNc(9,F,2,0,"span",13),t.qZA(),t.TgZ(10,"dt",11),t._uU(11,"Type"),t.qZA(),t.TgZ(12,"dd",12)(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"dt",11),t._uU(16,"Size"),t.qZA(),t.TgZ(17,"dd",12),t._uU(18),t.qZA(),t.TgZ(19,"dt",11),t._uU(20,"Hull"),t.qZA(),t.TgZ(21,"dd",12),t._uU(22),t.ALo(23,"number"),t.qZA(),t.TgZ(24,"dt",11),t._uU(25,"Explosion Damage"),t.qZA(),t.TgZ(26,"dd",12)(27,"span"),t._uU(28),t.ALo(29,"number"),t.qZA()(),t.TgZ(30,"dt",11),t._uU(31,"Owners"),t.qZA(),t.TgZ(32,"dd",12)(33,"ul",14),t.YNc(34,N,3,4,"li",15),t.qZA()()()(),t.TgZ(35,"div",10)(36,"dl",9)(37,"dt",11),t._uU(38,"Missile Storage"),t.qZA(),t.TgZ(39,"dd",12),t._uU(40),t.ALo(41,"number"),t.qZA(),t.TgZ(42,"dt",11),t._uU(43,"Drone Storage"),t.qZA(),t.TgZ(44,"dd",12),t._uU(45),t.ALo(46,"number"),t.qZA(),t.TgZ(47,"dt",11),t._uU(48,"People"),t.qZA(),t.TgZ(49,"dd",12),t._uU(50),t.ALo(51,"number"),t.qZA(),t.TgZ(52,"dt",11),t._uU(53,"Purpose"),t.qZA(),t.TgZ(54,"dd",12),t._uU(55),t.qZA()()(),t.TgZ(56,"div",10)(57,"dl",9)(58,"dt",11),t._uU(59,"Engines"),t.qZA(),t.TgZ(60,"dd",12),t._uU(61),t.qZA(),t.TgZ(62,"dt",11),t._uU(63,"Docks"),t.qZA(),t.TgZ(64,"dd",12),t._uU(65),t.qZA(),t.TgZ(66,"dt",11),t._uU(67,"Weapons"),t.qZA(),t.TgZ(68,"dd",12),t._uU(69),t.qZA(),t.TgZ(70,"dt",11),t._uU(71,"Turrets"),t.qZA(),t.TgZ(72,"dd",12),t._uU(73),t.qZA(),t.TgZ(74,"dt",11),t._uU(75,"Main Shields"),t.qZA(),t.TgZ(76,"dd",12),t._uU(77),t.qZA(),t.TgZ(78,"dt",11),t._uU(79,"Additional Shields"),t.qZA(),t.TgZ(80,"dd",12),t._uU(81),t.qZA()()()(),t.YNc(82,E,2,1,"div",16),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","No information available"!=e.entity.description),t.xp6(7),t.Q6J("ngIf",e.entity.race),t.xp6(1),t.Q6J("ngIf",!e.entity.race),t.xp6(5),t.Oqu(e.entity.type||"-"),t.xp6(4),t.Oqu(e.entity.size),t.xp6(4),t.Oqu(t.lcZ(23,19,e.entity.hull)),t.xp6(6),t.Oqu(t.lcZ(29,21,e.entity.explosionDamage)||"-"),t.xp6(6),t.Q6J("ngForOf",e.entity.owners),t.xp6(6),t.Oqu(null!=e.entity.storage&&e.entity.storage.missile?t.lcZ(41,23,null==e.entity.storage?null:e.entity.storage.missile):"-"),t.xp6(5),t.Oqu(null!=e.entity.storage&&e.entity.storage.unit?t.lcZ(46,25,null==e.entity.storage?null:e.entity.storage.unit):"-"),t.xp6(5),t.Oqu(t.lcZ(51,27,e.entity.people)||"-"),t.xp6(5),t.Oqu(e.entity.purpose),t.xp6(6),t.Oqu(e.getSlotsStr(e.entity.engines)),t.xp6(4),t.Oqu(e.getSlotsStr(e.entity.docks)),t.xp6(4),t.Oqu(e.getSlotsStr(e.entity.weapons)),t.xp6(4),t.Oqu(e.getSlotsStr(e.entity.turrets)),t.xp6(4),t.Oqu(e.getSlotsStr(e.mainShields)),t.xp6(4),t.Oqu(e.getSlotsStr(e.additionalShields)),t.xp6(1),t.Q6J("ngIf",e.entityProduction&&e.entityProduction.length)}}function D(i,r){if(1&i&&(t.TgZ(0,"div",3)(1,"div",4)(2,"a",5),t._uU(3,"Ships"),t.qZA(),t._uU(4),t.qZA(),t.YNc(5,b,83,29,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" - ",e.entity.name," "),t.xp6(1),t.Q6J("ngIf",e.entity)}}let L=(()=>{class i extends w.x{constructor(e,n,o,l){super(n,o),this.wareService=e,this.titleService=l}ngOnInit(){this.titleService.setTitle(`${g.q} - Ships`),super.ngOnInit()}onEntityLoaded(e){this.titleService.setTitle(`${g.q} - ${e.name}`),this.entityProduction=e.production.map(n=>({amount:n.amount,effects:n.effects,method:n.method,name:n.name,time:n.time,wares:n.wares.map(o=>({ware:this.wareService.getEntity(o.ware),amount:o.amount}))}))}getTotalMin(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.min}),n}getTotalMax(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.max}),n}getTotalAvg(e){let n=0;return e.wares.forEach(o=>{n+=o.amount*o.ware.price.avg}),n}getProductionTime(e){const n=Math.trunc(e/60),o=e-60*n;let l="";return n>0&&(l+=n+(1===n?" minute":" minutes")),o>0&&(n>0&&(l+=" "),l+=o+(1===o?" second":" seconds")),l}get mainShields(){return this.entity.shields?this.entity.shields.filter(e=>!e.group):[]}get additionalShields(){return this.entity.shields?this.entity.shields.filter(e=>e.group):[]}getSlotsStr(e){const n=this.getSlots(e);return 0==n.length?"-":n.map(o=>`${o.capacity} x ${o.size}`).join(", ")}getSlots(e){if(!e)return[];const n=e.reduce((l,u)=>(l[u.size]=l[u.size]||0,l[u.size]+=u.capacity||1,l),{}),o=[];return Object.keys(n).forEach(l=>{o.push({size:l,capacity:n[l]})}),o}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(U.l),t.Y36(Z.r),t.Y36(d.gz),t.Y36(h.Dx))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t.qOj],decls:3,vars:1,consts:[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/ships"],["class","card-body small",4,"ngIf"],[1,"card-body","small"],["class","form-group row",4,"ngIf"],[1,"row"],[1,"col-md-4","col-sm-12"],[1,"col-5"],[1,"col-7"],[4,"ngIf"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],["class","row mt-2 mb-2",4,"ngIf"],[1,"form-group","row"],[1,"col","col-form-label","col-form-label-sm"],[3,"routerLink"],[1,"row","mt-2","mb-2"],["class","col-md-6 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-6","col-lg-4"],[1,"card","shadow-sm"],[1,"card-header"],[1,"card-body"],["class","row",4,"ngIf"],[1,"col"],[1,"table","table-sm"],[1,"text-right"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,D,6,2,"div",2),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",o.entity))},dependencies:[c.sg,c.O5,d.rH,c.JJ],encapsulation:2})}return i})(),Y=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[d.Bz.forChild([{path:"",component:y},{path:":id",component:L}]),d.Bz]})}return i})(),$=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.ez,_.u5,v.m,T.x,Y]})}return i})()}}]);