"use strict";(self.webpackChunkx4_new=self.webpackChunkx4_new||[]).push([[652],{2652:(O,m,a)=>{a.r(m),a.d(m,{EquipmentModule:()=>Q});var p=a(6895),f=a(433),E=a(5398),l=a(2655),S=a(6157),T=a(5797),w=a(1251),C=a(302),d=a(1814),u=a(617),t=a(1571),v=a(2251),x=a(7179),h=a(1481),g=a(8782),r=a(4943);let y=(()=>{class o extends S.${constructor(n,e,i,s,c){super(n,i,s),this.raceService=e,this.titleService=c}ngOnInit(){this.titleService.setTitle(`${u.q} - Equipment`),this.sizes=d.w.values(T.$),this.equipmentTypes=d.w.values(w.Q),this.equipmentClasses=d.w.values(C.Z),this.races=this.raceService.getEntities(),super.ngOnInit()}onRowSelect(n){return"data"==n.rowType?this.router.navigate([n.row.data.id],{relativeTo:this.route}):null}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(v.Q),t.Y36(x.G),t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.Dx))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:22,vars:14,consts:function(){let n;return n=$localize`:@@equipment: Equipment `,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],n,[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","size","caption","Size"],[3,"dataSource"],["dataField","race.id","caption","Race"],["valueExpr","id","displayExpr","name",3,"dataSource"],["dataField","type","caption","Type"],["dataField","equipmentClass","caption","Class"],["column","name","summaryType","count"]]},template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.SDv(4,4),t.qZA(),t.TgZ(5,"div",5)(6,"dx-data-grid",6),t.NdJ("onCellClick",function(c){return i.onRowSelect(c)}),t._UZ(7,"dxo-pager",7)(8,"dxo-sorting",8)(9,"dxo-filter-row",9)(10,"dxo-filter-panel",10)(11,"dxi-column",11),t.TgZ(12,"dxi-column",12),t._UZ(13,"dxo-lookup",13),t.qZA(),t.TgZ(14,"dxi-column",14),t._UZ(15,"dxo-lookup",15),t.qZA(),t.TgZ(16,"dxi-column",16),t._UZ(17,"dxo-lookup",13),t.qZA(),t.TgZ(18,"dxi-column",17),t._UZ(19,"dxo-lookup",13),t.qZA(),t.TgZ(20,"dxo-summary"),t._UZ(21,"dxi-total-item",18),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Q6J("dataSource",i.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),t.xp6(1),t.Q6J("showPageSizeSelector",!0)("showNavigationButtons",!0),t.xp6(2),t.Q6J("applyFilter",i.currentFilter)("visible",!0),t.xp6(1),t.Q6J("visible",!0),t.xp6(3),t.Q6J("dataSource",i.sizes),t.xp6(2),t.Q6J("dataSource",i.races),t.xp6(2),t.Q6J("dataSource",i.equipmentTypes),t.xp6(2),t.Q6J("dataSource",i.equipmentClasses))},dependencies:[g.e,r.qvW,r.w3U,r.ecQ,r.I62,r.ilc,r.SWO,r.owF,r.DTS],encapsulation:2})}return o})();var Z=a(9407),q=a(2459);function M(o,P){if(1&o&&(t.TgZ(0,"div",3)(1,"div",4)(2,"a",5),t._uU(3,"Equipment"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",6),t._uU(6," Coming soon "),t.qZA()()),2&o){const n=t.oxw();t.xp6(4),t.hij(" - ",n.entity.name," ")}}let N=(()=>{class o extends Z.x{constructor(n,e,i,s){super(n,i),this.wareService=e,this.titleService=s}ngOnInit(){this.titleService.setTitle(`${u.q} - Equipment`),super.ngOnInit()}onEntityLoaded(n){this.titleService.setTitle(`${u.q} - ${n.name}`),this.entityProduction=n.production.map(e=>({amount:e.amount,effects:e.effects,method:e.method,name:e.name,time:e.time,wares:e.wares.map(i=>({ware:this.wareService.getEntity(i.ware),amount:i.amount}))}))}getTotalMin(n){let e=0;return n.wares.forEach(i=>{e+=i.amount*i.ware.price.min}),e}getTotalMax(n){let e=0;return n.wares.forEach(i=>{e+=i.amount*i.ware.price.max}),e}getTotalAvg(n){let e=0;return n.wares.forEach(i=>{e+=i.amount*i.ware.price.avg}),e}getProductionTime(n){const e=Math.trunc(n/60),i=n-60*e;let s="";return e>0&&(s+=e+(1===e?" minute":" minutes")),i>0&&(e>0&&(s+=" "),s+=i+(1===i?" second":" seconds")),s}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(v.Q),t.Y36(q.l),t.Y36(l.gz),t.Y36(h.Dx))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:3,vars:1,consts:[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/races"],[1,"card-body","small"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,M,7,1,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.entity))},dependencies:[p.O5,l.rH],encapsulation:2})}return o})(),A=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild([{path:"",component:y},{path:":id",component:N}]),l.Bz]})}return o})(),Q=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[p.ez,f.u5,E.m,A,g.x]})}return o})()}}]);