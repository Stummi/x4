(self.webpackChunkx4_new=self.webpackChunkx4_new||[]).push([[219],{5219:(he,te,R)=>{"use strict";R.r(te),R.d(te,{StationModule:()=>Fr});var e=R(1571),O=R(6895);function N(r){return null!=r&&"false"!=`${r}`}function F(r,i=0){return function g(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):i}function U(r){return r instanceof e.SBq?r.nativeElement:r}var L=R(7579),G=R(9646),K=R(9751),B=R(4968),Y=R(4408),z=R(727);const q={schedule(r){let i=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=q;n&&(i=n.requestAnimationFrame,t=n.cancelAnimationFrame);const o=i(l=>{t=void 0,r(l)});return new z.w0(()=>t?.(o))},requestAnimationFrame(...r){const{delegate:i}=q;return(i?.requestAnimationFrame||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:i}=q;return(i?.cancelAnimationFrame||cancelAnimationFrame)(...r)},delegate:void 0};var E=R(640);const h=new class k extends E.v{flush(i){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let o;i=i||n.shift();do{if(o=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===t&&n.shift());if(this._active=!1,o){for(;(i=n[0])&&i.id===t&&n.shift();)i.unsubscribe();throw o}}}(class oe extends Y.o{constructor(i,t){super(i,t),this.scheduler=i,this.work=t}requestAsyncId(i,t,n=0){return null!==n&&n>0?super.requestAsyncId(i,t,n):(i.actions.push(this),i._scheduled||(i._scheduled=q.requestAnimationFrame(()=>i.flush(void 0))))}recycleAsyncId(i,t,n=0){var o;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(i,t,n);const{actions:l}=i;null!=t&&(null===(o=l[l.length-1])||void 0===o?void 0:o.id)!==t&&(q.cancelAnimationFrame(t),i._scheduled=void 0)}});let P,v=1;const $={};function T(r){return r in $&&(delete $[r],!0)}const j={setImmediate(r){const i=v++;return $[i]=!0,P||(P=Promise.resolve()),P.then(()=>T(i)&&r()),i},clearImmediate(r){T(r)}},{setImmediate:_e,clearImmediate:Me}=j,Ee={setImmediate(...r){const{delegate:i}=Ee;return(i?.setImmediate||_e)(...r)},clearImmediate(r){const{delegate:i}=Ee;return(i?.clearImmediate||Me)(r)},delegate:void 0};new class De extends E.v{flush(i){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let o;i=i||n.shift();do{if(o=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===t&&n.shift());if(this._active=!1,o){for(;(i=n[0])&&i.id===t&&n.shift();)i.unsubscribe();throw o}}}(class Oe extends Y.o{constructor(i,t){super(i,t),this.scheduler=i,this.work=t}requestAsyncId(i,t,n=0){return null!==n&&n>0?super.requestAsyncId(i,t,n):(i.actions.push(this),i._scheduled||(i._scheduled=Ee.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,t,n=0){var o;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(i,t,n);const{actions:l}=i;null!=t&&(null===(o=l[l.length-1])||void 0===o?void 0:o.id)!==t&&(Ee.clearImmediate(t),i._scheduled=void 0)}});var we=R(4986),Re=R(4482),se=R(8421),pe=R(5403),be=R(5963);function xe(r,i=we.z){return function ke(r){return(0,Re.e)((i,t)=>{let n=!1,o=null,l=null,p=!1;const S=()=>{if(l?.unsubscribe(),l=null,n){n=!1;const b=o;o=null,t.next(b)}p&&t.complete()},M=()=>{l=null,p&&t.complete()};i.subscribe((0,pe.x)(t,b=>{n=!0,o=b,l||(0,se.Xf)(r(b)).subscribe(l=(0,pe.x)(t,S,M))},()=>{p=!0,(!n||!l||l.closed)&&t.complete()}))})}(()=>(0,be.H)(r,i))}var $e=R(9300);let _;try{_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_=!1}let X,y,c=(()=>{class r{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,O.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.Lbi))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ge(r){return function me(){if(null==X&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>X=!0}))}finally{X=X||!1}return X}()?r:!!r.capture}function x(r){if(function w(){if(null==y){const r=typeof document<"u"?document.head:null;y=!(!r||!r.createShadowRoot&&!r.attachShadow)}return y}()){const i=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function ie(r){return r.composedPath?r.composedPath()[0]:r.target}let gn=(()=>{class r{constructor(t,n,o){this._ngZone=t,this._platform=n,this._scrolled=new L.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new K.y(n=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe(xe(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,G.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const o=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe((0,$e.h)(l=>!l||o.indexOf(l)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((o,l)=>{this._scrollableContainsElement(l,t)&&n.push(l)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let o=U(n),l=t.getElementRef().nativeElement;do{if(o==l)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,B.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.R0b),e.LFG(c),e.LFG(O.K0,8))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Sn=(()=>{class r{constructor(t,n,o){this._platform=t,this._change=new L.x,this._changeListener=l=>{this._change.next(l)},this._document=o,n.runOutsideAngular(()=>{if(t.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),o=t.documentElement,l=o.getBoundingClientRect();return{top:-l.top||t.body.scrollTop||n.scrollY||o.scrollTop||0,left:-l.left||t.body.scrollLeft||n.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(xe(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(c),e.LFG(e.R0b),e.LFG(O.K0,8))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Cn=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})();var lt=R(6451),Ve=R(2722),ct=R(8675),Ln=R(4004),wt=R(5698),Un=R(8505),Zn=R(3900);const Bn=new e.OlP("cdk-dir-doc",{providedIn:"root",factory:function $n(){return(0,e.f3M)(O.K0)}}),Yn=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let bt=(()=>{class r{constructor(t){this.value="ltr",this.change=new e.vpe,t&&(this.value=function Vn(r){const i=r?.toLowerCase()||"";return"auto"===i&&typeof navigator<"u"&&navigator?.language?Yn.test(navigator.language)?"rtl":"ltr":"rtl"===i?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Bn,8))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ut(r,i,t){for(let n in i)if(i.hasOwnProperty(n)){const o=i[n];o?r.setProperty(n,o,t?.has(n)?"important":""):r.removeProperty(n)}return r}function Fe(r,i){const t=i?"":"none";ut(r.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function xt(r,i,t){ut(r.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},t)}function Qe(r,i){return i&&"none"!=i?r+" "+i:r}function Rt(r){const i=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*i}function dt(r,i){return r.getPropertyValue(i).split(",").map(n=>n.trim())}function _t(r){const i=r.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ht(r,i,t){const{top:n,bottom:o,left:l,right:p}=r;return t>=n&&t<=o&&i>=l&&i<=p}function Ge(r,i,t){r.top+=i,r.bottom=r.top+r.height,r.left+=t,r.right=r.left+r.width}function Pt(r,i,t,n){const{top:o,right:l,bottom:p,left:S,width:M,height:b}=r,V=M*i,ee=b*i;return n>o-ee&&n<p+ee&&t>S-V&&t<l+V}class Dt{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:_t(t)})})}handleScroll(i){const t=ie(i),n=this.positions.get(t);if(!n)return null;const o=n.scrollPosition;let l,p;if(t===this._document){const b=this.getViewportScrollPosition();l=b.top,p=b.left}else l=t.scrollTop,p=t.scrollLeft;const S=o.top-l,M=o.left-p;return this.positions.forEach((b,V)=>{b.clientRect&&t!==V&&t.contains(V)&&Ge(b.clientRect,S,M)}),o.top=l,o.left=p,{top:S,left:M}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function kt(r){const i=r.cloneNode(!0),t=i.querySelectorAll("[id]"),n=r.nodeName.toLowerCase();i.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return"canvas"===n?Ut(r,i):("input"===n||"select"===n||"textarea"===n)&&Lt(r,i),Ft("canvas",r,i,Ut),Ft("input, textarea, select",r,i,Lt),i}function Ft(r,i,t,n){const o=i.querySelectorAll(r);if(o.length){const l=t.querySelectorAll(r);for(let p=0;p<o.length;p++)n(o[p],l[p])}}let zn=0;function Lt(r,i){"file"!==i.type&&(i.value=r.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${zn++}`)}function Ut(r,i){const t=i.getContext("2d");if(t)try{t.drawImage(r,0,0)}catch{}}const Zt=ge({passive:!0}),et=ge({passive:!1}),ft=new Set(["position"]);class jn{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const t=N(i);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>Fe(n,t)))}constructor(i,t,n,o,l,p){this._config=t,this._document=n,this._ngZone=o,this._viewportRuler=l,this._dragDropRegistry=p,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new L.x,this._pointerMoveSubscription=z.w0.EMPTY,this._pointerUpSubscription=z.w0.EMPTY,this._scrollSubscription=z.w0.EMPTY,this._resizeSubscription=z.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new L.x,this.started=new L.x,this.released=new L.x,this.ended=new L.x,this.entered=new L.x,this.exited=new L.x,this.dropped=new L.x,this.moved=this._moveEvents,this._pointerDown=S=>{if(this.beforeStarted.next(),this._handles.length){const M=this._getTargetHandle(S);M&&!this._disabledHandles.has(M)&&!this.disabled&&this._initializeDragSequence(M,S)}else this.disabled||this._initializeDragSequence(this._rootElement,S)},this._pointerMove=S=>{const M=this._getPointerPositionOnPage(S);if(!this._hasStartedDragging){if(Math.abs(M.x-this._pickupPositionOnPage.x)+Math.abs(M.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const ve=Date.now()>=this._dragStartTime+this._getDragStartDelay(S),Te=this._dropContainer;if(!ve)return void this._endDragSequence(S);(!Te||!Te.isDragging()&&!Te.isReceiving())&&(S.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(S)))}return}S.preventDefault();const b=this._getConstrainedPointerPosition(M);if(this._hasMoved=!0,this._lastKnownPointerPosition=M,this._updatePointerDirectionDelta(b),this._dropContainer)this._updateActiveDropContainer(b,M);else{const V=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,ee=this._activeTransform;ee.x=b.x-V.x+this._passiveTransform.x,ee.y=b.y-V.y+this._passiveTransform.y,this._applyRootElementTransform(ee.x,ee.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:b,event:S,distance:this._getDragDistance(b),delta:this._pointerDirectionDelta})})},this._pointerUp=S=>{this._endDragSequence(S)},this._nativeDragStart=S=>{if(this._handles.length){const M=this._getTargetHandle(S);M&&!this._disabledHandles.has(M)&&!this.disabled&&S.preventDefault()}else this.disabled||S.preventDefault()},this.withRootElement(i).withParent(t.parentDragRef||null),this._parentPositions=new Dt(n),p.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(n=>U(n)),this._handles.forEach(n=>Fe(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const t=U(i);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,et),t.addEventListener("touchstart",this._pointerDown,Zt),t.addEventListener("dragstart",this._nativeDragStart,et)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?U(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),Fe(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),Fe(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){ze(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,o=n.parentNode,l=this._placeholder=this._createPlaceholderElement(),p=this._anchor=this._anchor||this._document.createComment(""),S=this._getShadowRoot();o.insertBefore(p,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),xt(n,!1,ft),this._document.body.appendChild(o.replaceChild(l,n)),this._getPreviewInsertionPoint(o,S).appendChild(this._preview),this.started.next({source:this,event:i}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(i,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),o=ze(t),l=!o&&0!==t.button,p=this._rootElement,S=ie(t),M=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),b=o?function Dn(r){const i=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}(t):function Pn(r){return 0===r.buttons||0===r.offsetX&&0===r.offsetY}(t);if(S&&S.draggable&&"mousedown"===t.type&&t.preventDefault(),n||l||M||b)return;if(this._handles.length){const ue=p.style;this._rootElementTapHighlight=ue.webkitTapHighlightColor||"",ue.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(ue=>this._updateOnScroll(ue)),this._boundaryElement&&(this._boundaryRect=_t(this._boundaryElement));const V=this._previewTemplate;this._pickupPositionInElement=V&&V.template&&!V.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,i,t);const ee=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:ee.x,y:ee.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(i){xt(this._rootElement,!0,ft),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),o=this._getPointerPositionOnPage(i),l=this._getDragDistance(o),p=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:l,dropPoint:o,event:i}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:p,distance:l,dropPoint:o,event:i}),t.drop(this,n,this._initialIndex,this._initialContainer,p,l,o,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:t},{x:n,y:o}){let l=this._initialContainer._getSiblingContainerFromPosition(this,i,t);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,t)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,i,t,l===this._initialContainer&&l.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,i,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,t):this._applyPreviewTransform(i-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const i=this._previewTemplate,t=this.previewClass,n=i?i.template:null;let o;if(n&&i){const l=i.matchSize?this._initialClientRect:null,p=i.viewContainer.createEmbeddedView(n,i.context);p.detectChanges(),o=$t(p,this._document),this._previewRef=p,i.matchSize?Yt(o,l):o.style.transform=tt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=kt(this._rootElement),Yt(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return ut(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ft),Fe(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(l=>o.classList.add(l)):o.classList.add(t)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const t=function Gn(r){const i=getComputedStyle(r),t=dt(i,"transition-property"),n=t.find(S=>"transform"===S||"all"===S);if(!n)return 0;const o=t.indexOf(n),l=dt(i,"transition-duration"),p=dt(i,"transition-delay");return Rt(l[o])+Rt(p[o])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const o=p=>{(!p||ie(p)===this._preview&&"transform"===p.propertyName)&&(this._preview?.removeEventListener("transitionend",o),n(),clearTimeout(l))},l=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,t=i?i.template:null;let n;return t?(this._placeholderRef=i.viewContainer.createEmbeddedView(t,i.context),this._placeholderRef.detectChanges(),n=$t(this._placeholderRef,this._document)):n=kt(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(i,t,n){const o=t===this._rootElement?null:t,l=o?o.getBoundingClientRect():i,p=ze(n)?n.targetTouches[0]:n,S=this._getViewportScrollPosition();return{x:l.left-i.left+(p.pageX-l.left-S.left),y:l.top-i.top+(p.pageY-l.top-S.top)}}_getPointerPositionOnPage(i){const t=this._getViewportScrollPosition(),n=ze(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,o=n.pageX-t.left,l=n.pageY-t.top;if(this._ownerSVGElement){const p=this._ownerSVGElement.getScreenCTM();if(p){const S=this._ownerSVGElement.createSVGPoint();return S.x=o,S.y=l,S.matrixTransform(p.inverse())}}return{x:o,y:l}}_getConstrainedPointerPosition(i){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:o}=this.constrainPosition?this.constrainPosition(i,this,this._initialClientRect,this._pickupPositionInElement):i;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:l,y:p}=this._pickupPositionInElement,S=this._boundaryRect,{width:M,height:b}=this._getPreviewRect(),V=S.top+p,ee=S.bottom-(b-p);n=Bt(n,S.left+l,S.right-(M-l)),o=Bt(o,V,ee)}return{x:n,y:o}}_updatePointerDirectionDelta(i){const{x:t,y:n}=i,o=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,p=Math.abs(t-l.x),S=Math.abs(n-l.y);return p>this._config.pointerDirectionChangeThreshold&&(o.x=t>l.x?1:-1,l.x=t),S>this._config.pointerDirectionChangeThreshold&&(o.y=n>l.y?1:-1,l.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,Fe(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,et),i.removeEventListener("touchstart",this._pointerDown,Zt),i.removeEventListener("dragstart",this._nativeDragStart,et)}_applyRootElementTransform(i,t){const n=tt(i,t),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=Qe(n,this._initialTransform)}_applyPreviewTransform(i,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,o=tt(i,t);this._preview.style.transform=Qe(o,n)}_getDragDistance(i){const t=this._pickupPositionOnPage;return t?{x:i.x-t.x,y:i.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:t}=this._passiveTransform;if(0===i&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===n.width&&0===n.height)return;const l=o.left-n.left,p=n.right-o.right,S=o.top-n.top,M=n.bottom-o.bottom;o.width>n.width?(l>0&&(i+=l),p>0&&(i-=p)):i=0,o.height>n.height?(S>0&&(t+=S),M>0&&(t-=M)):t=0,(i!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:i})}_getDragStartDelay(i){const t=this.dragStartDelay;return"number"==typeof t?t:ze(i)?t.touch:t?t.mouse:0}_updateOnScroll(i){const t=this._parentPositions.handleScroll(i);if(t){const n=ie(i);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Ge(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=x(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,t){const n=this._previewContainer||"global";if("parent"===n)return i;if("global"===n){const o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return U(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(i){return this._handles.find(t=>i.target&&(i.target===t||t.contains(i.target)))}}function tt(r,i){return`translate3d(${Math.round(r)}px, ${Math.round(i)}px, 0)`}function Bt(r,i,t){return Math.max(i,Math.min(t,r))}function ze(r){return"t"===r.type[0]}function $t(r,i){const t=r.rootNodes;if(1===t.length&&t[0].nodeType===i.ELEMENT_NODE)return t[0];const n=i.createElement("div");return t.forEach(o=>n.appendChild(o)),n}function Yt(r,i){r.style.width=`${i.width}px`,r.style.height=`${i.height}px`,r.style.transform=tt(i.left,i.top)}function Vt(r,i,t){const n=He(i,r.length-1),o=He(t,r.length-1);if(n===o)return;const l=r[n],p=o<n?-1:1;for(let S=n;S!==o;S+=p)r[S]=r[S+p];r[o]=l}function He(r,i){return Math.max(0,Math.min(i,r))}class Kn{constructor(i,t){this._element=i,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(i){this.withItems(i)}sort(i,t,n,o){const l=this._itemPositions,p=this._getItemIndexFromPointerPosition(i,t,n,o);if(-1===p&&l.length>0)return null;const S="horizontal"===this.orientation,M=l.findIndex(ye=>ye.drag===i),b=l[p],ee=b.clientRect,ue=M>p?1:-1,ve=this._getItemOffsetPx(l[M].clientRect,ee,ue),Te=this._getSiblingOffsetPx(M,l,ue),Ie=l.slice();return Vt(l,M,p),l.forEach((ye,ot)=>{if(Ie[ot]===ye)return;const We=ye.drag===i,Be=We?ve:Te,Je=We?i.getPlaceholderElement():ye.drag.getRootElement();ye.offset+=Be,S?(Je.style.transform=Qe(`translate3d(${Math.round(ye.offset)}px, 0, 0)`,ye.initialTransform),Ge(ye.clientRect,0,Be)):(Je.style.transform=Qe(`translate3d(0, ${Math.round(ye.offset)}px, 0)`,ye.initialTransform),Ge(ye.clientRect,Be,0))}),this._previousSwap.overlaps=ht(ee,t,n),this._previousSwap.drag=b.drag,this._previousSwap.delta=S?o.x:o.y,{previousIndex:M,currentIndex:p}}enter(i,t,n,o){const l=null==o||o<0?this._getItemIndexFromPointerPosition(i,t,n):o,p=this._activeDraggables,S=p.indexOf(i),M=i.getPlaceholderElement();let b=p[l];if(b===i&&(b=p[l+1]),!b&&(null==l||-1===l||l<p.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(b=p[0]),S>-1&&p.splice(S,1),b&&!this._dragDropRegistry.isDragging(b)){const V=b.getRootElement();V.parentElement.insertBefore(M,V),p.splice(l,0,i)}else U(this._element).appendChild(M),p.push(i);M.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables.forEach(i=>{const t=i.getRootElement();if(t){const n=this._itemPositions.find(o=>o.drag===i)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===i)}updateOnScroll(i,t){this._itemPositions.forEach(({clientRect:n})=>{Ge(n,i,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const i="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:_t(n)}}).sort((t,n)=>i?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(i,t,n){const o="horizontal"===this.orientation;let l=o?t.left-i.left:t.top-i.top;return-1===n&&(l+=o?t.width-i.width:t.height-i.height),l}_getSiblingOffsetPx(i,t,n){const o="horizontal"===this.orientation,l=t[i].clientRect,p=t[i+-1*n];let S=l[o?"width":"height"]*n;if(p){const M=o?"left":"top",b=o?"right":"bottom";-1===n?S-=p.clientRect[M]-l[b]:S+=l[M]-p.clientRect[b]}return S}_shouldEnterAsFirstChild(i,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,o="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const p=n[n.length-1].clientRect;return o?i>=p.right:t>=p.bottom}{const p=n[0].clientRect;return o?i<=p.left:t<=p.top}}_getItemIndexFromPointerPosition(i,t,n,o){const l="horizontal"===this.orientation,p=this._itemPositions.findIndex(({drag:S,clientRect:M})=>S!==i&&((!o||S!==this._previousSwap.drag||!this._previousSwap.overlaps||(l?o.x:o.y)!==this._previousSwap.delta)&&(l?t>=Math.floor(M.left)&&t<Math.floor(M.right):n>=Math.floor(M.top)&&n<Math.floor(M.bottom))));return-1!==p&&this._sortPredicate(p,i)?p:-1}}const zt=.05;class qn{constructor(i,t,n,o,l){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=l,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new L.x,this.entered=new L.x,this.exited=new L.x,this.dropped=new L.x,this.sorted=new L.x,this.receivingStarted=new L.x,this.receivingStopped=new L.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=z.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new L.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Fn(r=0,i=we.z){return r<0&&(r=0),(0,be.H)(r,r,i)}(0,h).pipe((0,Ve.R)(this._stopScrollTimers)).subscribe(()=>{const p=this._scrollNode,S=this.autoScrollStep;1===this._verticalScrollDirection?p.scrollBy(0,-S):2===this._verticalScrollDirection&&p.scrollBy(0,S),1===this._horizontalScrollDirection?p.scrollBy(-S,0):2===this._horizontalScrollDirection&&p.scrollBy(S,0)})},this.element=U(i),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Dt(n),this._sortStrategy=new Kn(this.element,t),this._sortStrategy.withSortPredicate((p,S)=>this.sortPredicate(p,S,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,t,n,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(i)),this._sortStrategy.enter(i,t,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,t,n,o,l,p,S,M={}){this._reset(),this.dropped.next({item:i,currentIndex:t,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:l,distance:p,dropPoint:S,event:M})}withItems(i){const t=this._draggables;return this._draggables=i,i.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>-1===i.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._sortStrategy.direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._sortStrategy.orientation=i,this}withScrollableParents(i){const t=U(this.element);return this._scrollableElements=-1===i.indexOf(t)?[t,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,t,n,o){if(this.sortingDisabled||!this._clientRect||!Pt(this._clientRect,.05,t,n))return;const l=this._sortStrategy.sort(i,t,n,o);l&&this.sorted.next({previousIndex:l.previousIndex,currentIndex:l.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,t){if(this.autoScrollDisabled)return;let n,o=0,l=0;if(this._parentPositions.positions.forEach((p,S)=>{S===this._document||!p.clientRect||n||Pt(p.clientRect,.05,i,t)&&([o,l]=function Wn(r,i,t,n){const o=Ht(i,n),l=jt(i,t);let p=0,S=0;if(o){const M=r.scrollTop;1===o?M>0&&(p=1):r.scrollHeight-M>r.clientHeight&&(p=2)}if(l){const M=r.scrollLeft;1===l?M>0&&(S=1):r.scrollWidth-M>r.clientWidth&&(S=2)}return[p,S]}(S,p.clientRect,i,t),(o||l)&&(n=S))}),!o&&!l){const{width:p,height:S}=this._viewportRuler.getViewportSize(),M={width:p,height:S,top:0,right:p,bottom:S,left:0};o=Ht(M,t),l=jt(M,i),n=window}n&&(o!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=l,this._scrollNode=n,(o||l)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=U(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=U(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_reset(){this._isDragging=!1;const i=U(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(i,t){return null!=this._clientRect&&ht(this._clientRect,i,t)}_getSiblingContainerFromPosition(i,t,n){return this._siblings.find(o=>o._canReceive(i,t,n))}_canReceive(i,t,n){if(!this._clientRect||!ht(this._clientRect,t,n)||!this.enterPredicate(i,this))return!1;const o=this._getShadowRoot().elementFromPoint(t,n);if(!o)return!1;const l=U(this.element);return o===l||l.contains(o)}_startReceiving(i,t){const n=this._activeSiblings;!n.has(i)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:t}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(i);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=x(U(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,i))}}function Ht(r,i){const{top:t,bottom:n,height:o}=r,l=o*zt;return i>=t-l&&i<=t+l?1:i>=n-l&&i<=n+l?2:0}function jt(r,i){const{left:t,right:n,width:o}=r,l=o*zt;return i>=t-l&&i<=t+l?1:i>=n-l&&i<=n+l?2:0}const nt=ge({passive:!1,capture:!0});let Jn=(()=>{class r{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new L.x,this.pointerUp=new L.x,this.scroll=new L.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,nt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,nt)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:l=>this.pointerUp.next(l),options:!0}).set("scroll",{handler:l=>this.scroll.next(l),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nt}),o||this._globalListeners.set("mousemove",{handler:l=>this.pointerMove.next(l),options:nt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((l,p)=>{this._document.addEventListener(p,l.handler,l.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new K.y(o=>this._ngZone.runOutsideAngular(()=>{const p=S=>{this._activeDragInstances.length&&o.next(S)};return t.addEventListener("scroll",p,!0),()=>{t.removeEventListener("scroll",p,!0)}}))),(0,lt.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.R0b),e.LFG(O.K0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Xn={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pt=(()=>{class r{constructor(t,n,o,l){this._document=t,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=l}createDrag(t,n=Xn){return new jn(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new qn(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(O.K0),e.LFG(e.R0b),e.LFG(Sn),e.LFG(Jn))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const mt=new e.OlP("CDK_DRAG_PARENT"),gt=new e.OlP("CdkDropListGroup"),Kt=new e.OlP("CDK_DRAG_CONFIG");let ei=0;const qt=new e.OlP("CdkDropList");let Wt=(()=>{class r{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=N(t)}constructor(t,n,o,l,p,S,M){this.element=t,this._changeDetectorRef=o,this._scrollDispatcher=l,this._dir=p,this._group=S,this._destroyed=new L.x,this.connectedTo=[],this.id="cdk-drop-list-"+ei++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.sorted=new e.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,M&&this._assignDefaults(M),this._dropListRef.enterPredicate=(b,V)=>this.enterPredicate(b.data,V.data),this._dropListRef.sortPredicate=(b,V,ee)=>this.sortPredicate(b,V.data,ee.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),S&&S._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=r._dropLists.indexOf(this);t>-1&&r._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,ct.O)(this._dir.value),(0,Ve.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=function D(r){return Array.isArray(r)?r:[r]}(this.connectedTo).map(o=>"string"==typeof o?r._dropLists.find(p=>p.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===n.indexOf(o)&&n.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(l=>l.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=N(this.sortingDisabled),t.autoScrollDisabled=N(this.autoScrollDisabled),t.autoScrollStep=F(this.autoScrollStep,2),t.connectedTo(n.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),(0,lt.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:n,draggingDisabled:o,sortingDisabled:l,listAutoScrollDisabled:p,listOrientation:S}=t;this.disabled=o??!1,this.sortingDisabled=l??!1,this.autoScrollDisabled=p??!1,this.orientation=S||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return r._dropLists=[],r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(pt),e.Y36(e.sBO),e.Y36(gn),e.Y36(bt,8),e.Y36(gt,12),e.Y36(Kt,8))},r.\u0275dir=e.lG2({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("id",n.id),e.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[e._Bn([{provide:gt,useValue:void 0},{provide:qt,useExisting:r}])]}),r})();const Tt=new e.OlP("CdkDragHandle");let Jt=(()=>{class r{get disabled(){return this._disabled}set disabled(t){this._disabled=N(t),this._stateChanges.next(this)}constructor(t,n){this.element=t,this._stateChanges=new L.x,this._disabled=!1,this._parentDrag=n}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(mt,12))},r.\u0275dir=e.lG2({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},standalone:!0,features:[e._Bn([{provide:Tt,useExisting:r}])]}),r})();const Xt=new e.OlP("CdkDragPlaceholder"),Qt=new e.OlP("CdkDragPreview");let en=(()=>{class r{get matchSize(){return this._matchSize}set matchSize(t){this._matchSize=N(t)}constructor(t){this.templateRef=t,this._matchSize=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.Rgc))},r.\u0275dir=e.lG2({type:r,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:"matchSize"},standalone:!0,features:[e._Bn([{provide:Qt,useExisting:r}])]}),r})(),tn=(()=>{class r{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=N(t),this._dragRef.disabled=this._disabled}constructor(t,n,o,l,p,S,M,b,V,ee,ue){this.element=t,this.dropContainer=n,this._ngZone=l,this._viewContainerRef=p,this._dir=M,this._changeDetectorRef=V,this._selfHandle=ee,this._parentDrag=ue,this._destroyed=new L.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new K.y(ve=>{const Te=this._dragRef.moved.pipe((0,Ln.U)(Ie=>({source:this,pointerPosition:Ie.pointerPosition,event:Ie.event,delta:Ie.delta,distance:Ie.distance}))).subscribe(ve);return()=>{Te.unsubscribe()}}),this._dragRef=b.createDrag(t,{dragStartThreshold:S&&null!=S.dragStartThreshold?S.dragStartThreshold:5,pointerDirectionChangeThreshold:S&&null!=S.pointerDirectionChangeThreshold?S.pointerDirectionChangeThreshold:5,zIndex:S?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),S&&this._assignDefaults(S),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,wt.q)(1),(0,Ve.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,o=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=r._dragInstances.indexOf(this);t>-1&&r._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):U(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,o=this.dragStartDelay,l=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,p=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof o&&o?o:F(o),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(p).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,wt.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(r._dragInstances.find(o=>o.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:o,constrainPosition:l,previewClass:p,boundaryElement:S,draggingDisabled:M,rootElementSelector:b,previewContainer:V}=t;this.disabled=M??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),l&&(this.constrainPosition=l),p&&(this.previewClass=p),S&&(this.boundaryElement=S),b&&(this.rootElementSelector=b),V&&(this.previewContainer=V)}_setupHandlesListener(){this._handles.changes.pipe((0,ct.O)(this._handles),(0,Un.b)(t=>{const n=t.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,Zn.w)(t=>(0,lt.T)(...t.map(n=>n._stateChanges.pipe((0,ct.O)(n))))),(0,Ve.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,o=t.element.nativeElement;t.disabled?n.disableHandle(o):n.enableHandle(o)})}}return r._dragInstances=[],r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(qt,12),e.Y36(O.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Kt,8),e.Y36(bt,8),e.Y36(pt),e.Y36(e.sBO),e.Y36(Tt,10),e.Y36(mt,12))},r.\u0275dir=e.lG2({type:r,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,Qt,5),e.Suo(o,Xt,5),e.Suo(o,Tt,5)),2&t){let l;e.iGM(l=e.CRH())&&(n._previewTemplate=l.first),e.iGM(l=e.CRH())&&(n._placeholderTemplate=l.first),e.iGM(l=e.CRH())&&(n._handles=l)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[e._Bn([{provide:mt,useExisting:r}]),e.TTD]}),r})(),ii=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[pt],imports:[Cn]}),r})();var ae=R(433),Ae=R(9453),ri=R(5398),H=R(6993);class St{static#e=this.map={1:{moduleId:H.j.module_gen_prod_energycells_01.id},2:{moduleId:H.j.module_gen_prod_water_01.id},3:{moduleId:H.j.module_arg_prod_meat_01.id},4:{moduleId:H.j.module_par_prod_majasnails_01.id},5:{moduleId:H.j.module_gen_prod_spices_01.id},6:{moduleId:H.j.module_arg_prod_wheat_01.id},7:{moduleId:H.j.module_par_prod_sojabeans_01.id},8:{moduleId:H.j.module_tel_prod_sunriseflowers_01.id},9:{moduleId:H.j.module_tel_prod_swampplant_01.id},10:{moduleId:H.j.module_arg_prod_medicalsupplies_01.id},11:{moduleId:H.j.module_tel_prod_medicalsupplies_01.id},12:{moduleId:H.j.module_par_prod_medicalsupplies_01.id},13:{moduleId:H.j.module_arg_prod_foodrations_01.id},14:{moduleId:H.j.module_par_prod_sojahusk_01.id},15:{moduleId:H.j.module_tel_prod_nostropoil_01.id},16:{moduleId:H.j.module_arg_prod_spacefuel_01.id},17:{moduleId:H.j.module_tel_prod_spaceweed_01.id},18:{moduleId:H.j.module_par_prod_majadust_01.id},19:{moduleId:H.j.module_gen_prod_refinedmetals_01.id},20:{moduleId:H.j.module_gen_prod_siliconwafers_01.id},21:{moduleId:H.j.module_gen_prod_antimattercells_01.id},22:{moduleId:H.j.module_gen_prod_graphene_01.id},23:{moduleId:H.j.module_gen_prod_superfluidcoolant_01.id},24:{moduleId:H.j.module_gen_prod_microchips_01.id},25:{moduleId:H.j.module_gen_prod_scanningarrays_01.id},26:{moduleId:H.j.module_gen_prod_hullparts_01},27:{moduleId:H.j.module_gen_prod_advancedcomposites_01.id},28:{moduleId:H.j.module_gen_prod_engineparts_01.id},29:{moduleId:H.j.module_gen_prod_plasmaconductors_01.id},30:{moduleId:H.j.module_gen_prod_quantumtubes_01.id},31:{moduleId:H.j.module_gen_prod_advancedelectronics_01.id},32:{moduleId:H.j.module_gen_prod_antimatterconverters_01.id},33:{moduleId:H.j.module_gen_prod_claytronics_01.id},34:{moduleId:H.j.module_gen_prod_dronecomponents_01.id},35:{moduleId:H.j.module_gen_prod_missilecomponents_01.id},36:{moduleId:H.j.module_gen_prod_shieldcomponents_01.id},37:{moduleId:H.j.module_gen_prod_turretcomponents_01.id},38:{moduleId:H.j.module_gen_prod_weaponcomponents_01.id},39:{moduleId:H.j.module_gen_prod_smartchips_01.id},40:{moduleId:H.j.module_gen_prod_fieldcoils_01.id}};getLayouts(i){return i.map(n=>({name:n.name,config:n.config.map(o=>({moduleId:St.map[o.moduleId].moduleId,count:o.count}))}))}getSaveData(i){return null}}class oi{constructor(i){this.moduleService=i}findModule(i,t){return this.moduleService.getModuleByWare(i,t)}getLayouts(i){const t=i.layouts;return t?t.map(n=>({name:n.name,config:n.config.map(o=>{const l=this.findModule(o.moduleId,o.productionId);return{count:o.count,moduleId:l?l.id:null}}).filter(o=>null!=o.moduleId)})):[]}getSaveData(i){return{layouts:i}}}class si{getLayouts(i){return i.layouts}getSaveData(i){return{layouts:i}}}var ai=R(2323),je=R(9746),li=R(633);let Ke=(()=>{class r{static#e=this.version=2;static#t=this.storageKey="layouts";getCurrentService(){return this.services[r.version]}constructor(t,n,o){this.storageService=t,this.moduleService=n,this.analytics=o,this.services=[new St,new oi(n),new si]}getLayouts(){const t=this.storageService.get(r.storageKey)||{version:r.version};return this.services[t.version||0].getLayouts(t)||[]}getLayout(t){return this.analytics.event({label:t,category:"Layouts",action:"Load Layout"}),this.getLayouts().find(n=>n.name===t)}saveLayout(t){const n=this.getLayouts(),o=n.findIndex(l=>l.name.toLowerCase()===t.name.toLowerCase());o>=0?n[o]=t:n.push(t),this.analytics.event({label:t.name,category:"Layouts",action:"Save Layout"}),this.saveLayoutsInternal(n)}deleteLayout(t){this.analytics.event({label:t,category:"Layouts",action:"Delete Layout"});const n=this.getLayouts(),o=n.findIndex(l=>l.name.toLowerCase()===t.toLowerCase());o>=0&&n.splice(o,1),this.saveLayoutsInternal(n)}saveLayoutsInternal(t){const n=this.getCurrentService().getSaveData(t);this.storageService.add(r.storageKey,{...n,version:r.version})}static#n=this.\u0275fac=function(n){return new(n||r)(e.LFG(ai.V),e.LFG(je.C),e.LFG(li.y))};static#i=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac})}return r})();var Ct=R(2655),nn=R(7234),it=R(3273);let rn=(()=>{class r{static#e=this.primary="primary";static#t=this.secondary="secondary";static#n=this.success="success";static#i=this.danger="danger";static#r=this.warning="warning";static#o=this.info="info"}return r})(),on=(()=>{class r{constructor(t){this.activeModal=t}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],inputs:{title:"title",message:"message"},decls:13,vars:2,consts:function(){let t,n;return t=$localize`:@@yes:Yes`,n=$localize`:@@no:No`,[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],t,n]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4),e._UZ(7,"p",5),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return o.activeModal.close(!0)}),e.SDv(10,8),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return o.activeModal.close(!1)}),e.SDv(12,9),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(o.title),e.xp6(5),e.Q6J("innerHTML",o.message,e.oJD))},encapsulation:2})}return r})();function ci(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(o){const p=e.CHM(t).$implicit,S=e.oxw();return e.KtG(S.loadLayout(o,p))}),e.TgZ(1,"div")(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"div",12)(5,"a",13),e.NdJ("click",function(o){const p=e.CHM(t).$implicit,S=e.oxw();return e.KtG(S.loadLayout(o,p))}),e.SDv(6,14),e.qZA(),e._uU(7," | "),e.TgZ(8,"a",15),e.NdJ("click",function(o){const p=e.CHM(t).$implicit,S=e.oxw();return e.KtG(S.addLayout(o,p))}),e.SDv(9,16),e.qZA(),e._uU(10," | "),e.TgZ(11,"a",17),e.NdJ("click",function(o){const p=e.CHM(t).$implicit,S=e.oxw();return e.KtG(S.deleteLayout(o,p))}),e.SDv(12,18),e.qZA()()(),e.TgZ(13,"div",19),e._uU(14),e.qZA()()}if(2&r){const t=i.$implicit,n=e.oxw();e.xp6(3),e.Oqu(t.name),e.xp6(11),e.hij(" ",n.getModules(t)," ")}}var Pe=(()=>{return(r=Pe||(Pe={}))[r.load=0]="load",r[r.add=1]="add",Pe;var r})();let ui=(()=>{class r extends it.V{constructor(t,n,o,l){super(),this.activeModal=t,this.modal=n,this.layoutService=o,this.moduleService=l}ngOnInit(){this.entities=this.layoutService.getLayouts().map(t=>({name:t.name,modules:t.config.map(n=>({count:n.count,module:this.moduleService.getEntity(n.moduleId)}))}))}getModules(t){let n=!1,o=t.modules;return o.length>3&&(o=o.slice(0,3),n=!0),o.map(l=>l.count+" x "+(null==l.module?"":l.module.name)).join(", ")+(n?"...":"")}loadLayout(t,n){t.preventDefault(),t.stopPropagation(),this.activeModal.close({layoutName:n.name,type:Pe.load})}addLayout(t,n){t.preventDefault(),t.stopPropagation(),this.activeModal.close({layoutName:n.name,type:Pe.add})}deleteLayout(t,n){t.preventDefault(),t.stopPropagation();const o=this.modal.open(on);o.componentInstance.title="Confirm Delete",o.componentInstance.message=`Are you sure you want to delete <strong>${n.name}</strong>?`,o.result.then(l=>{l&&(this.layoutService.deleteLayout(n.name),this.ngOnInit())})}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz),e.Y36(Ae.FF),e.Y36(Ke),e.Y36(je.C))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e.qOj],decls:12,vars:1,consts:function(){let t,n,o,l,p;return t=$localize`:@@loadLayout:Load Layout`,n=$localize`:@@cancel:Cancel`,o=$localize`:@@load:Load Layout`,l=$localize`:@@load:Add Modules`,p=$localize`:@@delete:Delete Layout`,[[1,"modal-header"],[1,"modal-title"],t,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],n,[1,"list-group-item","list-group-item-action",3,"click"],[1,"float-right","small"],[1,"hover","text-primary",3,"click"],o,[1,"hover","text-secondary",3,"click"],l,[1,"hover","text-danger",3,"click"],p,[1,"small"]]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return o.activeModal.close()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e.YNc(8,ci,15,2,"a",7),e.qZA()(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){return o.activeModal.close()}),e.SDv(11,10),e.qZA()()),2&n&&(e.xp6(8),e.Q6J("ngForOf",o.entities))},dependencies:[O.sg],encapsulation:2})}return r})(),di=(()=>{class r{constructor(t,n,o){this.activeModal=t,this.modal=n,this.layoutService=o}canSave(){return this.name}saveLayout(){if(this.layoutService.getLayout(this.name)){const n=this.modal.open(on);n.componentInstance.title="Confirm Save",n.componentInstance.message=`<strong>${this.name}</strong> already exists. Confirm overwrite?`,n.result.then(o=>{o&&this.activeModal.close(this.name)})}else this.activeModal.close(this.name)}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz),e.Y36(Ae.FF),e.Y36(Ke))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:14,vars:2,consts:function(){let t,n,o;return t=$localize`:@@saveLayout:Save Layout`,n=$localize`:@@save:Save`,o=$localize`:@@cancel:Cancel`,[[1,"modal-header"],[1,"modal-title"],t,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],n,["type","button",1,"btn","btn-secondary",3,"click"],o]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return o.activeModal.close()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"input",7),e.NdJ("ngModelChange",function(p){return o.name=p}),e.qZA()()(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){return o.saveLayout()}),e.SDv(11,10),e.qZA(),e.TgZ(12,"button",11),e.NdJ("click",function(){return o.activeModal.close()}),e.SDv(13,12),e.qZA()()),2&n&&(e.xp6(8),e.Q6J("ngModel",o.name),e.xp6(2),e.Q6J("disabled",!o.canSave()))},dependencies:[ae.Fj,ae.JJ,ae.On],encapsulation:2})}return r})(),_i=(()=>{class r{constructor(t){this.activeModal=t}copy(t){t.select(),document.execCommand("copy")}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-share-layout"]],inputs:{url:"url"},decls:16,vars:1,consts:function(){let t,n,o;return t=$localize`:@@shareLayout:Share Layout`,n=$localize`:@@copy:Copy`,o=$localize`:@@ok:Ok`,[[1,"modal-header"],[1,"modal-title"],t,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"input-group"],["readonly","",1,"form-control",3,"value"],["urlInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],n,[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],o]},template:function(n,o){if(1&n){const l=e.EpF();e.TgZ(0,"div",0)(1,"h4",1),e.SDv(2,2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return o.activeModal.dismiss()}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6),e._UZ(8,"input",7,8),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){e.CHM(l);const S=e.MAs(9);return e.KtG(o.copy(S))}),e.SDv(12,11),e.qZA()()()(),e.TgZ(13,"div",12)(14,"button",13),e.NdJ("click",function(){return o.activeModal.close()}),e.SDv(15,14),e.qZA()()}2&n&&(e.xp6(8),e.Q6J("value",o.url))},encapsulation:2})}return r})();var Ne=R(973);let yt=(()=>{class r{static#e=this.default="default";static#t=this.argon="argon";static#n=this.teladi="teladi";static#i=this.paranid="paranid";static#r=this.recycling="recycling"}return r})();var Le=R(4941),Ce=R(7946);const vt={argon:{race:Le.I.argon,amount:200,consumption:[{ware:Ce.H.foodrations,amount:450},{ware:Ce.H.medicalsupplies,amount:270}]},teladi:{race:Le.I.teladi,amount:200,consumption:[{ware:Ce.H.nostropoil,amount:228},{ware:Ce.H.medicalsupplies,amount:270}]},paranid:{race:Le.I.paranid,amount:200,consumption:[{ware:Ce.H.sojahusk,amount:288},{ware:Ce.H.medicalsupplies,amount:270}]},split:{race:Le.I.split,amount:200,consumption:[{ware:Ce.H.cheltmeat,amount:102},{ware:Ce.H.scruffinfruits,amount:138},{ware:Ce.H.medicalsupplies,amount:270}]},terran:{race:Le.I.terran,amount:200,consumption:[{ware:Ce.H.terranmre,amount:258},{ware:Ce.H.medicalsupplies,amount:270}]},boron:{race:Le.I.boron,amount:200,consumption:[{ware:Ce.H.bofu,amount:90},{ware:Ce.H.medicalsupplies,amount:198},{ware:Ce.H.water,amount:162}]},get:r=>vt[r]||vt.argon};var hi=R(5730);const sn=["module_gen_prod_scrap_recycler","module_ter_prod_scrap_recycler"];class qe{constructor(i,t,n="",o=1){this.wareService=i,this.moduleService=t,this.moduleId=n,this.count=o}get moduleId(){return this._moduleId}set moduleId(i){i!=this._moduleId&&(this._moduleId=i,this.update())}get count(){return this._count}set count(i){i!=this._count&&(this._count=i,this.update())}update(){if(this._moduleId){if(this.module=this.moduleService.getEntity(this.moduleId),this.needs=[],this.production=[],this.module.type==Ne.J.production){const i=this.module.product;for(let t of i){let n=null;sn.includes(this.module.id)&&(n=t.production.find(l=>l.method==yt.recycling)),null==n&&(n=null==this.module.makerRace?t.production.find(l=>l.method==yt.default):t.production.find(l=>l.method==this.module.makerRace.id)||t.production.find(l=>l.method==yt.default));const o=3600/n.time;this.production.push({amount:n.amount*o,ware:t,value:n}),n.wares.forEach(l=>{const p=this.wareService.getEntity(l.ware);this.needs.push({amount:l.amount*o,ware:p})})}}else if(this.module.type==Ne.J.habitation){const i=this.module.workForce.capacity,t=vt.get(this.module.workForce.race.id);t.consumption.forEach(n=>{this.needs.push({amount:n.amount*i/t.amount,ware:n.ware})})}}else this.module=null,this.production=null,this.needs=[]}}class Et{static calculateWorkforce(i){return{value:i.reduce((o,l)=>l.module&&l.module.workForce&&l.module.workForce.max?o+l.count*l.module.workForce.max:o,0),capacity:i.reduce((o,l)=>l.module&&l.module.workForce&&l.module.workForce.capacity?o+l.count*l.module.workForce.capacity:o,0)}}static calculate(i,t){let n=this.calculateWorkforce(i),o=0==n.capacity||0==n.value?0:n.capacity/n.value;o>1&&(o=1);let l={};i.length>0&&(l=i.map(S=>{const M=S.needs.map(b=>({ware:b.ware,count:S.count,amount:-b.amount,efficiency:100,name:S.module.name,total:S.count*-b.amount}));if(S.production)for(let b of S.production){const V=b.value.effects?b.value.effects.find(ue=>ue.type==hi.z.work):null;let ee=null==V?1:1+V.product*o;if(b.ware.id===Ce.H.energycells.id){let ue=parseInt(t);(isNaN(ue)||ue<0)&&(ue=100),ee=ee*ue/100}M.push({ware:b.ware,count:S.count,amount:b.amount,efficiency:100*ee,name:S.module.name,total:S.count*b.amount*ee})}return M}).reduce((S,M)=>S.concat(M)).reduce(function(S,M){return S[M.ware.id]=S[M.ware.id]||[],S[M.ware.id].push(M),S},{}));const p=[];for(const S in l)if(l.hasOwnProperty(S)){const M=l[S];let b=0;M.forEach(V=>{b+=V.total}),p.push({ware:M[0].ware,amount:b,items:M})}return p}}var At=R(1667),Ue=(()=>{return(r=Ue||(Ue={}))[r.expense=0]="expense",r[r.product=1]="product",Ue;var r})();class fi{constructor(i,t,n,o,l){this.item=i,this.component=t,this.minPrice=n,this.maxPrice=o,this.items=l}get module(){return this.item.module}get count(){return this.item.count}get price(){return this.item.count*(this.minPrice+(this.maxPrice-this.minPrice)*this.component.modulesResourcesPrice/100)}}class pi{constructor(i,t,n){this.ware=i,this.amount=t,this.component=n}get price(){return this.amount*(this.ware.price.min+(this.ware.price.max-this.ware.price.min)*this.component.modulesResourcesPrice/100)}}class an{constructor(i,t,n,o=null){this.model=i,this.pricePercentage=t,this.priceType=n,this.warePrice=o}get name(){return this.model.ware.name}get amount(){return this.model.amount}get price(){return null!=this.warePrice?0:this.model.ware.price.min+(this.model.ware.price.max-this.model.ware.price.min)*(this.priceType==Ue.expense?this.pricePercentage.resourcesPrice:this.pricePercentage.productsPrice)/100}}var rt=R(2459);let ln=(()=>{class r{constructor(){this.partialWorkforceChanged=new L.x,this.partialWorkforce=0}setPartialWorkforce(t){this.partialWorkforce=t,this.partialWorkforceChanged.next(this.partialWorkforce)}get $partialWorkforce(){return this.partialWorkforce}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function mi(r,i){1&r&&e._UZ(0,"i",55)}function gi(r,i){1&r&&e._UZ(0,"i",56)}function Ti(r,i){if(1&r&&(e.TgZ(0,"tr",59)(1,"td",60),e._uU(2),e.qZA(),e.TgZ(3,"td",10),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&r){const t=i.$implicit;e.xp6(2),e.AsE("",t.count," x ",t.name,""),e.xp6(2),e.hij("-",e.xi3(5,3,t.amount*t.count,"1.0-0"),"")}}function Si(r,i){1&r&&(e.TgZ(0,"tr",59)(1,"td",60),e._uU(2," 1 x Unknown Module "),e.qZA(),e.TgZ(3,"td",10),e._uU(4,"-200"),e.qZA()())}function Ci(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Ti,6,6,"tr",57),e.YNc(2,Si,5,0,"tr",58),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.workforceNeeded),e.xp6(1),e.Q6J("ngIf",t.isHq)}}function yi(r,i){1&r&&e._UZ(0,"i",55)}function vi(r,i){1&r&&e._UZ(0,"i",56)}function Ei(r,i){if(1&r&&(e.TgZ(0,"tr",31)(1,"td",60),e._uU(2),e.qZA(),e.TgZ(3,"td",10),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&r){const t=i.$implicit;e.xp6(2),e.AsE("",t.count," x ",t.name,""),e.xp6(2),e.hij("+",e.xi3(5,3,t.amount*t.count,"1.0-0"),"")}}function Ai(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Ei,6,6,"tr",61),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.workforceCapacity)}}function Ni(r,i){1&r&&e._UZ(0,"i",55)}function Mi(r,i){1&r&&e._UZ(0,"i",56)}const Oi=function(r,i){return{"text-danger":r,"text-warning":i}};function Ii(r,i){if(1&r&&(e.TgZ(0,"tr",8)(1,"td",63),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td",10),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&r){const t=i.$implicit;e.Q6J("ngClass",e.WLB(10,Oi,t.price>0,0==t.price)),e.xp6(2),e.AsE("",e.xi3(3,4,t.amount,"1.0-0")," x ",t.name,""),e.xp6(3),e.hij(" ",e.xi3(6,7,t.amount*t.price,"1.0-0")," ")}}function wi(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Ii,7,13,"tr",62),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.resourcesNeeded)}}function bi(r,i){1&r&&e._UZ(0,"i",55)}function xi(r,i){1&r&&e._UZ(0,"i",56)}function Ri(r,i){if(1&r&&(e.TgZ(0,"tr",65)(1,"td",63),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td",10),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&r){const t=i.$implicit;e.xp6(2),e.AsE("",e.xi3(3,3,t.amount,"1.0-0")," x ",t.name,""),e.xp6(3),e.hij("+",e.xi3(6,6,t.amount*t.price,"1.0-0"),"")}}function Pi(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Ri,7,9,"tr",64),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.resourcesProduced)}}function Di(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,66),e.qZA(),e.BQk())}function ki(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,67),e.qZA(),e.BQk())}function Fi(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,68),e.qZA(),e.BQk())}function Li(r,i){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.hij("",t.resourcesPrice,"%")}}function Ui(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,69),e.qZA(),e.BQk())}function Zi(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,70),e.qZA(),e.BQk())}function Bi(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,71),e.qZA(),e.BQk())}function $i(r,i){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.hij("",t.productsPrice,"%")}}function Yi(r,i){1&r&&e._UZ(0,"i",55)}function Vi(r,i){1&r&&e._UZ(0,"i",56)}function Gi(r,i){if(1&r&&(e.TgZ(0,"tr")(1,"td",63),e._uU(2),e.qZA(),e.TgZ(3,"td",10),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&r){const t=i.$implicit,n=e.oxw(2).$implicit;e.xp6(2),e.AsE("",n.count*t.amount," x ",t.ware.name,""),e.xp6(2),e.hij(" ",e.xi3(5,3,n.count*t.price,"1.0-0")," ")}}function zi(r,i){if(1&r&&(e.ynx(0),e.YNc(1,Gi,6,6,"tr",50),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.items)}}function Hi(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleExpanded(l.module.id))}),e.TgZ(2,"td"),e.YNc(3,Yi,1,0,"i",6),e.YNc(4,Vi,1,0,"i",7),e._uU(5),e.qZA(),e.TgZ(6,"td",10),e._uU(7),e.ALo(8,"number"),e.qZA()(),e.YNc(9,zi,2,1,"ng-container",11),e.BQk()}if(2&r){const t=i.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngIf",!n.expandState[t.module.id]),e.xp6(1),e.Q6J("ngIf",n.expandState[t.module.id]),e.xp6(1),e.AsE(" ",t.count," x ",t.module.name," "),e.xp6(2),e.hij(" ",e.xi3(8,6,t.price,"1.0-0")," "),e.xp6(2),e.Q6J("ngIf",n.expandState[t.module.id])}}function ji(r,i){if(1&r&&(e.TgZ(0,"tr")(1,"td",10),e._uU(2),e.qZA(),e.TgZ(3,"td",10),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&r){const t=i.$implicit;e.xp6(2),e.Oqu(t.ware.name),e.xp6(2),e.Oqu(e.xi3(5,2,t.value,"1.0-0"))}}function Ki(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,72),e.qZA(),e.BQk())}function qi(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,73),e.qZA(),e.BQk())}function Wi(r,i){1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,74),e.qZA(),e.BQk())}function Ji(r,i){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.hij("",t.modulesResourcesPrice,"%")}}const cn=function(r,i){return{"text-danger":r,"text-success":i}};class Ze{static#e=this.basicResources=[At.B.gases,At.B.minerals,At.B.ice];constructor(i,t){this.wareService=i,this.stationSummaryService=t,this.expandState={},this.provideBasicResources=!1,this.provideAllResources=!1,this.isHq=!1,this.resourcesPrice=50,this.productsPrice=50,this.modulesResourcesPrice=50,this._totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.totalModuleResourceCosts=[],this.change=new e.vpe,this.sunlight=100}ngOnChanges(){this.update()}get totalWorkforce(){return this._totalWorkforce+(this.isHq?200:0)}onChange(){this.update(),this.change.emit()}update(){if(this._totalWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.moduleCosts=[],null==this.modules)return;this.modules.forEach(n=>{if(null!=n.module&&null!=n.module.workForce&&(null!=n.module.workForce.max&&(this._totalWorkforce+=n.count*n.module.workForce.max,this.workforceNeeded.push({amount:n.module.workForce.max,name:n.module.name,count:n.count})),null!=n.module.workForce.capacity&&this.workforceCapacity.push({amount:n.module.workForce.capacity,name:n.module.name,count:n.count})),null!=n.module){const o=this.getModuleCost(n);null!=o&&this.moduleCosts.push(o)}});const i=this.modules.reduce((n,o)=>o.module&&o.module.workForce&&o.module.workForce.capacity?n+o.count*o.module.workForce.capacity:n,0);this.totalWorkforceCapacity!=i&&(this.totalWorkforceCapacity=i,this.partialWorkforce=i),this.stationSummaryService.setPartialWorkforce(this.partialWorkforce);const t=Et.calculate(this.modules,this.sunlight);t.sort((n,o)=>this.wareService.compareWares(n.ware,o.ware)),t.forEach(n=>{if(n.amount<0){let o=null;(this.provideAllResources||this.provideBasicResources&&Ze.basicResources.indexOf(n.ware.group)>=0)&&(o=0);const l=new an(n,this,Ue.expense,o);this.resourcesNeeded.push(l)}else if(n.amount>0){const o=new an(n,this,Ue.product);this.resourcesProduced.push(o)}}),this.totalModuleResourceCosts=[],this.moduleCosts.forEach(n=>{n.items.forEach(o=>{let l=this.totalModuleResourceCosts.find(p=>p.ware.id==o.ware.id);null==l?(l={ware:o.ware,value:n.count*o.amount},this.totalModuleResourceCosts.push(l)):l.value+=n.count*o.amount})})}get workforceStep(){return 0===this.totalWorkforceCapacity?1:this.totalWorkforceCapacity/20}get workforcePercent(){return 0===this.totalWorkforceCapacity?"0%":Math.round(100*this.partialWorkforce/this.totalWorkforceCapacity)+"%"}get totalExpenses(){let i=0;return this.resourcesNeeded.forEach(t=>{i+=t.amount*t.price}),i}get totalProfits(){let i=0;return this.resourcesProduced.forEach(t=>{i+=t.amount*t.price}),i}get totalModuleCost(){let i=0;return this.moduleCosts.forEach(t=>{i+=t.price}),i}getModuleCost(i){const t=i.module.production[0];if(!t)return null;let n=0,o=0;const l=[];return t.wares.forEach(p=>{const S=this.wareService.getEntity(p.ware);n+=S.price.min*p.amount,o+=S.price.max*p.amount,l.push(new pi(S,p.amount,this))}),new fi(i,this,n,o,l)}toggleExpanded(i){this.expandState[i]=!this.expandState[i]}static#t=this.\u0275fac=function(t){return new(t||Ze)(e.Y36(rt.l),e.Y36(ln))};static#n=this.\u0275cmp=e.Xpm({type:Ze,selectors:[["app-station-summary"]],inputs:{modules:"modules",sunlight:"sunlight"},outputs:{change:"change"},features:[e.TTD],decls:157,vars:72,consts:function(){let i,t,n,o,l,p,S,M,b,V,ee,ue,ve,Te,Ie,ye,ot,We,Be,Je,un,dn,_n,hn,fn,pn;return i=$localize`:@@workforce:Workforce`,t=$localize`:@@value:Value`,n=$localize`:@@neededWorkforce: Needed Workforce `,o=$localize`:@@workforceCapacity: Workforce Capacity `,l=$localize`:@@isHeadquarters:Headquarters (The HQ needs 200 workers for some reason)`,p=$localize`:@@productionPerHour:Production Per Hour`,S=$localize`:@@amount:Amount`,M=$localize`:@@expenses: Expenses`,b=$localize`:@@production: Production`,V=$localize`:@@profit: Profit`,ee=$localize`:@@minersProvideBasicResources:Miners provide basic resources`,ue=$localize`:@@rovideAllResources:Resources are provided by other stations`,ve=$localize`:@@resourcePrice:Resources Price:`,Te=$localize`:@@stationCosts:Station Costs`,Ie=$localize`:@@amount:Amount`,ye=$localize`:@@total:Total:`,ot=$localize`:@@resourcesPrice:Resources Price:`,We=$localize`:@@min:Min`,Be=$localize`:@@average:Average`,Je=$localize`:@@max:Max`,un=$localize`:@@min:Min`,dn=$localize`:@@average:Average`,_n=$localize`:@@max:Max`,hn=$localize`:@@min:Min`,fn=$localize`:@@average:Average`,pn=$localize`:@@max:Max`,[[1,"table","table-sm","small","table-hover"],["scope","col"],i,["scope","col",1,"text-right"],t,[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],n,[1,"text-right"],[4,"ngIf"],o,["colspan","2"],[1,"form-check"],["type","checkbox","id","is-hq",1,"form-check-input",3,"ngModel","ngModelChange"],["for","is-hq",1,"form-check-label"],l,[1,"row"],[1,"form-group","col"],["for","workforce-slider"],[1,"d-flex","flex-row"],[1,"flex-grow-1"],["type","range","id","workforce-slider","min","0",1,"form-control-range","small",3,"max","ngModel","ngModelChange"],[1,"ml-1"],p,S,[1,"hover","text-danger",3,"click"],M,[1,"hover","text-primary",3,"click"],b,[1,"text-success"],[1,"fa","fa-line-chart"],V,["type","checkbox","id","basic-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","basic-resources",1,"form-check-label"],ee,["type","checkbox","id","all-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","all-resources",1,"form-check-label"],ue,["for","resources-price"],ve,[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","range","id","resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],["for","products-price"],["type","range","id","products-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],Te,Ie,[4,"ngFor","ngForOf"],ye,["for","modules-resources-price"],ot,["type","range","id","modules-resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],["class","text-danger",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"pl-4"],["class","text-success",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-5"],["class","text-primary",4,"ngFor","ngForOf"],[1,"text-primary"],We,Be,Je,un,dn,_n,hn,fn,pn]},template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.SDv(4,2),e.qZA(),e.TgZ(5,"th",3),e.SDv(6,4),e.qZA()()(),e.TgZ(7,"tbody")(8,"tr",5),e.NdJ("click",function(){return n.toggleExpanded("totalWorkforce")}),e.TgZ(9,"td"),e.YNc(10,mi,1,0,"i",6),e.YNc(11,gi,1,0,"i",7),e.TgZ(12,"span",8),e.SDv(13,9),e.qZA()(),e.TgZ(14,"td",10),e._uU(15),e.ALo(16,"number"),e.qZA()(),e.YNc(17,Ci,3,2,"ng-container",11),e.TgZ(18,"tr",5),e.NdJ("click",function(){return n.toggleExpanded("totalWorkforceCapacity")}),e.TgZ(19,"td"),e.YNc(20,yi,1,0,"i",6),e.YNc(21,vi,1,0,"i",7),e.TgZ(22,"span",8),e.SDv(23,12),e.qZA()(),e.TgZ(24,"td",10),e._uU(25),e.ALo(26,"number"),e.qZA()(),e.YNc(27,Ai,2,1,"ng-container",11),e.TgZ(28,"tr")(29,"td",13)(30,"div",14)(31,"input",15),e.NdJ("ngModelChange",function(l){return n.isHq=l})("ngModelChange",function(){return n.onChange()}),e.qZA(),e.TgZ(32,"label",16),e.SDv(33,17),e.qZA()()()(),e.TgZ(34,"tr")(35,"td",13)(36,"div",18)(37,"div",19)(38,"label",20)(39,"span"),e._uU(40,"Actual Workforce:"),e.qZA(),e._uU(41,"\xa0"),e.TgZ(42,"strong"),e._uU(43),e.ALo(44,"number"),e.qZA()(),e.TgZ(45,"div",21)(46,"div",22)(47,"input",23),e.NdJ("ngModelChange",function(l){return n.partialWorkforce=l})("ngModelChange",function(){return n.onChange()}),e.qZA()(),e.TgZ(48,"div",24),e._uU(49),e.qZA()()()()()()()(),e.TgZ(50,"table",0)(51,"thead")(52,"tr")(53,"th",1),e.SDv(54,25),e.qZA(),e.TgZ(55,"th",3),e.SDv(56,26),e.qZA()()(),e.TgZ(57,"tbody")(58,"tr",27),e.NdJ("click",function(){return n.toggleExpanded("totalExpenses")}),e.TgZ(59,"td"),e.YNc(60,Ni,1,0,"i",6),e.YNc(61,Mi,1,0,"i",7),e.TgZ(62,"span"),e.SDv(63,28),e.qZA()(),e.TgZ(64,"td",10),e._uU(65),e.ALo(66,"number"),e.qZA()(),e.YNc(67,wi,2,1,"ng-container",11),e.TgZ(68,"tr",29),e.NdJ("click",function(){return n.toggleExpanded("totalProfits")}),e.TgZ(69,"td"),e.YNc(70,bi,1,0,"i",6),e.YNc(71,xi,1,0,"i",7),e.TgZ(72,"span"),e.SDv(73,30),e.qZA()(),e.TgZ(74,"td",10),e._uU(75),e.ALo(76,"number"),e.qZA()(),e.YNc(77,Pi,2,1,"ng-container",11),e.TgZ(78,"tr",31)(79,"td"),e._UZ(80,"i",32),e.TgZ(81,"strong"),e.SDv(82,33),e.qZA()(),e.TgZ(83,"td",10)(84,"strong"),e._uU(85),e.ALo(86,"number"),e.qZA()()(),e.TgZ(87,"tr")(88,"td",13)(89,"div",14)(90,"input",34),e.NdJ("ngModelChange",function(l){return n.provideBasicResources=l})("ngModelChange",function(){return n.onChange()}),e.qZA(),e.TgZ(91,"label",35),e.SDv(92,36),e.qZA()()()(),e.TgZ(93,"tr")(94,"td",13)(95,"div",14)(96,"input",37),e.NdJ("ngModelChange",function(l){return n.provideAllResources=l})("ngModelChange",function(){return n.onChange()}),e.qZA(),e.TgZ(97,"label",38),e.SDv(98,39),e.qZA()()()(),e.TgZ(99,"tr")(100,"td",13)(101,"div",18)(102,"div",19)(103,"label",40)(104,"span"),e.SDv(105,41),e.qZA(),e._uU(106,"\xa0 "),e.TgZ(107,"strong",42),e.YNc(108,Di,3,0,"ng-container",43),e.YNc(109,ki,3,0,"ng-container",43),e.YNc(110,Fi,3,0,"ng-container",43),e.YNc(111,Li,2,1,"ng-container",44),e.qZA()(),e._UZ(112,"br"),e.TgZ(113,"input",45),e.NdJ("ngModelChange",function(l){return n.resourcesPrice=l})("ngModelChange",function(){return n.onChange()}),e.qZA()(),e.TgZ(114,"div",19)(115,"label",46)(116,"span"),e._uU(117,"Products Price:"),e.qZA(),e._uU(118,"\xa0 "),e.TgZ(119,"strong",42),e.YNc(120,Ui,3,0,"ng-container",43),e.YNc(121,Zi,3,0,"ng-container",43),e.YNc(122,Bi,3,0,"ng-container",43),e.YNc(123,$i,2,1,"ng-container",44),e.qZA()(),e._UZ(124,"br"),e.TgZ(125,"input",47),e.NdJ("ngModelChange",function(l){return n.productsPrice=l})("ngModelChange",function(){return n.onChange()}),e.qZA()()()()()()(),e.TgZ(126,"table",0)(127,"thead")(128,"tr")(129,"th",1),e.SDv(130,48),e.qZA(),e.TgZ(131,"th",3),e.SDv(132,49),e.qZA()()(),e.TgZ(133,"tbody"),e.YNc(134,Hi,10,9,"ng-container",50),e.TgZ(135,"tr")(136,"th",10),e.SDv(137,51),e.qZA(),e.TgZ(138,"th",10),e._uU(139),e.ALo(140,"number"),e.qZA()(),e.YNc(141,ji,6,5,"tr",50),e.TgZ(142,"tr")(143,"td",13)(144,"div",18)(145,"div",19)(146,"label",52)(147,"span"),e.SDv(148,53),e.qZA(),e._uU(149,"\xa0 "),e.TgZ(150,"strong",42),e.YNc(151,Ki,3,0,"ng-container",43),e.YNc(152,qi,3,0,"ng-container",43),e.YNc(153,Wi,3,0,"ng-container",43),e.YNc(154,Ji,2,1,"ng-container",44),e.qZA()(),e._UZ(155,"br"),e.TgZ(156,"input",54),e.NdJ("ngModelChange",function(l){return n.modulesResourcesPrice=l})("ngModelChange",function(){return n.onChange()}),e.qZA()()()()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",!n.expandState.totalWorkforce),e.xp6(1),e.Q6J("ngIf",n.expandState.totalWorkforce),e.xp6(1),e.Q6J("ngClass",e.WLB(66,cn,n.totalWorkforce>n.totalWorkforceCapacity,n.totalWorkforce<=n.totalWorkforceCapacity)),e.xp6(3),e.Oqu(e.xi3(16,45,n.totalWorkforce,"1.0-0")),e.xp6(2),e.Q6J("ngIf",n.expandState.totalWorkforce),e.xp6(3),e.Q6J("ngIf",!n.expandState.totalWorkforceCapacity),e.xp6(1),e.Q6J("ngIf",n.expandState.totalWorkforceCapacity),e.xp6(1),e.Q6J("ngClass",e.WLB(69,cn,n.totalWorkforce>n.totalWorkforceCapacity,n.totalWorkforce<=n.totalWorkforceCapacity)),e.xp6(3),e.hij(" ",e.xi3(26,48,n.totalWorkforceCapacity,"1.0-0")," "),e.xp6(2),e.Q6J("ngIf",n.expandState.totalWorkforceCapacity),e.xp6(4),e.Q6J("ngModel",n.isHq),e.xp6(12),e.Oqu(e.xi3(44,51,n.partialWorkforce,"1.0-0")),e.xp6(4),e.Q6J("max",n.totalWorkforceCapacity)("ngModel",n.partialWorkforce),e.uIk("step",n.workforceStep),e.xp6(2),e.hij(" ",n.workforcePercent," "),e.xp6(11),e.Q6J("ngIf",!n.expandState.totalExpenses),e.xp6(1),e.Q6J("ngIf",n.expandState.totalExpenses),e.xp6(4),e.Oqu(e.xi3(66,54,n.totalExpenses,"1.0-0")),e.xp6(2),e.Q6J("ngIf",n.expandState.totalExpenses),e.xp6(3),e.Q6J("ngIf",!n.expandState.totalProfits),e.xp6(1),e.Q6J("ngIf",n.expandState.totalProfits),e.xp6(4),e.Oqu(e.xi3(76,57,n.totalProfits,"1.0-0")),e.xp6(2),e.Q6J("ngIf",n.expandState.totalProfits),e.xp6(8),e.Oqu(e.xi3(86,60,n.totalProfits+n.totalExpenses,"1.0-0")),e.xp6(5),e.Q6J("ngModel",n.provideBasicResources),e.xp6(6),e.Q6J("ngModel",n.provideAllResources),e.xp6(11),e.Q6J("ngSwitch",n.resourcesPrice),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",50),e.xp6(1),e.Q6J("ngSwitchCase",100),e.xp6(3),e.Q6J("ngModel",n.resourcesPrice),e.xp6(6),e.Q6J("ngSwitch",n.productsPrice),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",50),e.xp6(1),e.Q6J("ngSwitchCase",100),e.xp6(3),e.Q6J("ngModel",n.productsPrice),e.xp6(9),e.Q6J("ngForOf",n.moduleCosts),e.xp6(5),e.Oqu(e.xi3(140,63,n.totalModuleCost,"1.0-0")),e.xp6(2),e.Q6J("ngForOf",n.totalModuleResourceCosts),e.xp6(9),e.Q6J("ngSwitch",n.modulesResourcesPrice),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",50),e.xp6(1),e.Q6J("ngSwitchCase",100),e.xp6(3),e.Q6J("ngModel",n.modulesResourcesPrice))},dependencies:[O.mk,O.sg,O.O5,O.RF,O.n9,O.ED,ae.Fj,ae.eT,ae.Wl,ae.JJ,ae.On,O.JJ],encapsulation:2})}var Xi=R(617),Qi=R(9220);let er=(()=>{class r extends it.V{constructor(t,n,o){super(),this.activeModal=t,this.moduleService=n,this.layoutService=o}ngOnInit(){}importPlans(){let t,n=null;try{const o=Qi.xml2js(this.xml,{compact:!0});t=this.importCore(o)}catch{n="Failed to import layouts"}this.activeModal.close({error:n,layouts:t})}importCore(t){const n=[];for(const o of t.plans.plan){if(null==o.entry||0===o.entry.length)continue;const l=o._attributes?.name||"Imported Plan",p=[];for(const M of o.entry){const[b]=this.moduleService.getModulesByMacro(M._attributes.macro);if(b){const V=p.find(ee=>ee.moduleId===b.id);V?V.count++:p.push({moduleId:b.id,count:1})}}this.layoutService.saveLayout({name:l,config:p}),n.push(l)}return n}get canImport(){return this.xml}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz),e.Y36(je.C),e.Y36(Ke))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-import-plans"]],features:[e.qOj],decls:20,vars:2,consts:function(){let t;return t=$localize`:@@cancel:Cancel`,[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-italic","text-info"],[1,"small","text-secondary"],["rows","10",1,"w-100","mt-2",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],t]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Import Plans"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.close()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div"),e._uU(8,"Paste the "),e.TgZ(9,"span",5),e._uU(10,"constructionplans.xml"),e.qZA(),e._uU(11," content below. The plans will be added to your saved layout list."),e.qZA(),e.TgZ(12,"div",6),e._uU(13,"File can be found in Documents\\Egosoft\\X4\\[12345678]\\constructionplans.xml"),e.qZA(),e.TgZ(14,"textarea",7),e.NdJ("ngModelChange",function(p){return o.xml=p}),e.qZA()(),e.TgZ(15,"div",8)(16,"button",9),e.NdJ("click",function(){return o.importPlans()}),e._uU(17,"Import"),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){return o.activeModal.close()}),e.SDv(19,11),e.qZA()()),2&n&&(e.xp6(14),e.Q6J("ngModel",o.xml),e.xp6(2),e.Q6J("disabled",!o.canImport))},dependencies:[ae.Fj,ae.JJ,ae.On],encapsulation:2})}return r})(),tr=(()=>{class r extends it.V{constructor(t){super(),this.activeModal=t}ngOnInit(){}exportPlan(){this.stationName=this.stationName?this.stationName:"New Station";const t=this.exportCore(this),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURI(t)),n.setAttribute("target","_blank"),n.setAttribute("download",`${this.stationName}.xml`),n.click(),n.remove(),this.activeModal.close(t)}exportCore(t){let n="",o=1;const l=Math.random().toString(36).slice(2);for(const S of t.macros){let M=1;for(;M<=S.count;)n+=`\n         <entry index="${o}" macro="${S.macro}">\n         </entry>`,o++,M++}return`<?xml version="1.0" encoding="UTF-8"?>\n   <plans>\n      <plan id="${l}" name="${t.stationName}" description="Buy me a beer, not a coffee">${n}\n      </plan>\n   </plans>`}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.Kz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-export-plan"]],features:[e.qOj],decls:17,vars:1,consts:function(){let t,n;return t=$localize`:@@export:Export`,n=$localize`:@@cancel:Cancel`,[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["rows","1","maxlength","42","placeholder","Station Name",1,"w-100","mt-2",3,"ngModel","ngModelChange","keydown.enter"],[1,"small","text-secondary"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],t,["type","button",1,"btn","btn-secondary",3,"click"],n]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Export Plan"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.close()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div"),e._uU(8," Your construction plan is ready to be exported. "),e.qZA(),e.TgZ(9,"textarea",5),e.NdJ("ngModelChange",function(p){return o.stationName=p})("keydown.enter",function(){return o.exportPlan()}),e.qZA(),e.TgZ(10,"div",6),e._uU(11,"Place file in the folder: Documents\\Egosoft\\X4\\[12345678]\\constructionplan"),e.qZA()(),e.TgZ(12,"div",7)(13,"button",8),e.NdJ("click",function(){return o.exportPlan()}),e.SDv(14,9),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return o.activeModal.close()}),e.SDv(16,11),e.qZA()()),2&n&&(e.xp6(9),e.Q6J("ngModel",o.stationName))},dependencies:[ae.Fj,ae.JJ,ae.nD,ae.On],encapsulation:2})}return r})();var nr=R(1481);function ir(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"span",2),e.TgZ(2,"button",3),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.close(l))}),e.TgZ(3,"span",4),e._uU(4,"\xd7"),e.qZA()()()}if(2&r){const t=i.$implicit;e.Gre("alert alert-",t.type,""),e.xp6(1),e.Q6J("innerHTML",t.content,e.oJD)}}function rr(r,i){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,ir,5,4,"div",1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messages)}}let or=(()=>{class r{close(t){const n=this.messages.indexOf(t);n>=0&&this.messages.splice(n,1)}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-messages"]],inputs:{messages:"messages"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[3,"innerHTML"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(n,o){1&n&&e.YNc(0,rr,2,1,"div",0),2&n&&e.Q6J("ngIf",o.messages&&o.messages.length)},dependencies:[O.sg,O.O5],encapsulation:2})}return r})();function sr(r,i){1&r&&e._UZ(0,"i",12)}function ar(r,i){1&r&&e._UZ(0,"i",13)}function lr(r,i){if(1&r&&(e.ynx(0),e.TgZ(1,"span"),e.SDv(2,17),e.qZA(),e._uU(3,"\xa0"),e.TgZ(4,"strong"),e._uU(5),e.ALo(6,"number"),e.qZA(),e._uU(7,"\xa0"),e.TgZ(8,"span"),e.SDv(9,18),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(5),e.hij("",e.xi3(6,1,t.efficiency,"1.0-0"),"%")}}const Nt=function(r,i){return{"text-danger":r,"text-success":i}};function cr(r,i){if(1&r&&(e.TgZ(0,"tr",9)(1,"td",15)(2,"strong"),e._uU(3),e.qZA(),e._uU(4," x "),e.TgZ(5,"strong"),e._uU(6),e.qZA(),e.YNc(7,lr,10,4,"ng-container",11),e.qZA(),e.TgZ(8,"td",16),e._uU(9),e.ALo(10,"number"),e.qZA()()),2&r){const t=i.$implicit;e.Q6J("ngClass",e.WLB(8,Nt,t.total<0,t.total>0)),e.xp6(3),e.Oqu(t.count),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.total>0),e.xp6(2),e.Oqu(e.xi3(10,5,t.total,"1.0-0"))}}function ur(r,i){if(1&r&&(e.ynx(0),e.YNc(1,cr,11,11,"tr",14),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.items)}}function dr(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",6),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleExpanded(l))}),e.TgZ(2,"td"),e.YNc(3,sr,1,0,"i",7),e.YNc(4,ar,1,0,"i",8),e.TgZ(5,"span",9),e._uU(6),e.qZA()(),e.TgZ(7,"td",10),e._uU(8),e.ALo(9,"number"),e.qZA()(),e.YNc(10,ur,2,1,"ng-container",11),e.BQk()}if(2&r){const t=i.$implicit;e.xp6(3),e.Q6J("ngIf",!t.expanded),e.xp6(1),e.Q6J("ngIf",t.expanded),e.xp6(1),e.Q6J("ngClass",e.WLB(10,Nt,t.amount<0,t.amount>0)),e.xp6(1),e.hij(" ",t.ware.name,""),e.xp6(1),e.Q6J("ngClass",e.WLB(13,Nt,t.amount<0,t.amount>0)),e.xp6(1),e.Oqu(e.xi3(9,7,t.amount,"1.0-0")),e.xp6(2),e.Q6J("ngIf",t.expanded)}}let _r=(()=>{class r{constructor(t,n){this.wareService=t,this.stationSummaryService=n,this.expandState={},this.totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.resources=[],this.sunlight=100,this.workforceSubscription=this.stationSummaryService.partialWorkforceChanged.subscribe(o=>{this.partialWorkforce=o,this.update()})}ngOnChanges(){this.update()}ngOnInit(){}toggleExpanded(t){t.expanded=!t.expanded,this.expandState[t.ware.id]=t.expanded}update(){if(this.totalWorkforce=0,null==this.modules)return;this.totalWorkforce=this.modules.reduce((n,o)=>o.module&&o.module.workForce&&o.module.workForce.max?n+o.count*o.module.workForce.max:n,0);const t=this.modules.reduce((n,o)=>o.module&&o.module.workForce&&o.module.workForce.capacity?n+o.count*o.module.workForce.capacity:n,0);this.totalWorkforceCapacity!=t&&(this.totalWorkforceCapacity=t,this.partialWorkforce=t),this.resources=Et.calculate(this.modules,this.sunlight),this.resources.forEach(n=>{n.expanded=this.expandState[n.items[0].ware.id]}),this.resources.sort((n,o)=>this.wareService.compareWares(n.ware,o.ware))}ngOnDestroy(){this.workforceSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(rt.l),e.Y36(ln))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-station-resources"]],inputs:{modules:"modules",sunlight:"sunlight"},features:[e.TTD],decls:9,vars:1,consts:function(){let t,n,o,l;return t=$localize`:@@resources:Resource`,n=$localize`:@@amount:Amount`,o=$localize`:@@at: at`,l=$localize`:@@efficiency:efficiency`,[[1,"table","table-sm","small"],["scope","col"],t,["scope","col",1,"text-right"],n,[4,"ngFor","ngForOf"],[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],[1,"text-right",3,"ngClass"],[4,"ngIf"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-4"],[1,"text-right"],o,l]},template:function(n,o){1&n&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.SDv(4,2),e.qZA(),e.TgZ(5,"th",3),e.SDv(6,4),e.qZA()()(),e.TgZ(7,"tbody"),e.YNc(8,dr,11,16,"ng-container",5),e.qZA()()),2&n&&(e.xp6(8),e.Q6J("ngForOf",o.resources))},dependencies:[O.mk,O.sg,O.O5,O.JJ],encapsulation:2})}return r})();function hr(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(4);return e.KtG(p.onClick(l))}),e.TgZ(1,"label"),e._uU(2),e.qZA()()}if(2&r){const t=i.$implicit;e.xp6(2),e.Oqu(t.name)}}function fr(r,i){if(1&r&&(e.TgZ(0,"div",6)(1,"label",7)(2,"b"),e._uU(3),e.qZA()(),e.YNc(4,hr,3,1,"div",8),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.modules)}}function pr(r,i){if(1&r&&(e.ynx(0),e.YNc(1,fr,5,2,"div",5),e.BQk()),2&r){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.modules.length>0)}}function mr(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("focus",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFocus())})("blur",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBlur())}),e.YNc(1,pr,2,1,"ng-container",4),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredGroups)}}let gr=(()=>{class r{constructor(){this.id=null,this.groups=[],this.filteredGroups=[],this.selectModule=new e.vpe,this.inputString="",this.visible=!1}ngOnInit(){this.filteredGroups=this.groups.map(t=>Object.assign({},t)),this.setName()}filterModules(t){for(let n=0;n<this.groups.length;n++)this.filteredGroups[n].modules=[...this.groups[n].modules.filter(o=>o.name.trim().toLowerCase().includes(t.trim().toLowerCase()))]}changed(t){t?this.filterModules(t):this.filteredGroups=this.groups.map(n=>Object.assign({},n))}onFocus(){clearTimeout(this.timeout),this.filterModules(this.inputString),this.visible=!0}onBlur(){this.timeout=setTimeout(()=>{this.setName(),this.visible=!1},100)}onClick(t){this.inputString=t.name,this.filterModules(this.inputString),this.selectModule.emit(t.id),this.visible=!1}setName(){this.id&&this.groups.forEach(t=>{const n=t.modules.filter(o=>o.id===this.id)[0];n&&(this.inputString=n.name)})}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-autocomplete"]],inputs:{id:"id",groups:"groups"},outputs:{selectModule:"selectModule"},decls:3,vars:2,consts:function(){let t;return t=$localize`:@@select:( Select )`,[[1,"autocomplete-container"],["type","search","placeholder",t,1,"form-control","form-control-sm",3,"ngModel","ngModelChange","focus","blur"],["tabindex","0","class","autocomplete",3,"focus","blur",4,"ngIf"],["tabindex","0",1,"autocomplete",3,"focus","blur"],[4,"ngFor","ngForOf"],["class","autocomplete__group-container",4,"ngIf"],[1,"autocomplete__group-container"],[1,"autocomplete__group-title"],["class","autocomplete__group-item",3,"click",4,"ngFor","ngForOf"],[1,"autocomplete__group-item",3,"click"]]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(p){return o.inputString=p})("ngModelChange",function(p){return o.changed(p)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),e.qZA(),e.YNc(2,mr,2,1,"div",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngModel",o.inputString),e.xp6(1),e.Q6J("ngIf",o.visible))},dependencies:[O.sg,O.O5,ae.Fj,ae.JJ,ae.On],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative}.autocomplete[_ngcontent-%COMP%]{max-height:40vh;overflow:hidden;overflow-y:scroll;position:absolute;background-color:#444;border-radius:.2rem;border:1px solid #ced4da;z-index:1}.autocomplete__group-title[_ngcontent-%COMP%]{color:#ddd;font-size:1.15em;padding-left:10px}.autocomplete__group-item[_ngcontent-%COMP%]{font-size:1.1em;padding-left:20px;padding-right:10px}.autocomplete__group-item[_ngcontent-%COMP%]:hover{background-color:#0003;cursor:pointer}.autocomplete__group-item[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{cursor:pointer}label[_ngcontent-%COMP%]{margin:0}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button{-webkit-appearance:searchfield-cancel-button}"]})}return r})();function Tr(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.module.name," ")}}function Sr(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr",12)(1,"td"),e.YNc(2,Tr,2,1,"div",13),e.TgZ(3,"div",14)(4,"app-autocomplete",15),e.NdJ("selectModule",function(o){const p=e.CHM(t).$implicit,S=e.oxw();return e.KtG(S.onSelectModule(o,p))}),e.qZA()()(),e.TgZ(5,"td")(6,"div",14)(7,"input",16),e.NdJ("ngModelChange",function(o){const p=e.CHM(t).$implicit;return e.KtG(p.count=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onChange())}),e.qZA()()(),e.TgZ(8,"td"),e._UZ(9,"i",17),e.qZA(),e.TgZ(10,"td")(11,"i",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.removeModule(l))}),e.qZA()()()}if(2&r){const t=i.$implicit,n=e.oxw();e.xp6(4),e.Q6J("id",t.moduleId)("groups",n.wareGroups),e.xp6(3),e.Q6J("ngModel",t.count)}}let Cr=(()=>{class r{constructor(t,n){this.moduleService=t,this.wareService=n,this.change=new e.vpe,this.sunlight=100}ngOnInit(){const t=this.moduleService.getModulesByType(Ne.J.production).reduce((n,o)=>{if(sn.includes(o.id))return n[Ne.J.recycling]=n[Ne.J.recycling]||{name:Ne.J.recycling,group:Ne.J.recycling,modules:[]},n[Ne.J.recycling].modules.push(o),n;for(let l of o.product)n[l.group.id]=n[l.group.id]||{name:l.group.name,group:l.group,modules:[]},n[l.group.id].modules.push(o);return n},[]);this.wareGroups=Object.keys(t).map(n=>t[n]).sort((n,o)=>this.wareService.compareGroups(n.group,o.group));for(const n of Ne.B)this.wareGroups.push({name:n,modules:this.moduleService.getModulesByType(n)})}removeModule(t){const n=this.modules.indexOf(t);n>=0&&(this.modules.splice(n,1),this.onChange())}addModule(){this.modules.push(new qe(this.wareService,this.moduleService))}onChange(){this.change.emit()}backfillModules(){const t=this.modules.find(o=>o.module?.type===Ne.J.habitation);let n="default";for(t&&(n=t.module.makerRace.id);;){const o=Et.calculate(this.modules,this.sunlight);let l=!1;const p=this.modules;for(const S of o){if(S.amount>=0)continue;const M=this.moduleService.getModuleByWare(S.ware.id,n)||this.moduleService.getModuleByWare(S.ware.id);if(null==M)continue;l=!0;const b=M.product.find(Te=>Te.id==S.ware.id),V=b.production.find(Te=>Te.method==n)||b.production.find(Te=>"default"==Te.method),ue=Math.ceil(-S.amount/(V.amount*(3600/V.time))),ve=p.find(Te=>Te.module?.id==M.id);null==ve?p.push(new qe(this.wareService,this.moduleService,M.id,ue)):ve.count+=ue}if(!l)break}this.onChange()}onSelectModule(t,n){this.modules[this.modules.indexOf(n)].moduleId=t,this.onChange()}drop(t){Vt(this.modules,t.previousIndex,t.currentIndex)}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(je.C),e.Y36(rt.l))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-station-modules"]],inputs:{modules:"modules",sunlight:"sunlight"},outputs:{change:"change"},decls:25,vars:1,consts:function(){let t,n;return t=$localize`:@@module:Module`,n=$localize`:@@count:Count`,[[1,"table","table-sm","table-hover","small"],["scope","col"],t,n,["aria-hidden","true",1,"fa","fa-ellipsis-v"],["aria-hidden","true",1,"fa","fa-trash"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".table",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-plus-square"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-list"],["cdkDrag","","cdkDragBoundary",".table"],[4,"cdkDragPreview"],[1,"form-group"],[3,"id","groups","selectModule"],["type","number","placeholder","Module Count","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["cdkDragHandle","",1,"fa","fa-ellipsis-v","move"],["aria-hidden","true",1,"fa","fa-trash","hover",3,"click"]]},template:function(n,o){1&n&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.SDv(4,2),e.qZA(),e.TgZ(5,"th",1),e.SDv(6,3),e.qZA(),e.TgZ(7,"th",1),e._UZ(8,"i",4),e.qZA(),e.TgZ(9,"th",1),e._UZ(10,"i",5),e.qZA()()(),e.TgZ(11,"tbody",6),e.NdJ("cdkDropListDropped",function(p){return o.drop(p)}),e.YNc(12,Sr,12,3,"tr",7),e.qZA(),e.TgZ(13,"tfoot")(14,"tr")(15,"th")(16,"button",8),e.NdJ("click",function(){return o.addModule()}),e._UZ(17,"i",9),e._uU(18,"\xa0Add Module"),e.qZA(),e._uU(19,"\xa0 "),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.backfillModules()}),e._UZ(21,"i",11),e._uU(22,"\xa0"),e.TgZ(23,"span"),e._uU(24,"Autofill Modules"),e.qZA()()()()()()),2&n&&(e.xp6(12),e.Q6J("ngForOf",o.modules))},dependencies:[O.sg,ae.Fj,ae.wV,ae.JJ,ae.qQ,ae.On,Wt,tn,Jt,en,gr],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{background-color:#fff;padding:20px;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.move[_ngcontent-%COMP%]{cursor:move}"]})}return r})();function yr(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.result=null)}),e.TgZ(2,"span",6),e._uU(3,"\xd7"),e.qZA()(),e.TgZ(4,"div"),e._uU(5," Failed to import plans. "),e.qZA()()}}function vr(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1," | "),e.qZA())}function Er(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.selectLayout(l))}),e._uU(2),e.qZA(),e.YNc(3,vr,2,0,"span",0),e.BQk()}if(2&r){const t=i.$implicit,n=i.last;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",!n)}}function Ar(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.result=null)}),e.TgZ(2,"span",6),e._uU(3,"\xd7"),e.qZA()(),e.TgZ(4,"div"),e._uU(5," Imported plans, but errors occurred trying to import some of them. "),e.TgZ(6,"div",8),e.YNc(7,Er,4,2,"ng-container",9),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(7),e.Q6J("ngForOf",t.result.layouts)}}function Nr(r,i){1&r&&(e.TgZ(0,"span"),e._uU(1," | "),e.qZA())}function Mr(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.selectLayout(l))}),e._uU(2),e.qZA(),e.YNc(3,Nr,2,0,"span",0),e.BQk()}if(2&r){const t=i.$implicit,n=i.last;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",!n)}}function Or(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.result=null)}),e.TgZ(2,"span",6),e._uU(3,"\xd7"),e.qZA()(),e.TgZ(4,"div"),e._uU(5," Successfully imported plans "),e.TgZ(6,"div",8),e.YNc(7,Mr,4,2,"ng-container",9),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(7),e.Q6J("ngForOf",t.result.layouts)}}function Ir(r,i){if(1&r&&(e.ynx(0),e.YNc(1,yr,6,0,"div",1),e.YNc(2,Ar,8,1,"div",2),e.YNc(3,Or,8,1,"div",3),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.result.error&&(!t.result.layouts||0===t.result.layouts.length)),e.xp6(1),e.Q6J("ngIf",t.result.error&&t.result.layouts&&t.result.layouts.length>0),e.xp6(1),e.Q6J("ngIf",!t.result.error&&t.result.layouts&&t.result.layouts.length>0)}}let wr=(()=>{class r{constructor(){this.selectPlan=new e.vpe}set result(t){this._result=t}get result(){return this._result}selectLayout(t){this.selectPlan.emit(t)}static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-import-result"]],inputs:{result:"result"},outputs:{selectPlan:"selectPlan"},decls:1,vars:1,consts:[[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"alert","alert-danger"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"alert","alert-warning"],[1,"small"],[4,"ngFor","ngForOf"],[1,"cursor-pointer","link","text-primary",3,"click"],[1,"alert","alert-success"],["type","button","data-dismiss","alert","aria-label","Close",1,"close","pull-right",3,"click"]],template:function(n,o){1&n&&e.YNc(0,Ir,4,3,"ng-container",0),2&n&&e.Q6J("ngIf",o.result)},dependencies:[O.sg,O.O5],encapsulation:2})}return r})();const br=["stationResources","stationSummary"];function xr(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",36),e._UZ(2,"app-messages",37),e.TgZ(3,"app-import-result",38),e.NdJ("selectPlan",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onSelectPlan(o))}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("messages",t.messages),e.xp6(1),e.Q6J("result",t.importResult)}}function Rr(r,i){1&r&&(e.TgZ(0,"span",39),e._uU(1,"Station Modules"),e.qZA())}function Pr(r,i){if(1&r&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.layout.name)}}let Dr=(()=>{class r extends it.V{constructor(t,n,o,l,p,S){super(),this.modal=t,this.route=n,this.layoutService=o,this.titleService=l,this.wareService=p,this.moduleService=S,this.messages=[],this.modules=[],this.sunlight=100}ngOnInit(){this.titleService.setTitle(`${Xi.q} - Station Calculator`),this.route.queryParams.pipe((0,Ve.R)(this.onDestroy)).subscribe(t=>{if(t.l)try{const n=t.l.replace(/-/g,"=").replace(/,/g,"&"),o=nn.parse(n);this.modules=o.map(l=>new qe(this.wareService,this.moduleService,l.module,l.count))}catch(n){console.log(n)}}),0===this.modules.length&&this.modules.push(new qe(this.wareService,this.moduleService))}onChange(){this.components.forEach(t=>t.update())}shareLayout(){const t=this.modal.open(_i),n=this.modules.filter(p=>p.count>0&&p.moduleId).map(p=>({module:p.moduleId,count:p.count})),o=nn.stringify(n).replace(/=/g,"-").replace(/&/g,","),l=window.location.href.split("?")[0];t.componentInstance.url=`${l}?l=${o}`}saveLayoutAs(){this.modal.open(di).result.then(n=>{n&&(this.layout={name:n,resourcesPrice:this.summaryComponent.resourcesPrice,productsPrice:this.summaryComponent.productsPrice,modulesResourcesPrice:this.summaryComponent.modulesResourcesPrice,provideBasicResources:this.summaryComponent.provideBasicResources,provideAllResources:this.summaryComponent.provideAllResources,isHeadquarters:this.summaryComponent.isHq,sunlight:this.sunlight,config:this.getModuleConfig()},this.layoutService.saveLayout(this.layout),this.messages.push({type:rn.success,content:`<strong>${n}</strong> successfully saved.`}))})}saveLayout(){this.layout&&this.layout.name?(this.layout.config=this.getModuleConfig(),this.layout.resourcesPrice=this.summaryComponent.resourcesPrice,this.layout.productsPrice=this.summaryComponent.productsPrice,this.layout.modulesResourcesPrice=this.summaryComponent.modulesResourcesPrice,this.layout.provideBasicResources=this.summaryComponent.provideBasicResources,this.layout.provideAllResources=this.summaryComponent.provideAllResources,this.layout.isHeadquarters=this.summaryComponent.isHq,this.layout.sunlight=this.sunlight,this.layoutService.saveLayout(this.layout),this.messages.push({type:rn.success,content:`<strong>${this.layout.name}</strong> successfully saved.`})):this.saveLayoutAs()}newLayout(){this.layout={name:null,config:[{moduleId:"",count:1}]},this.loadLayoutInternal(this.layout)}loadLayout(){this.modal.open(ui,{size:"lg"}).result.then(n=>{if(n){const o=this.layoutService.getLayout(n.layoutName);if(o)if(n.type==Pe.load)this.layout=o,this.loadLayoutInternal(o);else if(n.type==Pe.add){const l=this.modules.concat([]);this.getModules(o.config).forEach(S=>{const M=l.find(b=>b.moduleId==S.moduleId);null==M?l.push(S):M.count+=S.count}),this.modules=l}}})}importPlans(){this.modal.open(er).result.then(n=>this.importResult=n)}exportPlan(){const t=[];for(const o of this.modules)t.push({macro:o.module.macro,count:o.count});this.modal.open(tr).componentInstance.macros=t}loadLayoutInternal(t){this.modules=this.getModules(t.config),this.summaryComponent.productsPrice=null==t.productsPrice?50:t.productsPrice,this.summaryComponent.modulesResourcesPrice=null==t.modulesResourcesPrice?50:t.modulesResourcesPrice,this.summaryComponent.resourcesPrice=null==t.resourcesPrice?50:t.resourcesPrice,this.summaryComponent.provideBasicResources=t.provideBasicResources,this.summaryComponent.provideAllResources=t.provideAllResources,this.summaryComponent.isHq=t.isHeadquarters,this.sunlight=t.sunlight||100}getModuleConfig(){return this.modules.map(t=>({moduleId:t.moduleId,count:t.count}))}getModules(t){return t.map(n=>new qe(this.wareService,this.moduleService,n.moduleId,n.count))}onSelectPlan(t){const n=this.layoutService.getLayout(t);n&&this.loadLayoutInternal(n)}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(Ae.FF),e.Y36(Ct.gz),e.Y36(Ke),e.Y36(nr.Dx),e.Y36(rt.l),e.Y36(je.C))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-station-calculator"]],viewQuery:function(n,o){if(1&n&&(e.Gf(Ze,7),e.Gf(br,5)),2&n){let l;e.iGM(l=e.CRH())&&(o.summaryComponent=l.first),e.iGM(l=e.CRH())&&(o.components=l)}},features:[e.qOj],decls:69,vars:10,consts:function(){let t,n,o,l,p,S,M;return t=$localize`:@@newLayout:New`,n=$localize`:@@save:Save`,o=$localize`:@@saveAs:Save As`,l=$localize`:@@load:Load`,p=$localize`:@@share:Share`,S=$localize`:@@share:Import`,M=$localize`:@@export:Export`,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-file"],t,["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],n,o,[1,"fa","fa-folder-open"],l,["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-share-square"],p,["type","button",1,"btn","btn-sm","btn-dark",3,"click"],[1,"fa","fa-file-text"],S,M,[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-4","col-sm-12"],[1,"card-title","d-flex","align-items-center"],["class","flex-fill",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"form-label","text-nowrap","px-2"],[1,"input-group"],["type","text","id","sun-light","name","sunlight",1,"form-control",2,"width","70px",3,"ngModel","ngModelChange"],[1,"input-group-text"],[3,"modules","sunlight","change"],[1,"card-title"],[3,"modules","sunlight"],["stationResources",""],["stationSummary",""],[1,"col"],[3,"messages"],[3,"result","selectPlan"],[1,"flex-fill"]]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return o.newLayout()}),e._UZ(5,"i",5),e._uU(6,"\xa0"),e.TgZ(7,"span"),e.SDv(8,6),e.qZA()(),e._uU(9,"\xa0 "),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.saveLayout()}),e._UZ(11,"i",8),e._uU(12,"\xa0"),e.TgZ(13,"span"),e.SDv(14,9),e.qZA()(),e._uU(15,"\xa0 "),e.TgZ(16,"button",7),e.NdJ("click",function(){return o.saveLayoutAs()}),e._UZ(17,"i",8),e._uU(18,"\xa0"),e.TgZ(19,"span"),e.SDv(20,10),e.qZA()(),e._uU(21,"\xa0 "),e.TgZ(22,"button",4),e.NdJ("click",function(){return o.loadLayout()}),e._UZ(23,"i",11),e._uU(24,"\xa0"),e.TgZ(25,"span"),e.SDv(26,12),e.qZA()(),e._uU(27,"\xa0 "),e.TgZ(28,"button",13),e.NdJ("click",function(){return o.shareLayout()}),e._UZ(29,"i",14),e._uU(30,"\xa0"),e.TgZ(31,"span"),e.SDv(32,15),e.qZA()(),e._uU(33,"\xa0 "),e.TgZ(34,"button",16),e.NdJ("click",function(){return o.importPlans()}),e._UZ(35,"i",17),e._uU(36,"\xa0"),e.TgZ(37,"span"),e.SDv(38,18),e.qZA()(),e.TgZ(39,"button",4),e.NdJ("click",function(){return o.exportPlan()}),e._UZ(40,"i",17),e._uU(41,"\xa0"),e.TgZ(42,"span"),e.SDv(43,19),e.qZA()()(),e.TgZ(44,"div",20),e.YNc(45,xr,4,2,"div",21),e.TgZ(46,"div",22)(47,"div",23)(48,"h6",24),e.YNc(49,Rr,2,0,"span",25),e.YNc(50,Pr,2,1,"span",25),e.TgZ(51,"div",26)(52,"label",27),e._uU(53,"Sun Light"),e.qZA(),e.TgZ(54,"div",28)(55,"input",29),e.NdJ("ngModelChange",function(p){return o.sunlight=p}),e.qZA(),e.TgZ(56,"span",30),e._uU(57,"%"),e.qZA()()()(),e.TgZ(58,"app-station-modules",31),e.NdJ("change",function(){return o.onChange()}),e.qZA()(),e.TgZ(59,"div",23)(60,"h6",32),e._uU(61,"Station Resources"),e.qZA(),e._UZ(62,"app-station-resources",33,34),e.qZA(),e.TgZ(64,"div",23)(65,"h6",32),e._uU(66,"Station Summary"),e.qZA(),e._UZ(67,"app-station-summary",33,35),e.qZA()()()()()()),2&n&&(e.xp6(45),e.Q6J("ngIf",o.messages.length||o.importResult),e.xp6(4),e.Q6J("ngIf",!o.layout),e.xp6(1),e.Q6J("ngIf",o.layout),e.xp6(5),e.Q6J("ngModel",o.sunlight),e.xp6(3),e.Q6J("modules",o.modules)("sunlight",o.sunlight),e.xp6(4),e.Q6J("modules",o.modules)("sunlight",o.sunlight),e.xp6(5),e.Q6J("modules",o.modules)("sunlight",o.sunlight))},dependencies:[O.O5,ae.Fj,ae.JJ,ae.On,or,_r,Cr,Ze,wr],encapsulation:2})}return r})(),kr=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[Ct.Bz.forChild([{path:"",component:Dr}]),Ct.Bz]})}return r})(),Fr=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({providers:[Ke],imports:[Ae.bz,O.ez,ae.u5,ri.m,kr,ii]})}return r})()},5343:(he,te)=>{"use strict";te.byteLength=function m(B){var Y=D(B),q=Y[1];return 3*(Y[0]+q)/4-q},te.toByteArray=function W(B){var Y,u,z=D(B),q=z[0],oe=z[1],E=new O(function U(B,Y,z){return 3*(Y+z)/4-z}(0,q,oe)),k=0,h=oe>0?q-4:q;for(u=0;u<h;u+=4)Y=e[B.charCodeAt(u)]<<18|e[B.charCodeAt(u+1)]<<12|e[B.charCodeAt(u+2)]<<6|e[B.charCodeAt(u+3)],E[k++]=Y>>16&255,E[k++]=Y>>8&255,E[k++]=255&Y;return 2===oe&&(Y=e[B.charCodeAt(u)]<<2|e[B.charCodeAt(u+1)]>>4,E[k++]=255&Y),1===oe&&(Y=e[B.charCodeAt(u)]<<10|e[B.charCodeAt(u+1)]<<4|e[B.charCodeAt(u+2)]>>2,E[k++]=Y>>8&255,E[k++]=255&Y),E},te.fromByteArray=function K(B){for(var Y,z=B.length,q=z%3,oe=[],E=16383,k=0,h=z-q;k<h;k+=E)oe.push(G(B,k,k+E>h?h:k+E));return 1===q?oe.push(R[(Y=B[z-1])>>2]+R[Y<<4&63]+"=="):2===q&&oe.push(R[(Y=(B[z-2]<<8)+B[z-1])>>10]+R[Y>>4&63]+R[Y<<2&63]+"="),oe.join("")};for(var R=[],e=[],O=typeof Uint8Array<"u"?Uint8Array:Array,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=0,g=N.length;F<g;++F)R[F]=N[F],e[N.charCodeAt(F)]=F;function D(B){var Y=B.length;if(Y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var z=B.indexOf("=");return-1===z&&(z=Y),[z,z===Y?0:4-z%4]}function L(B){return R[B>>18&63]+R[B>>12&63]+R[B>>6&63]+R[63&B]}function G(B,Y,z){for(var oe=[],E=Y;E<z;E+=3)oe.push(L((B[E]<<16&16711680)+(B[E+1]<<8&65280)+(255&B[E+2])));return oe.join("")}e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63},3172:(he,te,R)=>{"use strict";var e=R(5343),O=R(8461),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;te.Buffer=m,te.SlowBuffer=function E(d){return+d!=d&&(d=0),m.alloc(+d)},te.INSPECT_MAX_BYTES=50;var F=2147483647;function D(d){if(d>F)throw new RangeError('The value "'+d+'" is invalid for option "size"');var s=new Uint8Array(d);return Object.setPrototypeOf(s,m.prototype),s}function m(d,s,a){if("number"==typeof d){if("string"==typeof s)throw new TypeError('The "string" argument must be of type string. Received type number');return G(d)}return U(d,s,a)}function U(d,s,a){if("string"==typeof d)return function K(d,s){if(("string"!=typeof s||""===s)&&(s="utf8"),!m.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|k(d,s),f=D(a),y=f.write(d,s);return y!==a&&(f=f.slice(0,y)),f}(d,s);if(ArrayBuffer.isView(d))return function Y(d){if(X(d,Uint8Array)){var s=new Uint8Array(d);return z(s.buffer,s.byteOffset,s.byteLength)}return B(d)}(d);if(null==d)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(X(d,ArrayBuffer)||d&&X(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(d,SharedArrayBuffer)||d&&X(d.buffer,SharedArrayBuffer)))return z(d,s,a);if("number"==typeof d)throw new TypeError('The "value" argument must not be of type number. Received type number');var f=d.valueOf&&d.valueOf();if(null!=f&&f!==d)return m.from(f,s,a);var y=function q(d){if(m.isBuffer(d)){var s=0|oe(d.length),a=D(s);return 0===a.length||d.copy(a,0,0,s),a}return void 0!==d.length?"number"!=typeof d.length||me(d.length)?D(0):B(d):"Buffer"===d.type&&Array.isArray(d.data)?B(d.data):void 0}(d);if(y)return y;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof d[Symbol.toPrimitive])return m.from(d[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}function W(d){if("number"!=typeof d)throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function G(d){return W(d),D(d<0?0:0|oe(d))}function B(d){for(var s=d.length<0?0:0|oe(d.length),a=D(s),f=0;f<s;f+=1)a[f]=255&d[f];return a}function z(d,s,a){if(s<0||d.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var f;return f=void 0===s&&void 0===a?new Uint8Array(d):void 0===a?new Uint8Array(d,s):new Uint8Array(d,s,a),Object.setPrototypeOf(f,m.prototype),f}function oe(d){if(d>=F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");return 0|d}function k(d,s){if(m.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||X(d,ArrayBuffer))return d.byteLength;if("string"!=typeof d)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);var a=d.length,f=arguments.length>2&&!0===arguments[2];if(!f&&0===a)return 0;for(var y=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return c(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return J(d).length;default:if(y)return f?-1:c(d).length;s=(""+s).toLowerCase(),y=!0}}function h(d,s,a){var f=!1;if((void 0===s||s<0)&&(s=0),s>this.length||((void 0===a||a>this.length)&&(a=this.length),a<=0)||(a>>>=0)<=(s>>>=0))return"";for(d||(d="utf8");;)switch(d){case"hex":return we(this,s,a);case"utf8":case"utf-8":return Ee(this,s,a);case"ascii":return ne(this,s,a);case"latin1":case"binary":return Xe(this,s,a);case"base64":return Me(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,s,a);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),f=!0}}function u(d,s,a){var f=d[s];d[s]=d[a],d[a]=f}function v(d,s,a,f,y){if(0===d.length)return-1;if("string"==typeof a?(f=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),me(a=+a)&&(a=y?0:d.length-1),a<0&&(a=d.length+a),a>=d.length){if(y)return-1;a=d.length-1}else if(a<0){if(!y)return-1;a=0}if("string"==typeof s&&(s=m.from(s,f)),m.isBuffer(s))return 0===s.length?-1:P(d,s,a,f,y);if("number"==typeof s)return s&=255,"function"==typeof Uint8Array.prototype.indexOf?y?Uint8Array.prototype.indexOf.call(d,s,a):Uint8Array.prototype.lastIndexOf.call(d,s,a):P(d,[s],a,f,y);throw new TypeError("val must be string, number or Buffer")}function P(d,s,a,f,y){var ce,w=1,x=d.length,Q=s.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(d.length<2||s.length<2)return-1;w=2,x/=2,Q/=2,a/=2}function ie(st,at){return 1===w?st[at]:st.readUInt16BE(at*w)}if(y){var Se=-1;for(ce=a;ce<x;ce++)if(ie(d,ce)===ie(s,-1===Se?0:ce-Se)){if(-1===Se&&(Se=ce),ce-Se+1===Q)return Se*w}else-1!==Se&&(ce-=ce-Se),Se=-1}else for(a+Q>x&&(a=x-Q),ce=a;ce>=0;ce--){for(var fe=!0,Ye=0;Ye<Q;Ye++)if(ie(d,ce+Ye)!==ie(s,Ye)){fe=!1;break}if(fe)return ce}return-1}function $(d,s,a,f){a=Number(a)||0;var y=d.length-a;f?(f=Number(f))>y&&(f=y):f=y;var w=s.length;f>w/2&&(f=w/2);for(var x=0;x<f;++x){var Q=parseInt(s.substr(2*x,2),16);if(me(Q))return x;d[a+x]=Q}return x}function T(d,s,a,f){return le(c(s,d.length-a),d,a,f)}function j(d,s,a,f){return le(function I(d){for(var s=[],a=0;a<d.length;++a)s.push(255&d.charCodeAt(a));return s}(s),d,a,f)}function re(d,s,a,f){return le(J(s),d,a,f)}function _e(d,s,a,f){return le(function C(d,s){for(var a,f,w=[],x=0;x<d.length&&!((s-=2)<0);++x)f=(a=d.charCodeAt(x))>>8,w.push(a%256),w.push(f);return w}(s,d.length-a),d,a,f)}function Me(d,s,a){return e.fromByteArray(0===s&&a===d.length?d:d.slice(s,a))}function Ee(d,s,a){a=Math.min(d.length,a);for(var f=[],y=s;y<a;){var ie,ce,Se,fe,w=d[y],x=null,Q=w>239?4:w>223?3:w>191?2:1;if(y+Q<=a)switch(Q){case 1:w<128&&(x=w);break;case 2:128==(192&(ie=d[y+1]))&&(fe=(31&w)<<6|63&ie)>127&&(x=fe);break;case 3:ce=d[y+2],128==(192&(ie=d[y+1]))&&128==(192&ce)&&(fe=(15&w)<<12|(63&ie)<<6|63&ce)>2047&&(fe<55296||fe>57343)&&(x=fe);break;case 4:ce=d[y+2],Se=d[y+3],128==(192&(ie=d[y+1]))&&128==(192&ce)&&128==(192&Se)&&(fe=(15&w)<<18|(63&ie)<<12|(63&ce)<<6|63&Se)>65535&&fe<1114112&&(x=fe)}null===x?(x=65533,Q=1):x>65535&&(f.push((x-=65536)>>>10&1023|55296),x=56320|1023&x),f.push(x),y+=Q}return function De(d){var s=d.length;if(s<=Oe)return String.fromCharCode.apply(String,d);for(var a="",f=0;f<s;)a+=String.fromCharCode.apply(String,d.slice(f,f+=Oe));return a}(f)}te.kMaxLength=F,!(m.TYPED_ARRAY_SUPPORT=function g(){try{var d=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(d,s),42===d.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(d,s,a){return U(d,s,a)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(d,s,a){return function L(d,s,a){return W(d),d<=0?D(d):void 0!==s?"string"==typeof a?D(d).fill(s,a):D(d).fill(s):D(d)}(d,s,a)},m.allocUnsafe=function(d){return G(d)},m.allocUnsafeSlow=function(d){return G(d)},m.isBuffer=function(s){return null!=s&&!0===s._isBuffer&&s!==m.prototype},m.compare=function(s,a){if(X(s,Uint8Array)&&(s=m.from(s,s.offset,s.byteLength)),X(a,Uint8Array)&&(a=m.from(a,a.offset,a.byteLength)),!m.isBuffer(s)||!m.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var f=s.length,y=a.length,w=0,x=Math.min(f,y);w<x;++w)if(s[w]!==a[w]){f=s[w],y=a[w];break}return f<y?-1:y<f?1:0},m.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(0===s.length)return m.alloc(0);var f;if(void 0===a)for(a=0,f=0;f<s.length;++f)a+=s[f].length;var y=m.allocUnsafe(a),w=0;for(f=0;f<s.length;++f){var x=s[f];if(X(x,Uint8Array))w+x.length>y.length?m.from(x).copy(y,w):Uint8Array.prototype.set.call(y,x,w);else{if(!m.isBuffer(x))throw new TypeError('"list" argument must be an Array of Buffers');x.copy(y,w)}w+=x.length}return y},m.byteLength=k,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var s=this.length;if(s%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)u(this,a,a+1);return this},m.prototype.swap32=function(){var s=this.length;if(s%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)u(this,a,a+3),u(this,a+1,a+2);return this},m.prototype.swap64=function(){var s=this.length;if(s%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)u(this,a,a+7),u(this,a+1,a+6),u(this,a+2,a+5),u(this,a+3,a+4);return this},m.prototype.toLocaleString=m.prototype.toString=function(){var s=this.length;return 0===s?"":0===arguments.length?Ee(this,0,s):h.apply(this,arguments)},m.prototype.equals=function(s){if(!m.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s||0===m.compare(this,s)},m.prototype.inspect=function(){var s="",a=te.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},N&&(m.prototype[N]=m.prototype.inspect),m.prototype.compare=function(s,a,f,y,w){if(X(s,Uint8Array)&&(s=m.from(s,s.offset,s.byteLength)),!m.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(void 0===a&&(a=0),void 0===f&&(f=s?s.length:0),void 0===y&&(y=0),void 0===w&&(w=this.length),a<0||f>s.length||y<0||w>this.length)throw new RangeError("out of range index");if(y>=w&&a>=f)return 0;if(y>=w)return-1;if(a>=f)return 1;if(this===s)return 0;for(var x=(w>>>=0)-(y>>>=0),Q=(f>>>=0)-(a>>>=0),ie=Math.min(x,Q),ce=this.slice(y,w),Se=s.slice(a,f),fe=0;fe<ie;++fe)if(ce[fe]!==Se[fe]){x=ce[fe],Q=Se[fe];break}return x<Q?-1:Q<x?1:0},m.prototype.includes=function(s,a,f){return-1!==this.indexOf(s,a,f)},m.prototype.indexOf=function(s,a,f){return v(this,s,a,f,!0)},m.prototype.lastIndexOf=function(s,a,f){return v(this,s,a,f,!1)},m.prototype.write=function(s,a,f,y){if(void 0===a)y="utf8",f=this.length,a=0;else if(void 0===f&&"string"==typeof a)y=a,f=this.length,a=0;else{if(!isFinite(a))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");a>>>=0,isFinite(f)?(f>>>=0,void 0===y&&(y="utf8")):(y=f,f=void 0)}var w=this.length-a;if((void 0===f||f>w)&&(f=w),s.length>0&&(f<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");for(var x=!1;;)switch(y){case"hex":return $(this,s,a,f);case"utf8":case"utf-8":return T(this,s,a,f);case"ascii":case"latin1":case"binary":return j(this,s,a,f);case"base64":return re(this,s,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,s,a,f);default:if(x)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),x=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Oe=4096;function ne(d,s,a){var f="";a=Math.min(d.length,a);for(var y=s;y<a;++y)f+=String.fromCharCode(127&d[y]);return f}function Xe(d,s,a){var f="";a=Math.min(d.length,a);for(var y=s;y<a;++y)f+=String.fromCharCode(d[y]);return f}function we(d,s,a){var f=d.length;(!s||s<0)&&(s=0),(!a||a<0||a>f)&&(a=f);for(var y="",w=s;w<a;++w)y+=ge[d[w]];return y}function Re(d,s,a){for(var f=d.slice(s,a),y="",w=0;w<f.length-1;w+=2)y+=String.fromCharCode(f[w]+256*f[w+1]);return y}function se(d,s,a){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(d+s>a)throw new RangeError("Trying to access beyond buffer length")}function pe(d,s,a,f,y,w){if(!m.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>y||s<w)throw new RangeError('"value" argument is out of bounds');if(a+f>d.length)throw new RangeError("Index out of range")}function ke(d,s,a,f,y,w){if(a+f>d.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function be(d,s,a,f,y){return s=+s,a>>>=0,y||ke(d,0,a,4),O.write(d,s,a,f,23,4),a+4}function xe(d,s,a,f,y){return s=+s,a>>>=0,y||ke(d,0,a,8),O.write(d,s,a,f,52,8),a+8}m.prototype.slice=function(s,a){var f=this.length;(s=~~s)<0?(s+=f)<0&&(s=0):s>f&&(s=f),(a=void 0===a?f:~~a)<0?(a+=f)<0&&(a=0):a>f&&(a=f),a<s&&(a=s);var y=this.subarray(s,a);return Object.setPrototypeOf(y,m.prototype),y},m.prototype.readUintLE=m.prototype.readUIntLE=function(s,a,f){s>>>=0,a>>>=0,f||se(s,a,this.length);for(var y=this[s],w=1,x=0;++x<a&&(w*=256);)y+=this[s+x]*w;return y},m.prototype.readUintBE=m.prototype.readUIntBE=function(s,a,f){s>>>=0,a>>>=0,f||se(s,a,this.length);for(var y=this[s+--a],w=1;a>0&&(w*=256);)y+=this[s+--a]*w;return y},m.prototype.readUint8=m.prototype.readUInt8=function(s,a){return s>>>=0,a||se(s,1,this.length),this[s]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(s,a){return s>>>=0,a||se(s,2,this.length),this[s]|this[s+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(s,a){return s>>>=0,a||se(s,2,this.length),this[s]<<8|this[s+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(s,a){return s>>>=0,a||se(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+16777216*this[s+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(s,a){return s>>>=0,a||se(s,4,this.length),16777216*this[s]+(this[s+1]<<16|this[s+2]<<8|this[s+3])},m.prototype.readIntLE=function(s,a,f){s>>>=0,a>>>=0,f||se(s,a,this.length);for(var y=this[s],w=1,x=0;++x<a&&(w*=256);)y+=this[s+x]*w;return y>=(w*=128)&&(y-=Math.pow(2,8*a)),y},m.prototype.readIntBE=function(s,a,f){s>>>=0,a>>>=0,f||se(s,a,this.length);for(var y=a,w=1,x=this[s+--y];y>0&&(w*=256);)x+=this[s+--y]*w;return x>=(w*=128)&&(x-=Math.pow(2,8*a)),x},m.prototype.readInt8=function(s,a){return s>>>=0,a||se(s,1,this.length),128&this[s]?-1*(255-this[s]+1):this[s]},m.prototype.readInt16LE=function(s,a){s>>>=0,a||se(s,2,this.length);var f=this[s]|this[s+1]<<8;return 32768&f?4294901760|f:f},m.prototype.readInt16BE=function(s,a){s>>>=0,a||se(s,2,this.length);var f=this[s+1]|this[s]<<8;return 32768&f?4294901760|f:f},m.prototype.readInt32LE=function(s,a){return s>>>=0,a||se(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},m.prototype.readInt32BE=function(s,a){return s>>>=0,a||se(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},m.prototype.readFloatLE=function(s,a){return s>>>=0,a||se(s,4,this.length),O.read(this,s,!0,23,4)},m.prototype.readFloatBE=function(s,a){return s>>>=0,a||se(s,4,this.length),O.read(this,s,!1,23,4)},m.prototype.readDoubleLE=function(s,a){return s>>>=0,a||se(s,8,this.length),O.read(this,s,!0,52,8)},m.prototype.readDoubleBE=function(s,a){return s>>>=0,a||se(s,8,this.length),O.read(this,s,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(s,a,f,y){s=+s,a>>>=0,f>>>=0,y||pe(this,s,a,f,Math.pow(2,8*f)-1,0);var x=1,Q=0;for(this[a]=255&s;++Q<f&&(x*=256);)this[a+Q]=s/x&255;return a+f},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(s,a,f,y){s=+s,a>>>=0,f>>>=0,y||pe(this,s,a,f,Math.pow(2,8*f)-1,0);var x=f-1,Q=1;for(this[a+x]=255&s;--x>=0&&(Q*=256);)this[a+x]=s/Q&255;return a+f},m.prototype.writeUint8=m.prototype.writeUInt8=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,1,255,0),this[a]=255&s,a+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,2,65535,0),this[a]=255&s,this[a+1]=s>>>8,a+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=255&s,a+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=255&s,a+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=255&s,a+4},m.prototype.writeIntLE=function(s,a,f,y){if(s=+s,a>>>=0,!y){var w=Math.pow(2,8*f-1);pe(this,s,a,f,w-1,-w)}var x=0,Q=1,ie=0;for(this[a]=255&s;++x<f&&(Q*=256);)s<0&&0===ie&&0!==this[a+x-1]&&(ie=1),this[a+x]=(s/Q>>0)-ie&255;return a+f},m.prototype.writeIntBE=function(s,a,f,y){if(s=+s,a>>>=0,!y){var w=Math.pow(2,8*f-1);pe(this,s,a,f,w-1,-w)}var x=f-1,Q=1,ie=0;for(this[a+x]=255&s;--x>=0&&(Q*=256);)s<0&&0===ie&&0!==this[a+x+1]&&(ie=1),this[a+x]=(s/Q>>0)-ie&255;return a+f},m.prototype.writeInt8=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=255&s,a+1},m.prototype.writeInt16LE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,2,32767,-32768),this[a]=255&s,this[a+1]=s>>>8,a+2},m.prototype.writeInt16BE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=255&s,a+2},m.prototype.writeInt32LE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,4,2147483647,-2147483648),this[a]=255&s,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},m.prototype.writeInt32BE=function(s,a,f){return s=+s,a>>>=0,f||pe(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=255&s,a+4},m.prototype.writeFloatLE=function(s,a,f){return be(this,s,a,!0,f)},m.prototype.writeFloatBE=function(s,a,f){return be(this,s,a,!1,f)},m.prototype.writeDoubleLE=function(s,a,f){return xe(this,s,a,!0,f)},m.prototype.writeDoubleBE=function(s,a,f){return xe(this,s,a,!1,f)},m.prototype.copy=function(s,a,f,y){if(!m.isBuffer(s))throw new TypeError("argument should be a Buffer");if(f||(f=0),!y&&0!==y&&(y=this.length),a>=s.length&&(a=s.length),a||(a=0),y>0&&y<f&&(y=f),y===f||0===s.length||0===this.length)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),s.length-a<y-f&&(y=s.length-a+f);var w=y-f;return this===s&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(a,f,y):Uint8Array.prototype.set.call(s,this.subarray(f,y),a),w},m.prototype.fill=function(s,a,f,y){if("string"==typeof s){if("string"==typeof a?(y=a,a=0,f=this.length):"string"==typeof f&&(y=f,f=this.length),void 0!==y&&"string"!=typeof y)throw new TypeError("encoding must be a string");if("string"==typeof y&&!m.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(1===s.length){var w=s.charCodeAt(0);("utf8"===y&&w<128||"latin1"===y)&&(s=w)}}else"number"==typeof s?s&=255:"boolean"==typeof s&&(s=Number(s));if(a<0||this.length<a||this.length<f)throw new RangeError("Out of range index");if(f<=a)return this;var x;if(a>>>=0,f=void 0===f?this.length:f>>>0,s||(s=0),"number"==typeof s)for(x=a;x<f;++x)this[x]=s;else{var Q=m.isBuffer(s)?s:m.from(s,y),ie=Q.length;if(0===ie)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(x=0;x<f-a;++x)this[x+a]=Q[x%ie]}return this};var $e=/[^+/0-9A-Za-z-_]/g;function c(d,s){s=s||1/0;for(var a,f=d.length,y=null,w=[],x=0;x<f;++x){if((a=d.charCodeAt(x))>55295&&a<57344){if(!y){if(a>56319){(s-=3)>-1&&w.push(239,191,189);continue}if(x+1===f){(s-=3)>-1&&w.push(239,191,189);continue}y=a;continue}if(a<56320){(s-=3)>-1&&w.push(239,191,189),y=a;continue}a=65536+(y-55296<<10|a-56320)}else y&&(s-=3)>-1&&w.push(239,191,189);if(y=null,a<128){if((s-=1)<0)break;w.push(a)}else if(a<2048){if((s-=2)<0)break;w.push(a>>6|192,63&a|128)}else if(a<65536){if((s-=3)<0)break;w.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;w.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return w}function J(d){return e.toByteArray(function _(d){if((d=(d=d.split("=")[0]).trim().replace($e,"")).length<2)return"";for(;d.length%4!=0;)d+="=";return d}(d))}function le(d,s,a,f){for(var y=0;y<f&&!(y+a>=s.length||y>=d.length);++y)s[y+a]=d[y];return y}function X(d,s){return d instanceof s||null!=d&&null!=d.constructor&&null!=d.constructor.name&&d.constructor.name===s.name}function me(d){return d!=d}var ge=function(){for(var d="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var f=16*a,y=0;y<16;++y)s[f+y]=d[a]+d[y];return s}()},8461:(he,te)=>{te.read=function(R,e,O,N,F){var g,D,m=8*F-N-1,U=(1<<m)-1,W=U>>1,L=-7,G=O?F-1:0,K=O?-1:1,B=R[e+G];for(G+=K,g=B&(1<<-L)-1,B>>=-L,L+=m;L>0;g=256*g+R[e+G],G+=K,L-=8);for(D=g&(1<<-L)-1,g>>=-L,L+=N;L>0;D=256*D+R[e+G],G+=K,L-=8);if(0===g)g=1-W;else{if(g===U)return D?NaN:1/0*(B?-1:1);D+=Math.pow(2,N),g-=W}return(B?-1:1)*D*Math.pow(2,g-N)},te.write=function(R,e,O,N,F,g){var D,m,U,W=8*g-F-1,L=(1<<W)-1,G=L>>1,K=23===F?Math.pow(2,-24)-Math.pow(2,-77):0,B=N?0:g-1,Y=N?1:-1,z=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(m=isNaN(e)?1:0,D=L):(D=Math.floor(Math.log(e)/Math.LN2),e*(U=Math.pow(2,-D))<1&&(D--,U*=2),(e+=D+G>=1?K/U:K*Math.pow(2,1-G))*U>=2&&(D++,U/=2),D+G>=L?(m=0,D=L):D+G>=1?(m=(e*U-1)*Math.pow(2,F),D+=G):(m=e*Math.pow(2,G-1)*Math.pow(2,F),D=0));F>=8;R[O+B]=255&m,B+=Y,m/=256,F-=8);for(D=D<<F|m,W+=F;W>0;R[O+B]=255&D,B+=Y,D/=256,W-=8);R[O+B-Y]|=128*z}},3502:(he,te,R)=>{var e=R(3172),O=e.Buffer;function N(g,D){for(var m in g)D[m]=g[m]}function F(g,D,m){return O(g,D,m)}O.from&&O.alloc&&O.allocUnsafe&&O.allocUnsafeSlow?he.exports=e:(N(e,te),te.Buffer=F),F.prototype=Object.create(O.prototype),N(O,F),F.from=function(g,D,m){if("number"==typeof g)throw new TypeError("Argument must not be a number");return O(g,D,m)},F.alloc=function(g,D,m){if("number"!=typeof g)throw new TypeError("Argument must be a number");var U=O(g);return void 0!==D?"string"==typeof m?U.fill(D,m):U.fill(D):U.fill(0),U},F.allocUnsafe=function(g){if("number"!=typeof g)throw new TypeError("Argument must be a number");return O(g)},F.allocUnsafeSlow=function(g){if("number"!=typeof g)throw new TypeError("Argument must be a number");return e.SlowBuffer(g)}},1503:(he,te,R)=>{!function(e){e.parser=function(_,c){return new N(_,c)},e.SAXParser=N,e.SAXStream=L,e.createStream=function W(_,c){return new L(_,c)},e.MAX_BUFFER_LENGTH=65536;var m,O=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function N(_,c){if(!(this instanceof N))return new N(_,c);var I=this;(function g(_){for(var c=0,I=O.length;c<I;c++)_[O[c]]=""})(I),I.q=I.c="",I.bufferCheckPosition=e.MAX_BUFFER_LENGTH,I.opt=c||{},I.opt.lowercase=I.opt.lowercase||I.opt.lowercasetags,I.looseCase=I.opt.lowercase?"toLowerCase":"toUpperCase",I.tags=[],I.closed=I.closedRoot=I.sawRoot=!1,I.tag=I.error=null,I.strict=!!_,I.noscript=!(!_&&!I.opt.noscript),I.state=T.BEGIN,I.strictEntities=I.opt.strictEntities,I.ENTITIES=Object.create(I.strictEntities?e.XML_ENTITIES:e.ENTITIES),I.attribList=[],I.opt.xmlns&&(I.ns=Object.create(z)),I.trackPosition=!1!==I.opt.position,I.trackPosition&&(I.position=I.line=I.column=0),re(I,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(_){function c(){}return c.prototype=_,new c}),Object.keys||(Object.keys=function(_){var c=[];for(var I in _)_.hasOwnProperty(I)&&c.push(I);return c}),N.prototype={end:function(){De(this)},write:function $e(_){var c=this;if(this.error)throw this.error;if(c.closed)return Oe(c,"Cannot write after close. Assign an onready handler.");if(null===_)return De(c);"object"==typeof _&&(_=_.toString());for(var I=0,C="";C=xe(_,I++),c.c=C,C;)switch(c.trackPosition&&(c.position++,"\n"===C?(c.line++,c.column=0):c.column++),c.state){case T.BEGIN:if(c.state=T.BEGIN_WHITESPACE,"\ufeff"===C)continue;be(c,C);continue;case T.BEGIN_WHITESPACE:be(c,C);continue;case T.TEXT:if(c.sawRoot&&!c.closedRoot){for(var J=I-1;C&&"<"!==C&&"&"!==C;)(C=xe(_,I++))&&c.trackPosition&&(c.position++,"\n"===C?(c.line++,c.column=0):c.column++);c.textNode+=_.substring(J,I-1)}"<"!==C||c.sawRoot&&c.closedRoot&&!c.strict?(!h(C)&&(!c.sawRoot||c.closedRoot)&&ne(c,"Text data outside of root node."),"&"===C?c.state=T.TEXT_ENTITY:c.textNode+=C):(c.state=T.OPEN_WAKA,c.startTagPosition=c.position);continue;case T.SCRIPT:"<"===C?c.state=T.SCRIPT_ENDING:c.script+=C;continue;case T.SCRIPT_ENDING:"/"===C?c.state=T.CLOSE_TAG:(c.script+="<"+C,c.state=T.SCRIPT);continue;case T.OPEN_WAKA:"!"===C?(c.state=T.SGML_DECL,c.sgmlDecl=""):h(C)||(P(q,C)?(c.state=T.OPEN_TAG,c.tagName=C):"/"===C?(c.state=T.CLOSE_TAG,c.tagName=""):"?"===C?(c.state=T.PROC_INST,c.procInstName=c.procInstBody=""):(ne(c,"Unencoded <"),c.startTagPosition+1<c.position&&(C=new Array(c.position-c.startTagPosition).join(" ")+C),c.textNode+="<"+C,c.state=T.TEXT));continue;case T.SGML_DECL:(c.sgmlDecl+C).toUpperCase()===G?(_e(c,"onopencdata"),c.state=T.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+C==="--"?(c.state=T.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+C).toUpperCase()===K?(c.state=T.DOCTYPE,(c.doctype||c.sawRoot)&&ne(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):">"===C?(_e(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=T.TEXT):(u(C)&&(c.state=T.SGML_DECL_QUOTED),c.sgmlDecl+=C);continue;case T.SGML_DECL_QUOTED:C===c.q&&(c.state=T.SGML_DECL,c.q=""),c.sgmlDecl+=C;continue;case T.DOCTYPE:">"===C?(c.state=T.TEXT,_e(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=C,"["===C?c.state=T.DOCTYPE_DTD:u(C)&&(c.state=T.DOCTYPE_QUOTED,c.q=C));continue;case T.DOCTYPE_QUOTED:c.doctype+=C,C===c.q&&(c.q="",c.state=T.DOCTYPE);continue;case T.DOCTYPE_DTD:c.doctype+=C,"]"===C?c.state=T.DOCTYPE:u(C)&&(c.state=T.DOCTYPE_DTD_QUOTED,c.q=C);continue;case T.DOCTYPE_DTD_QUOTED:c.doctype+=C,C===c.q&&(c.state=T.DOCTYPE_DTD,c.q="");continue;case T.COMMENT:"-"===C?c.state=T.COMMENT_ENDING:c.comment+=C;continue;case T.COMMENT_ENDING:"-"===C?(c.state=T.COMMENT_ENDED,c.comment=Ee(c.opt,c.comment),c.comment&&_e(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+C,c.state=T.COMMENT);continue;case T.COMMENT_ENDED:">"!==C?(ne(c,"Malformed comment"),c.comment+="--"+C,c.state=T.COMMENT):c.state=T.TEXT;continue;case T.CDATA:"]"===C?c.state=T.CDATA_ENDING:c.cdata+=C;continue;case T.CDATA_ENDING:"]"===C?c.state=T.CDATA_ENDING_2:(c.cdata+="]"+C,c.state=T.CDATA);continue;case T.CDATA_ENDING_2:">"===C?(c.cdata&&_e(c,"oncdata",c.cdata),_e(c,"onclosecdata"),c.cdata="",c.state=T.TEXT):"]"===C?c.cdata+="]":(c.cdata+="]]"+C,c.state=T.CDATA);continue;case T.PROC_INST:"?"===C?c.state=T.PROC_INST_ENDING:h(C)?c.state=T.PROC_INST_BODY:c.procInstName+=C;continue;case T.PROC_INST_BODY:if(!c.procInstBody&&h(C))continue;"?"===C?c.state=T.PROC_INST_ENDING:c.procInstBody+=C;continue;case T.PROC_INST_ENDING:">"===C?(_e(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=T.TEXT):(c.procInstBody+="?"+C,c.state=T.PROC_INST_BODY);continue;case T.OPEN_TAG:P(oe,C)?c.tagName+=C:(Xe(c),">"===C?se(c):"/"===C?c.state=T.OPEN_TAG_SLASH:(h(C)||ne(c,"Invalid character in tag name"),c.state=T.ATTRIB));continue;case T.OPEN_TAG_SLASH:">"===C?(se(c,!0),pe(c)):(ne(c,"Forward-slash in opening tag not followed by >"),c.state=T.ATTRIB);continue;case T.ATTRIB:if(h(C))continue;">"===C?se(c):"/"===C?c.state=T.OPEN_TAG_SLASH:P(q,C)?(c.attribName=C,c.attribValue="",c.state=T.ATTRIB_NAME):ne(c,"Invalid attribute name");continue;case T.ATTRIB_NAME:"="===C?c.state=T.ATTRIB_VALUE:">"===C?(ne(c,"Attribute without value"),c.attribValue=c.attribName,Re(c),se(c)):h(C)?c.state=T.ATTRIB_NAME_SAW_WHITE:P(oe,C)?c.attribName+=C:ne(c,"Invalid attribute name");continue;case T.ATTRIB_NAME_SAW_WHITE:if("="===C)c.state=T.ATTRIB_VALUE;else{if(h(C))continue;ne(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",_e(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",">"===C?se(c):P(q,C)?(c.attribName=C,c.state=T.ATTRIB_NAME):(ne(c,"Invalid attribute name"),c.state=T.ATTRIB)}continue;case T.ATTRIB_VALUE:if(h(C))continue;u(C)?(c.q=C,c.state=T.ATTRIB_VALUE_QUOTED):(ne(c,"Unquoted attribute value"),c.state=T.ATTRIB_VALUE_UNQUOTED,c.attribValue=C);continue;case T.ATTRIB_VALUE_QUOTED:if(C!==c.q){"&"===C?c.state=T.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=C;continue}Re(c),c.q="",c.state=T.ATTRIB_VALUE_CLOSED;continue;case T.ATTRIB_VALUE_CLOSED:h(C)?c.state=T.ATTRIB:">"===C?se(c):"/"===C?c.state=T.OPEN_TAG_SLASH:P(q,C)?(ne(c,"No whitespace between attributes"),c.attribName=C,c.attribValue="",c.state=T.ATTRIB_NAME):ne(c,"Invalid attribute name");continue;case T.ATTRIB_VALUE_UNQUOTED:if(!v(C)){"&"===C?c.state=T.ATTRIB_VALUE_ENTITY_U:c.attribValue+=C;continue}Re(c),">"===C?se(c):c.state=T.ATTRIB;continue;case T.CLOSE_TAG:if(c.tagName)">"===C?pe(c):P(oe,C)?c.tagName+=C:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=T.SCRIPT):(h(C)||ne(c,"Invalid tagname in closing tag"),c.state=T.CLOSE_TAG_SAW_WHITE);else{if(h(C))continue;$(q,C)?c.script?(c.script+="</"+C,c.state=T.SCRIPT):ne(c,"Invalid tagname in closing tag."):c.tagName=C}continue;case T.CLOSE_TAG_SAW_WHITE:if(h(C))continue;">"===C?pe(c):ne(c,"Invalid characters in closing tag");continue;case T.TEXT_ENTITY:case T.ATTRIB_VALUE_ENTITY_Q:case T.ATTRIB_VALUE_ENTITY_U:var X,me;switch(c.state){case T.TEXT_ENTITY:X=T.TEXT,me="textNode";break;case T.ATTRIB_VALUE_ENTITY_Q:X=T.ATTRIB_VALUE_QUOTED,me="attribValue";break;case T.ATTRIB_VALUE_ENTITY_U:X=T.ATTRIB_VALUE_UNQUOTED,me="attribValue"}";"===C?(c[me]+=ke(c),c.entity="",c.state=X):P(c.entity.length?k:E,C)?c.entity+=C:(ne(c,"Invalid character in entity name"),c[me]+="&"+c.entity+C,c.entity="",c.state=X);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&function F(_){for(var c=Math.max(e.MAX_BUFFER_LENGTH,10),I=0,C=0,J=O.length;C<J;C++){var le=_[O[C]].length;if(le>c)switch(O[C]){case"textNode":Me(_);break;case"cdata":_e(_,"oncdata",_.cdata),_.cdata="";break;case"script":_e(_,"onscript",_.script),_.script="";break;default:Oe(_,"Max buffer length exceeded: "+O[C])}I=Math.max(I,le)}_.bufferCheckPosition=e.MAX_BUFFER_LENGTH-I+_.position}(c),c},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function D(_){Me(_),""!==_.cdata&&(_e(_,"oncdata",_.cdata),_.cdata=""),""!==_.script&&(_e(_,"onscript",_.script),_.script="")}(this)}};try{m=Object(function(){var c=new Error("Cannot find module 'stream'");throw c.code="MODULE_NOT_FOUND",c}())}catch{m=function(){}}var U=e.EVENTS.filter(function(_){return"error"!==_&&"end"!==_});function L(_,c){if(!(this instanceof L))return new L(_,c);m.apply(this),this._parser=new N(_,c),this.writable=!0,this.readable=!0;var I=this;this._parser.onend=function(){I.emit("end")},this._parser.onerror=function(C){I.emit("error",C),I._parser.error=null},this._decoder=null,U.forEach(function(C){Object.defineProperty(I,"on"+C,{get:function(){return I._parser["on"+C]},set:function(J){if(!J)return I.removeAllListeners(C),I._parser["on"+C]=J,J;I.on(C,J)},enumerable:!0,configurable:!1})})}(L.prototype=Object.create(m.prototype,{constructor:{value:L}})).write=function(_){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(_)){if(!this._decoder){var c=R(3054).s;this._decoder=new c("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},L.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},L.prototype.on=function(_,c){var I=this;return!I._parser["on"+_]&&-1!==U.indexOf(_)&&(I._parser["on"+_]=function(){var C=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,_),I.emit.apply(I,C)}),m.prototype.on.call(I,_,c)};var G="[CDATA[",K="DOCTYPE",B="http://www.w3.org/XML/1998/namespace",Y="http://www.w3.org/2000/xmlns/",z={xml:B,xmlns:Y},q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function h(_){return" "===_||"\n"===_||"\r"===_||"\t"===_}function u(_){return'"'===_||"'"===_}function v(_){return">"===_||h(_)}function P(_,c){return _.test(c)}function $(_,c){return!P(_,c)}var _,c,I,T=0;for(var j in e.STATE={BEGIN:T++,BEGIN_WHITESPACE:T++,TEXT:T++,TEXT_ENTITY:T++,OPEN_WAKA:T++,SGML_DECL:T++,SGML_DECL_QUOTED:T++,DOCTYPE:T++,DOCTYPE_QUOTED:T++,DOCTYPE_DTD:T++,DOCTYPE_DTD_QUOTED:T++,COMMENT_STARTING:T++,COMMENT:T++,COMMENT_ENDING:T++,COMMENT_ENDED:T++,CDATA:T++,CDATA_ENDING:T++,CDATA_ENDING_2:T++,PROC_INST:T++,PROC_INST_BODY:T++,PROC_INST_ENDING:T++,OPEN_TAG:T++,OPEN_TAG_SLASH:T++,ATTRIB:T++,ATTRIB_NAME:T++,ATTRIB_NAME_SAW_WHITE:T++,ATTRIB_VALUE:T++,ATTRIB_VALUE_QUOTED:T++,ATTRIB_VALUE_CLOSED:T++,ATTRIB_VALUE_UNQUOTED:T++,ATTRIB_VALUE_ENTITY_Q:T++,ATTRIB_VALUE_ENTITY_U:T++,CLOSE_TAG:T++,CLOSE_TAG_SAW_WHITE:T++,SCRIPT:T++,SCRIPT_ENDING:T++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(_){var c=e.ENTITIES[_],I="number"==typeof c?String.fromCharCode(c):c;e.ENTITIES[_]=I}),e.STATE)e.STATE[e.STATE[j]]=j;function re(_,c,I){_[c]&&_[c](I)}function _e(_,c,I){_.textNode&&Me(_),re(_,c,I)}function Me(_){_.textNode=Ee(_.opt,_.textNode),_.textNode&&re(_,"ontext",_.textNode),_.textNode=""}function Ee(_,c){return _.trim&&(c=c.trim()),_.normalize&&(c=c.replace(/\s+/g," ")),c}function Oe(_,c){return Me(_),_.trackPosition&&(c+="\nLine: "+_.line+"\nColumn: "+_.column+"\nChar: "+_.c),c=new Error(c),_.error=c,re(_,"onerror",c),_}function De(_){return _.sawRoot&&!_.closedRoot&&ne(_,"Unclosed root tag"),_.state!==T.BEGIN&&_.state!==T.BEGIN_WHITESPACE&&_.state!==T.TEXT&&Oe(_,"Unexpected end"),Me(_),_.c="",_.closed=!0,re(_,"onend"),N.call(_,_.strict,_.opt),_}function ne(_,c){if("object"!=typeof _||!(_ instanceof N))throw new Error("bad call to strictFail");_.strict&&Oe(_,c)}function Xe(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var c=_.tags[_.tags.length-1]||_,I=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(I.ns=c.ns),_.attribList.length=0,_e(_,"onopentagstart",I)}function we(_,c){var C=_.indexOf(":")<0?["",_]:_.split(":"),J=C[0],le=C[1];return c&&"xmlns"===_&&(J="xmlns",le=""),{prefix:J,local:le}}function Re(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),-1!==_.attribList.indexOf(_.attribName)||_.tag.attributes.hasOwnProperty(_.attribName))_.attribName=_.attribValue="";else{if(_.opt.xmlns){var c=we(_.attribName,!0),C=c.local;if("xmlns"===c.prefix)if("xml"===C&&_.attribValue!==B)ne(_,"xml: prefix must be bound to "+B+"\nActual: "+_.attribValue);else if("xmlns"===C&&_.attribValue!==Y)ne(_,"xmlns: prefix must be bound to "+Y+"\nActual: "+_.attribValue);else{var J=_.tag,le=_.tags[_.tags.length-1]||_;J.ns===le.ns&&(J.ns=Object.create(le.ns)),J.ns[C]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,_e(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}}function se(_,c){if(_.opt.xmlns){var I=_.tag,C=we(_.tagName);I.prefix=C.prefix,I.local=C.local,I.uri=I.ns[C.prefix]||"",I.prefix&&!I.uri&&(ne(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),I.uri=C.prefix),I.ns&&(_.tags[_.tags.length-1]||_).ns!==I.ns&&Object.keys(I.ns).forEach(function(x){_e(_,"onopennamespace",{prefix:x,uri:I.ns[x]})});for(var le=0,X=_.attribList.length;le<X;le++){var me=_.attribList[le],ge=me[0],d=me[1],s=we(ge,!0),a=s.prefix,y=""===a?"":I.ns[a]||"",w={name:ge,value:d,prefix:a,local:s.local,uri:y};a&&"xmlns"!==a&&!y&&(ne(_,"Unbound namespace prefix: "+JSON.stringify(a)),w.uri=a),_.tag.attributes[ge]=w,_e(_,"onattribute",w)}_.attribList.length=0}_.tag.isSelfClosing=!!c,_.sawRoot=!0,_.tags.push(_.tag),_e(_,"onopentag",_.tag),c||(_.state=_.noscript||"script"!==_.tagName.toLowerCase()?T.TEXT:T.SCRIPT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function pe(_){if(!_.tagName)return ne(_,"Weird empty close tag."),_.textNode+="</>",void(_.state=T.TEXT);if(_.script){if("script"!==_.tagName)return _.script+="</"+_.tagName+">",_.tagName="",void(_.state=T.SCRIPT);_e(_,"onscript",_.script),_.script=""}var c=_.tags.length,I=_.tagName;_.strict||(I=I[_.looseCase]());for(var C=I;c--&&_.tags[c].name!==C;)ne(_,"Unexpected close tag");if(c<0)return ne(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",void(_.state=T.TEXT);_.tagName=I;for(var le=_.tags.length;le-- >c;){var X=_.tag=_.tags.pop();_.tagName=_.tag.name,_e(_,"onclosetag",_.tagName);var me={};for(var ge in X.ns)me[ge]=X.ns[ge];_.opt.xmlns&&X.ns!==(_.tags[_.tags.length-1]||_).ns&&Object.keys(X.ns).forEach(function(s){_e(_,"onclosenamespace",{prefix:s,uri:X.ns[s]})})}0===c&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=T.TEXT}function ke(_){var C,c=_.entity,I=c.toLowerCase(),J="";return _.ENTITIES[c]?_.ENTITIES[c]:_.ENTITIES[I]?_.ENTITIES[I]:("#"===(c=I).charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),J=(C=parseInt(c,16)).toString(16)):(c=c.slice(1),J=(C=parseInt(c,10)).toString(10))),c=c.replace(/^0+/,""),isNaN(C)||J.toLowerCase()!==c?(ne(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(C))}function be(_,c){"<"===c?(_.state=T.OPEN_WAKA,_.startTagPosition=_.position):h(c)||(ne(_,"Non-whitespace before first tag."),_.textNode=c,_.state=T.TEXT)}function xe(_,c){var I="";return c<_.length&&(I=_.charAt(c)),I}T=e.STATE,String.fromCodePoint||(_=String.fromCharCode,c=Math.floor,I=function(){var J=[],me=-1,ge=arguments.length;if(!ge)return"";for(var d="";++me<ge;){var s=Number(arguments[me]);if(!isFinite(s)||s<0||s>1114111||c(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?J.push(s):J.push(55296+((s-=65536)>>10),s%1024+56320),(me+1===ge||J.length>16384)&&(d+=_.apply(null,J),J.length=0)}return d},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I)}(te)},3054:(he,te,R)=>{"use strict";var e=R(3502).Buffer,O=e.isEncoding||function(E){switch((E=""+E)&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function g(E){var k;switch(this.encoding=function F(E){var k=function N(E){if(!E)return"utf8";for(var k;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(k)return;E=(""+E).toLowerCase(),k=!0}}(E);if("string"!=typeof k&&(e.isEncoding===O||!O(E)))throw new Error("Unknown encoding: "+E);return k||E}(E),this.encoding){case"utf16le":this.text=K,this.end=B,k=4;break;case"utf8":this.fillLast=W,k=4;break;case"base64":this.text=Y,this.end=z,k=3;break;default:return this.write=q,void(this.end=oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(k)}function D(E){return E<=127?0:E>>5==6?2:E>>4==14?3:E>>3==30?4:E>>6==2?-1:-2}function W(E){var k=this.lastTotal-this.lastNeed,h=function U(E,k,h){if(128!=(192&k[0]))return E.lastNeed=0,"\ufffd";if(E.lastNeed>1&&k.length>1){if(128!=(192&k[1]))return E.lastNeed=1,"\ufffd";if(E.lastNeed>2&&k.length>2&&128!=(192&k[2]))return E.lastNeed=2,"\ufffd"}}(this,E);return void 0!==h?h:this.lastNeed<=E.length?(E.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(E.copy(this.lastChar,k,0,E.length),void(this.lastNeed-=E.length))}function K(E,k){if((E.length-k)%2==0){var h=E.toString("utf16le",k);if(h){var u=h.charCodeAt(h.length-1);if(u>=55296&&u<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",k,E.length-1)}function B(E){var k=E&&E.length?this.write(E):"";return this.lastNeed?k+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):k}function Y(E,k){var h=(E.length-k)%3;return 0===h?E.toString("base64",k):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",k,E.length-h))}function z(E){var k=E&&E.length?this.write(E):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function q(E){return E.toString(this.encoding)}function oe(E){return E&&E.length?this.write(E):""}te.s=g,g.prototype.write=function(E){if(0===E.length)return"";var k,h;if(this.lastNeed){if(void 0===(k=this.fillLast(E)))return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<E.length?k?k+this.text(E,h):this.text(E,h):k||""},g.prototype.end=function G(E){var k=E&&E.length?this.write(E):"";return this.lastNeed?k+"\ufffd":k},g.prototype.text=function L(E,k){var h=function m(E,k,h){var u=k.length-1;if(u<h)return 0;var v=D(k[u]);return v>=0?(v>0&&(E.lastNeed=v-1),v):--u<h||-2===v?0:(v=D(k[u]))>=0?(v>0&&(E.lastNeed=v-2),v):--u<h||-2===v?0:(v=D(k[u]))>=0?(v>0&&(2===v?v=0:E.lastNeed=v-3),v):0}(this,E,k);if(!this.lastNeed)return E.toString("utf8",k);this.lastTotal=h;var u=E.length-(h-this.lastNeed);return E.copy(this.lastChar,0,u),E.toString("utf8",k,u)},g.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length}},7234:he=>{"use strict";var te=/([=:@$/])/g,R=/([&;/])/g,e=/[=:@$]/,O=/[&;]/;function N(m,U){return encodeURI(m.replace(U,"/$1"))}he.exports={stringify:function g(m,U){if(!U)return function F(m){return"string"==typeof m?m.replace(/;+$/g,""):m}(g(m,!0));if("number"==typeof m||!0===m||!1===m||null===m)return":"+m;var W=[];if(m instanceof Array){for(var L=0;L<m.length;++L)W.push(typeof m[L]>"u"?":null":g(m[L],!0));return"@"+W.join("&")+";"}if("object"==typeof m){for(var G in m){var K=g(m[G],!0);K&&W.push(N(G,te)+K)}return"$"+W.join("&")+";"}return typeof m>"u"?void 0:"="+N(m.toString(),R)},parse:function D(m){var U=0;function W(G){for(var K="";U!==m.length;++U){if("/"===m.charAt(U)){if((U+=1)===m.length){K+=";";break}}else if(m.charAt(U).match(G))break;K+=m.charAt(U)}return K}return m=decodeURI(m),function L(){var B,G=m.charAt(U++);if("="===G)return W(O);if(":"===G){var K=W(O);return"true"===K||"false"!==K&&(K=parseFloat(K),isNaN(K)?null:K)}if("@"===G){B=[];e:if(!(U>=m.length||";"===m.charAt(U)))for(;;){if(B.push(L()),U>=m.length||";"===m.charAt(U))break e;U+=1}return U+=1,B}if("$"===G){B={};e:if(!(U>=m.length||";"===m.charAt(U)))for(;;){if(B[W(e)]=L(),U>=m.length||";"===m.charAt(U))break e;U+=1}return U+=1,B}throw new Error("Unexpected char "+G)}()}}},5097:he=>{he.exports={isArray:function(te){return Array.isArray?Array.isArray(te):"[object Array]"===Object.prototype.toString.call(te)}}},9220:(he,te,R)=>{var e=R(9910),O=R(6976),N=R(3559),F=R(1097);he.exports={xml2js:e,xml2json:O,js2xml:N,json2xml:F}},3559:(he,te,R)=>{var N,F,e=R(5886),O=R(5097).isArray;function D(h,u,v){return(!v&&h.spaces?"\n":"")+Array(u+1).join(h.spaces)}function m(h,u,v){if(u.ignoreAttributes)return"";"attributesFn"in u&&(h=u.attributesFn(h,F,N));var P,$,T,j,re=[];for(P in h)h.hasOwnProperty(P)&&null!=h[P]&&(j=u.noQuotesForNativeAttributes&&"string"!=typeof h[P]?"":'"',$=($=""+h[P]).replace(/"/g,"&quot;"),T="attributeNameFn"in u?u.attributeNameFn(P,$,F,N):P,re.push(u.spaces&&u.indentAttributes?D(u,v+1,!1):" "),re.push(T+"="+j+("attributeValueFn"in u?u.attributeValueFn($,P,F,N):$)+j));return h&&Object.keys(h).length&&u.spaces&&u.indentAttributes&&re.push(D(u,v,!1)),re.join("")}function U(h,u,v){return N=h,F="xml",u.ignoreDeclaration?"":"<?xml"+m(h[u.attributesKey],u,v)+"?>"}function W(h,u,v){if(u.ignoreInstruction)return"";var P;for(P in h)if(h.hasOwnProperty(P))break;var $="instructionNameFn"in u?u.instructionNameFn(P,h[P],F,N):P;if("object"==typeof h[P])return N=h,F=$,"<?"+$+m(h[P][u.attributesKey],u,v)+"?>";var T=h[P]?h[P]:"";return"instructionFn"in u&&(T=u.instructionFn(T,P,F,N)),"<?"+$+(T?" "+T:"")+"?>"}function L(h,u){return u.ignoreComment?"":"\x3c!--"+("commentFn"in u?u.commentFn(h,F,N):h)+"--\x3e"}function G(h,u){return u.ignoreCdata?"":"<![CDATA["+("cdataFn"in u?u.cdataFn(h,F,N):h.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function K(h,u){return u.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in u?u.doctypeFn(h,F,N):h)+">"}function B(h,u){return u.ignoreText?"":(h=(h=(h=""+h).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in u?u.textFn(h,F,N):h)}function q(h,u,v,P){return h.reduce(function($,T){var j=D(u,v,P&&!$);switch(T.type){case"element":return $+j+function z(h,u,v){N=h,F=h.name;var P=[],$="elementNameFn"in u?u.elementNameFn(h.name,h):h.name;P.push("<"+$),h[u.attributesKey]&&P.push(m(h[u.attributesKey],u,v));var T=h[u.elementsKey]&&h[u.elementsKey].length||h[u.attributesKey]&&"preserve"===h[u.attributesKey]["xml:space"];return T||(T="fullTagEmptyElementFn"in u?u.fullTagEmptyElementFn(h.name,h):u.fullTagEmptyElement),T?(P.push(">"),h[u.elementsKey]&&h[u.elementsKey].length&&(P.push(q(h[u.elementsKey],u,v+1)),N=h,F=h.name),P.push(u.spaces&&function Y(h,u){var v;if(h.elements&&h.elements.length)for(v=0;v<h.elements.length;++v)switch(h.elements[v][u.typeKey]){case"text":if(u.indentText)return!0;break;case"cdata":if(u.indentCdata)return!0;break;case"instruction":if(u.indentInstruction)return!0;break;default:return!0}return!1}(h,u)?"\n"+Array(v+1).join(u.spaces):""),P.push("</"+$+">")):P.push("/>"),P.join("")}(T,u,v);case"comment":return $+j+L(T[u.commentKey],u);case"doctype":return $+j+K(T[u.doctypeKey],u);case"cdata":return $+(u.indentCdata?j:"")+G(T[u.cdataKey],u);case"text":return $+(u.indentText?j:"")+B(T[u.textKey],u);case"instruction":var re={};return re[T[u.nameKey]]=T[u.attributesKey]?T:T[u.instructionKey],$+(u.indentInstruction?j:"")+W(re,u,v)}},"")}function oe(h,u,v){var P;for(P in h)if(h.hasOwnProperty(P))switch(P){case u.parentKey:case u.attributesKey:break;case u.textKey:if(u.indentText||v)return!0;break;case u.cdataKey:if(u.indentCdata||v)return!0;break;case u.instructionKey:if(u.indentInstruction||v)return!0;break;default:return!0}return!1}function E(h,u,v,P,$){N=h,F=u;var T="elementNameFn"in v?v.elementNameFn(u,h):u;if(typeof h>"u"||null===h||""===h)return"fullTagEmptyElementFn"in v&&v.fullTagEmptyElementFn(u,h)||v.fullTagEmptyElement?"<"+T+"></"+T+">":"<"+T+"/>";var j=[];if(u){if(j.push("<"+T),"object"!=typeof h)return j.push(">"+B(h,v)+"</"+T+">"),j.join("");h[v.attributesKey]&&j.push(m(h[v.attributesKey],v,P));var re=oe(h,v,!0)||h[v.attributesKey]&&"preserve"===h[v.attributesKey]["xml:space"];if(re||(re="fullTagEmptyElementFn"in v?v.fullTagEmptyElementFn(u,h):v.fullTagEmptyElement),!re)return j.push("/>"),j.join("");j.push(">")}return j.push(k(h,v,P+1,!1)),N=h,F=u,u&&j.push(($?D(v,P,!1):"")+"</"+T+">"),j.join("")}function k(h,u,v,P){var $,T,j,re=[];for(T in h)if(h.hasOwnProperty(T))for(j=O(h[T])?h[T]:[h[T]],$=0;$<j.length;++$){switch(T){case u.declarationKey:re.push(U(j[$],u,v));break;case u.instructionKey:re.push((u.indentInstruction?D(u,v,P):"")+W(j[$],u,v));break;case u.attributesKey:case u.parentKey:break;case u.textKey:re.push((u.indentText?D(u,v,P):"")+B(j[$],u));break;case u.cdataKey:re.push((u.indentCdata?D(u,v,P):"")+G(j[$],u));break;case u.doctypeKey:re.push(D(u,v,P)+K(j[$],u));break;case u.commentKey:re.push(D(u,v,P)+L(j[$],u));break;default:re.push(D(u,v,P)+E(j[$],T,u,v,oe(j[$],u)))}P=P&&!re.length}return re.join("")}he.exports=function(h,u){u=function g(h){var u=e.copyOptions(h);return e.ensureFlagExists("ignoreDeclaration",u),e.ensureFlagExists("ignoreInstruction",u),e.ensureFlagExists("ignoreAttributes",u),e.ensureFlagExists("ignoreText",u),e.ensureFlagExists("ignoreComment",u),e.ensureFlagExists("ignoreCdata",u),e.ensureFlagExists("ignoreDoctype",u),e.ensureFlagExists("compact",u),e.ensureFlagExists("indentText",u),e.ensureFlagExists("indentCdata",u),e.ensureFlagExists("indentAttributes",u),e.ensureFlagExists("indentInstruction",u),e.ensureFlagExists("fullTagEmptyElement",u),e.ensureFlagExists("noQuotesForNativeAttributes",u),e.ensureSpacesExists(u),"number"==typeof u.spaces&&(u.spaces=Array(u.spaces+1).join(" ")),e.ensureKeyExists("declaration",u),e.ensureKeyExists("instruction",u),e.ensureKeyExists("attributes",u),e.ensureKeyExists("text",u),e.ensureKeyExists("comment",u),e.ensureKeyExists("cdata",u),e.ensureKeyExists("doctype",u),e.ensureKeyExists("type",u),e.ensureKeyExists("name",u),e.ensureKeyExists("elements",u),e.checkFnExists("doctype",u),e.checkFnExists("instruction",u),e.checkFnExists("cdata",u),e.checkFnExists("comment",u),e.checkFnExists("text",u),e.checkFnExists("instructionName",u),e.checkFnExists("elementName",u),e.checkFnExists("attributeName",u),e.checkFnExists("attributeValue",u),e.checkFnExists("attributes",u),e.checkFnExists("fullTagEmptyElement",u),u}(u);var v=[];return N=h,F="_root_",u.compact?v.push(k(h,u,0,!0)):(h[u.declarationKey]&&v.push(U(h[u.declarationKey],u,0)),h[u.elementsKey]&&h[u.elementsKey].length&&v.push(q(h[u.elementsKey],u,0,!v.length))),v.join("")}},1097:(he,te,R)=>{var e=R(3559);he.exports=function(O,N){O instanceof Buffer&&(O=O.toString());var F=null;if("string"==typeof O)try{F=JSON.parse(O)}catch{throw new Error("The JSON structure is invalid")}else F=O;return e(F,N)}},5886:(he,te,R)=>{var e=R(5097).isArray;he.exports={copyOptions:function(O){var N,F={};for(N in O)O.hasOwnProperty(N)&&(F[N]=O[N]);return F},ensureFlagExists:function(O,N){(!(O in N)||"boolean"!=typeof N[O])&&(N[O]=!1)},ensureSpacesExists:function(O){(!("spaces"in O)||"number"!=typeof O.spaces&&"string"!=typeof O.spaces)&&(O.spaces=0)},ensureAlwaysArrayExists:function(O){(!("alwaysArray"in O)||"boolean"!=typeof O.alwaysArray&&!e(O.alwaysArray))&&(O.alwaysArray=!1)},ensureKeyExists:function(O,N){(!(O+"Key"in N)||"string"!=typeof N[O+"Key"])&&(N[O+"Key"]=N.compact?"_"+O:O)},checkFnExists:function(O,N){return O+"Fn"in N}}},9910:(he,te,R)=>{var g,m,e=R(1503),N=R(5886),F=R(5097).isArray;function W(h){var u=Number(h);if(!isNaN(u))return u;var v=h.toLowerCase();return"true"===v||"false"!==v&&h}function L(h,u){var v;if(g.compact){if(!m[g[h+"Key"]]&&(F(g.alwaysArray)?-1!==g.alwaysArray.indexOf(g[h+"Key"]):g.alwaysArray)&&(m[g[h+"Key"]]=[]),m[g[h+"Key"]]&&!F(m[g[h+"Key"]])&&(m[g[h+"Key"]]=[m[g[h+"Key"]]]),h+"Fn"in g&&"string"==typeof u&&(u=g[h+"Fn"](u,m)),"instruction"===h&&("instructionFn"in g||"instructionNameFn"in g))for(v in u)if(u.hasOwnProperty(v))if("instructionFn"in g)u[v]=g.instructionFn(u[v],v,m);else{var P=u[v];delete u[v],u[g.instructionNameFn(v,P,m)]=P}F(m[g[h+"Key"]])?m[g[h+"Key"]].push(u):m[g[h+"Key"]]=u}else{m[g.elementsKey]||(m[g.elementsKey]=[]);var $={};if($[g.typeKey]=h,"instruction"===h){for(v in u)if(u.hasOwnProperty(v))break;$[g.nameKey]="instructionNameFn"in g?g.instructionNameFn(v,u,m):v,g.instructionHasAttributes?($[g.attributesKey]=u[v][g.attributesKey],"instructionFn"in g&&($[g.attributesKey]=g.instructionFn($[g.attributesKey],v,m))):("instructionFn"in g&&(u[v]=g.instructionFn(u[v],v,m)),$[g.instructionKey]=u[v])}else h+"Fn"in g&&(u=g[h+"Fn"](u,m)),$[g[h+"Key"]]=u;g.addParent&&($[g.parentKey]=m),m[g.elementsKey].push($)}}function G(h){var u;if("attributesFn"in g&&h&&(h=g.attributesFn(h,m)),(g.trim||"attributeValueFn"in g||"attributeNameFn"in g||g.nativeTypeAttributes)&&h)for(u in h)if(h.hasOwnProperty(u)&&(g.trim&&(h[u]=h[u].trim()),g.nativeTypeAttributes&&(h[u]=W(h[u])),"attributeValueFn"in g&&(h[u]=g.attributeValueFn(h[u],u,m)),"attributeNameFn"in g)){var v=h[u];delete h[u],h[g.attributeNameFn(u,h[u],m)]=v}return h}function K(h){var u={};if(h.body&&("xml"===h.name.toLowerCase()||g.instructionHasAttributes)){for(var P,v=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(P=v.exec(h.body));)u[P[1]]=P[2]||P[3]||P[4];u=G(u)}if("xml"===h.name.toLowerCase()){if(g.ignoreDeclaration)return;m[g.declarationKey]={},Object.keys(u).length&&(m[g.declarationKey][g.attributesKey]=u),g.addParent&&(m[g.declarationKey][g.parentKey]=m)}else{if(g.ignoreInstruction)return;g.trim&&(h.body=h.body.trim());var $={};g.instructionHasAttributes&&Object.keys(u).length?($[h.name]={},$[h.name][g.attributesKey]=u):$[h.name]=h.body,L("instruction",$)}}function B(h,u){var v;if("object"==typeof h&&(u=h.attributes,h=h.name),u=G(u),"elementNameFn"in g&&(h=g.elementNameFn(h,m)),g.compact){var P;if(v={},!g.ignoreAttributes&&u&&Object.keys(u).length)for(P in v[g.attributesKey]={},u)u.hasOwnProperty(P)&&(v[g.attributesKey][P]=u[P]);!(h in m)&&(F(g.alwaysArray)?-1!==g.alwaysArray.indexOf(h):g.alwaysArray)&&(m[h]=[]),m[h]&&!F(m[h])&&(m[h]=[m[h]]),F(m[h])?m[h].push(v):m[h]=v}else m[g.elementsKey]||(m[g.elementsKey]=[]),(v={})[g.typeKey]="element",v[g.nameKey]=h,!g.ignoreAttributes&&u&&Object.keys(u).length&&(v[g.attributesKey]=u),g.alwaysChildren&&(v[g.elementsKey]=[]),m[g.elementsKey].push(v);v[g.parentKey]=m,m=v}function Y(h){g.ignoreText||!h.trim()&&!g.captureSpacesBetweenElements||(g.trim&&(h=h.trim()),g.nativeType&&(h=W(h)),g.sanitize&&(h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),L("text",h))}function z(h){g.ignoreComment||(g.trim&&(h=h.trim()),L("comment",h))}function q(h){var u=m[g.parentKey];g.addParent||delete m[g.parentKey],m=u}function oe(h){g.ignoreCdata||(g.trim&&(h=h.trim()),L("cdata",h))}function E(h){g.ignoreDoctype||(h=h.replace(/^ /,""),g.trim&&(h=h.trim()),L("doctype",h))}function k(h){h.note=h}he.exports=function(h,u){var v=e.parser(!0,{}),P={};if(m=P,g=function U(h){return g=N.copyOptions(h),N.ensureFlagExists("ignoreDeclaration",g),N.ensureFlagExists("ignoreInstruction",g),N.ensureFlagExists("ignoreAttributes",g),N.ensureFlagExists("ignoreText",g),N.ensureFlagExists("ignoreComment",g),N.ensureFlagExists("ignoreCdata",g),N.ensureFlagExists("ignoreDoctype",g),N.ensureFlagExists("compact",g),N.ensureFlagExists("alwaysChildren",g),N.ensureFlagExists("addParent",g),N.ensureFlagExists("trim",g),N.ensureFlagExists("nativeType",g),N.ensureFlagExists("nativeTypeAttributes",g),N.ensureFlagExists("sanitize",g),N.ensureFlagExists("instructionHasAttributes",g),N.ensureFlagExists("captureSpacesBetweenElements",g),N.ensureAlwaysArrayExists(g),N.ensureKeyExists("declaration",g),N.ensureKeyExists("instruction",g),N.ensureKeyExists("attributes",g),N.ensureKeyExists("text",g),N.ensureKeyExists("comment",g),N.ensureKeyExists("cdata",g),N.ensureKeyExists("doctype",g),N.ensureKeyExists("type",g),N.ensureKeyExists("name",g),N.ensureKeyExists("elements",g),N.ensureKeyExists("parent",g),N.checkFnExists("doctype",g),N.checkFnExists("instruction",g),N.checkFnExists("cdata",g),N.checkFnExists("comment",g),N.checkFnExists("text",g),N.checkFnExists("instructionName",g),N.checkFnExists("elementName",g),N.checkFnExists("attributeName",g),N.checkFnExists("attributeValue",g),N.checkFnExists("attributes",g),g}(u),v.opt={strictEntities:!0},v.onopentag=B,v.ontext=Y,v.oncomment=z,v.onclosetag=q,v.onerror=k,v.oncdata=oe,v.ondoctype=E,v.onprocessinginstruction=K,v.write(h).close(),P[g.elementsKey]){var $=P[g.elementsKey];delete P[g.elementsKey],P[g.elementsKey]=$,delete P.text}return P}},6976:(he,te,R)=>{var e=R(5886),O=R(9910);he.exports=function(F,g){var D,m,W;return D=function N(F){var g=e.copyOptions(F);return e.ensureSpacesExists(g),g}(g),m=O(F,D),W="compact"in D&&D.compact?"_parent":"parent",("addParent"in D&&D.addParent?JSON.stringify(m,function(L,G){return L===W?"_":G},D.spaces):JSON.stringify(m,null,D.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}}}]);